<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc-markdown-css-theme" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Nix (builtins) &amp; Nixpkgs (lib) Functions</title>
  <style type="text/css">

:root {

--background-color: #fff;
--color-text: #1b2733;
--color-text-secondary: #637282;
--color-link: #0070e0;
--color-sidenote: #616970;
--highlight-red: #ea9999;
--highlight-yellow: #ffe599;
--highlight-green: #b6d7a8;
--highlight-blue: #a4c2f4;
--highlight-purple: #b4a7d6;
--color-inline-code: #1b2733;
--color-inline-code-bg: #f3f3f8;
--color-border: #dfdfd0;
--color-border-heavy: #ccccd4;
--color-table-heading: #f3f3fb;

--font-family-prose: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;
--font-family-heading: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;
--font-family-code: Menlo, monospace;
--side-note-number-font-family: var(--font-family-prose);
--line-height: 26px;
--font-size: 17px;
--inline-code-font-size: 15px;
--code-block-font-size: 14px;
--code-block-side-padding: 8px;
--line-numbers-font-size: 12px;
--tight-code-line-height: 18px;
--tight-code-padding-top: 5px;
--side-note-line-height: 20px;
--side-note-font-size: 13px;
--side-note-code-font-size: 13px;
--side-note-baseline-offset: 4px;
--side-note-sup-offset: -6px;
--side-note-number-hang-left: -6px;
--side-note-text-indent: -9px;
--heading-font-weight: 500;
--title-font-size: 42px;
--title-code-font-size: 40px;
--title-line-height: 48px;
--title-margin-top: 92px;
--h1-font-size: 32px;
--h1-code-font-size: 29px;
--h1-line-height: 36px;
--h1-word-spacing: 1px;
--h1-margin-top: 30px;
--h1-margin-bottom: 12px;
--h2-font-size: 22px;
--h2-code-font-size: 20px;
--h2-line-height: 28px;
--h2-word-spacing: 0.5px;
--h2-margin-top: 18px;
--h2-margin-bottom: 6px;
--ul-indent-size: 23px;
--ol-indent-size: 19px;
--ol-li-padding-left: 4px;
--hr-margin-top: 18px;
--hr-margin-bottom: calc(var(--line-height) - var(--hr-margin-top) - 1px);
--extra-wide-scale-factor: 1.5;
--figcaption-line-height: 21px;
--figcaption-font-size: 14px;
--figcaption-code-font-size: 13px;
--figcaption-gap: 6px;
--captioned-figure-gap: 10px;
--table-line-height: 21px;
--table-font-size: 14px;
--table-code-font-size: 13px;
--nav-toc-font-size: 12px;
--nav-toc-code-font-size: 12px;
--nav-toc-indent: 15px;
--nav-toc-baseline-offset: 2px;

--main-width: 745px;
--main-width-narrow: 550px;
}
*, *:after, *:before {
box-sizing: border-box;
margin: 0;
padding: 0;
-webkit-tap-highlight-color: rgba(0,0,0,0);
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
}
html {

-webkit-text-size-adjust: 100%;
}
body {
font-family: var(--font-family-prose);
color: var(--color-text);
font-size: var(--font-size);
line-height: var(--line-height);
-webkit-font-variant-ligatures: no-common-ligatures;
font-variant-ligatures: no-common-ligatures;

hanging-punctuation: first;
margin: 0;
padding: 0;
padding-top: var(--title-margin-top);
width: 100%;
background-color: var(--background-color);
}
@media print {
body {
background-color: initial;
}
}



.sidenote,
.marginnote {
color: var(--color-sidenote);
font-size: var(--side-note-font-size);
line-height: var(--side-note-line-height);
vertical-align: baseline;

margin-top: var(--side-note-baseline-offset);
}
.sidenote code,
.marginnote code {
color: var(--color-sidenote);
}
body {
counter-reset: sidenote-counter;
}
.sidenote-number {
counter-increment: sidenote-counter;
}
.sidenote-number:after,
.sidenote:before {
content: counter(sidenote-counter);
position: relative;
}
nav#TOC label,
label.margin-toggle:not(.sidenote-number),
.sidenote-number:after,
.sidenote:before,
.footnote-ref sup,
sup {
font-size: var(--side-note-font-size);
font-weight: 700;
font-family: var(--side-note-number-font-family);
-webkit-font-feature-settings: "tnum" 1;
font-feature-settings: "tnum" 1;

vertical-align: baseline;
position: relative;
top: var(--side-note-sup-offset);
}
sup {
font-weight: inherit;
}

.sidenote:before { left: var(--side-note-number-hang-left); }

.sidenote { text-indent: var(--side-note-text-indent); }


input.margin-toggle {
display: none;
}
label.margin-toggle:not(.sidenote-number) {
display: none;
}
label.sidenote-number {
display: inline;
}

@media screen and (max-width: calc(26px + 550px + 26px + 169px + 26px - 1px)) {
.margin-toggle:checked + .sidenote,
.margin-toggle:checked + .marginnote {
margin-top: var(--side-note-line-height);
vertical-align: baseline;
}
label.margin-toggle {
color: var(--color-link);
}
label.margin-toggle:not(.sidenote-number) {
display: inline;
}
label {
cursor: pointer;
}
}



h1, h2 {
font-family: var(--font-family-heading);
font-weight: var(--heading-font-weight);
}
h4, h5, h6 {
font-weight: normal;
}
h1.title {
margin-top: var(--line-height);
margin-bottom: var(--line-height);
font-size: var(--title-font-size);
line-height: var(--title-line-height);
}
h1.title code {
font-size: var(--title-code-font-size);
}
h1:not(.title) {
font-size: var(--h1-font-size);
line-height: var(--h1-line-height);
word-spacing: var(--h1-word-spacing);
margin-top: var(--h1-margin-top);
margin-bottom: var(--h1-margin-bottom);
}
h1:not(.title) code {
font-size: var(--h1-code-font-size);
}
h2 {
font-size: var(--h2-font-size);
line-height: var(--h2-line-height);
word-spacing: var(--h2-word-spacing);
margin-top: var(--h2-margin-top);
margin-bottom: var(--h2-margin-bottom);
}
h2 code {
font-size: var(--h2-code-font-size);
}
h3 {
font-size: var(--font-size);
line-height: var(--line-height);
font-weight: bold;
}
h1:not(.title) + *, h1:not(.title) + p { margin-top: var(--h1-margin-bottom); }
h2 + *, h2 + p { margin-top: var(--h2-margin-bottom); }
h3 + *, h3 + p { margin-top: 0; }


p, main > ul, main > ol, div.sourceCode, main > pre, img, table {
margin-top: var(--line-height);
margin-bottom: var(--line-height)
}
ul:not(.task-list) {
margin-left: var(--ul-indent-size);
}
ol {
margin-left: var(--ol-indent-size);
}
ul.task-list {
list-style: none;
margin-left: var(--ul-indent-size);
}
ul.task-list > li {
position: relative;
}
ul.task-list > li > input[type="checkbox"] {
position: absolute;
left: calc(-1 * var(--ul-indent-size));
height: var(--line-height);
}
ol > li {
padding-left: var(--ol-li-padding-left);
}
ol { list-style-type: decimal; }
ol ol { list-style-type: lower-alpha; }
ol ol ol { list-style-type: lower-roman; }
ol ol ol ol { list-style-type: decimal; }
ol ol ol ol ol { list-style-type: lower-alpha; }
ol ol ol ol ol ol { list-style-type: lower-roman; }
ol ol ol ol ol ol ol { list-style-type: decimal; }
ol ol ol ol ol ol ol ol { list-style-type: lower-alpha; }
ol ol ol ol ol ol ol ol ol { list-style-type: lower-roman; }
ul { list-style-type: disc; }
ul ul { list-style-type: circle; }
ul ul ul { list-style-type: square; }
ul ul ul ul { list-style-type: disc; }
ul ul ul ul ul { list-style-type: circle; }
ul ul ul ul ul ul { list-style-type: square; }
ul ul ul ul ul ul ul { list-style-type: disc; }
ul ul ul ul ul ul ul ul { list-style-type: circle; }
ul ul ul ul ul ul ul ul ul { list-style-type: square; }
blockquote {
border-left: 1px solid var(--color-text-secondary);
padding-left: 1.5rem;
font-style: italic;
}
blockquote > p {
margin-top: 0;
}
blockquote em, blockquote i, blockquote .sidenote-wrapper {
font-style: normal;
}
hr {
margin-top: var(--hr-margin-top);
margin-bottom: var(--hr-margin-bottom);
border-style: solid;
color: var(--color-border-heavy);
border-width: 1px 0 0;
}
a code, a:link code, a:visited code,
a, a:link, a:visited {
color: var(--color-link);
text-decoration: none;
}
a:hover {
text-decoration: underline;
}
span.mark, mark {

color: inherit;
padding: 2px 0 1px;
}
span.mark.red, mark.red { background-color: var(--highlight-red); }
span.mark.yellow, mark.yellow { background-color: var(--highlight-yellow); }
span.mark.green, mark.green { background-color: var(--highlight-green); }
span.mark.blue, mark.blue { background-color: var(--highlight-blue); }
span.mark.purple, mark.purple { background-color: var(--highlight-purple); }
.subtitle {
margin-top: 0;
}
.author, .date {
margin-top: 0;
margin-bottom: 0;
}
.signoff {
margin-top: calc(4 * var(--line-height));
margin-bottom: calc(4 * var(--line-height));
}

span.smallcaps{ font-variant: small-caps; }
span.underline{ text-decoration: underline; }
.katex-display {
background: var(--background-color);
transform: translateZ(0px);
}
@media print {
.katex-display {
background-color: initial;
}
}



code {
font-family: var(--font-family-code);
word-spacing: normal;

color: var(--color-inline-code);
background-color: var(--color-inline-code-bg);
font-size: var(--inline-code-font-size);
margin: 0;
padding: 2px 0 1px;
border: 1px solid var(--color-border);
border-radius: 1px;
}
.sidenote code,
.marginnote code {
font-size: var(--side-note-code-font-size);
}
pre code {

color: inherit;
background-color: inherit;
font-size: var(--code-block-font-size);
line-height: var(--line-height);
margin: initial;
padding: initial;
border: initial;
border-radius: initial;
}
pre > code {
position: relative; 
display: inline-block;
min-width: 100%;
z-index: 1;
white-space: pre-wrap;
padding: 0 var(--code-block-side-padding);
}
code.sourceCode::selection {

background: transparent;
}
.wide > pre, .wide > div.sourceCode {

transform: translateZ(0px);
}
.wide pre > code {
white-space: pre;
}
pre.numberSource code {
counter-reset: source-line 0;
}
pre > code.sourceCode > span {
line-height: var(--line-height);
display: inline-block;
min-width: 100%;
}
div.sourceCode {

--line-numbers-width: calc(4 * var(--line-numbers-font-size));
--line-numbers-negative-width: calc(-1 * var(--line-numbers-width));
margin-left: var(--line-numbers-negative-width);
}
div.sourceCode > pre {
margin-left: var(--line-numbers-width);
}
pre.numberSource > code.sourceCode > span {
counter-increment: source-line;
padding-left: var(--line-numbers-width);
text-indent: var(--line-numbers-negative-width);
position: relative;
left: var(--line-numbers-negative-width);
}
pre.numberSource > code.sourceCode > span > a:first-child::before {
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
content: counter(source-line);
font-size: var(--line-numbers-font-size);
text-decoration: none;
position: relative;
text-align: right;
display: inline-block;
padding: 0 calc(2 * var(--code-block-side-padding));
width: var(--line-numbers-width);
}
pre > code.sourceCode > span > a:first-child::before:hover {
text-decoration: underline;
}

.tight-code pre,
pre.tight-code {
padding-top: var(--tight-code-padding-top);
}
pre.tight-code code,
.tight-code pre code,
.tight-code pre > code.sourceCode > span,
pre.tight-code > code.sourceCode > span {
line-height: var(--tight-code-line-height);
}


pre > code.sourceCode > span::after {
position: absolute;
background-color: var(--color-code-highlight-bg);
z-index: -1;
left: calc(var(--line-numbers-width) - var(--code-block-side-padding));
right: calc(var(--line-numbers-negative-width) - var(--code-block-side-padding));
top: 0;
height: 100%;
}
pre.hl-1 > code.sourceCode > span:nth-of-type(1)::after { content: ""; }
pre.hl-2 > code.sourceCode > span:nth-of-type(2)::after { content: ""; }
pre.hl-3 > code.sourceCode > span:nth-of-type(3)::after { content: ""; }
pre.hl-4 > code.sourceCode > span:nth-of-type(4)::after { content: ""; }
pre.hl-5 > code.sourceCode > span:nth-of-type(5)::after { content: ""; }
pre.hl-6 > code.sourceCode > span:nth-of-type(6)::after { content: ""; }
pre.hl-7 > code.sourceCode > span:nth-of-type(7)::after { content: ""; }
pre.hl-8 > code.sourceCode > span:nth-of-type(8)::after { content: ""; }
pre.hl-9 > code.sourceCode > span:nth-of-type(9)::after { content: ""; }
pre.hl-10 > code.sourceCode > span:nth-of-type(10)::after { content: ""; }
pre.hl-11 > code.sourceCode > span:nth-of-type(11)::after { content: ""; }
pre.hl-12 > code.sourceCode > span:nth-of-type(12)::after { content: ""; }
pre.hl-13 > code.sourceCode > span:nth-of-type(13)::after { content: ""; }
pre.hl-14 > code.sourceCode > span:nth-of-type(14)::after { content: ""; }
pre.hl-15 > code.sourceCode > span:nth-of-type(15)::after { content: ""; }
pre.hl-16 > code.sourceCode > span:nth-of-type(16)::after { content: ""; }
pre.hl-17 > code.sourceCode > span:nth-of-type(17)::after { content: ""; }
pre.hl-18 > code.sourceCode > span:nth-of-type(18)::after { content: ""; }
pre.hl-19 > code.sourceCode > span:nth-of-type(19)::after { content: ""; }
pre.hl-20 > code.sourceCode > span:nth-of-type(20)::after { content: ""; }
pre.hl-21 > code.sourceCode > span:nth-of-type(21)::after { content: ""; }
pre.hl-22 > code.sourceCode > span:nth-of-type(22)::after { content: ""; }
pre.hl-23 > code.sourceCode > span:nth-of-type(23)::after { content: ""; }
pre.hl-24 > code.sourceCode > span:nth-of-type(24)::after { content: ""; }
pre.hl-25 > code.sourceCode > span:nth-of-type(25)::after { content: ""; }
pre.hl-26 > code.sourceCode > span:nth-of-type(26)::after { content: ""; }
pre.hl-27 > code.sourceCode > span:nth-of-type(27)::after { content: ""; }
pre.hl-28 > code.sourceCode > span:nth-of-type(28)::after { content: ""; }
pre.hl-29 > code.sourceCode > span:nth-of-type(29)::after { content: ""; }
pre.hl-30 > code.sourceCode > span:nth-of-type(30)::after { content: ""; }
pre.hl-31 > code.sourceCode > span:nth-of-type(31)::after { content: ""; }
pre.hl-32 > code.sourceCode > span:nth-of-type(32)::after { content: ""; }
pre.hl-33 > code.sourceCode > span:nth-of-type(33)::after { content: ""; }
pre.hl-34 > code.sourceCode > span:nth-of-type(34)::after { content: ""; }
pre.hl-35 > code.sourceCode > span:nth-of-type(35)::after { content: ""; }
pre.hl-36 > code.sourceCode > span:nth-of-type(36)::after { content: ""; }
pre.hl-37 > code.sourceCode > span:nth-of-type(37)::after { content: ""; }
pre.hl-38 > code.sourceCode > span:nth-of-type(38)::after { content: ""; }
pre.hl-39 > code.sourceCode > span:nth-of-type(39)::after { content: ""; }
pre.hl-40 > code.sourceCode > span:nth-of-type(40)::after { content: ""; }




figure {
margin-bottom: var(--captioned-figure-gap);
}
figure + p {
margin-top: var(--captioned-figure-gap);
}
figure > img, figure > pre, figure > div.sourceCode {
margin-bottom: var(--figcaption-gap);
}
img {
width: 100%;
display: block;
}
.wide img {

transform: translateZ(0px);
}
figcaption {
font-size: var(--figcaption-font-size);
line-height: var(--figcaption-line-height);
font-style: italic;
text-align: center;
color: var(--color-text-secondary);
}
.left-align-caption figcaption {
text-align: left;
}
figcaption code {
font-size: var(--figcaption-code-font-size);
}


table {
-webkit-font-feature-settings: "tnum" 1;
font-feature-settings: "tnum" 1;
font-size: var(--table-font-size);
line-height: var(--table-line-height);
border-spacing: 0;
border-collapse: collapse;
border: 1px solid var(--color-border-heavy);
width: 100%;

background-color: var(--background-color);
}
@media print {
table {
background-color: initial;
}
}
table code {
font-size: var(--table-code-font-size);
}
table pre code {
font-size: inherit;
}
.wide table {

transform: translateZ(0px);
}
table td, table th {
border: 1px solid var(--color-border-heavy);
padding: 5px 8px;
min-width: 100px;
}
table th {
background-color: var(--color-table-heading);
}
table > caption {
caption-side: bottom;
margin-top: var(--figcaption-gap);
margin-bottom: calc(var(--captioned-figure-gap) - var(--line-height));
font-size: var(--figcaption-font-size);
line-height: var(--figcaption-line-height);
font-style: italic;
text-align: center;
color: var(--color-text-secondary);
}
.left-align-caption table > caption {
text-align: left;
}
table > caption code {
font-size: var(--figcaption-code-font-size);
}

.note table {
font-size: inherit;
line-height: inherit;
}
.note table, .note td {
border: none;
}
.note.red td { background: var(--highlight-red); }
.note.yellow td { background: var(--highlight-yellow); }
.note.green td { background: var(--highlight-green); }
.note.blue td { background: var(--highlight-blue); }
.note.purple td { background: var(--highlight-purple); }


.date.before-toc {
padding-bottom: var(--line-height);
}
nav#TOC {
margin-bottom: var(--line-height);
border-left: 1px solid var(--color-text-secondary);
padding-left: 1.5rem;
}
nav#TOC input {
display: none;
}
nav#TOC label {
color: var(--color-link);
cursor: pointer;
}
nav#TOC > ul {
display: none;
}
nav#TOC > input:checked + ul {
display: block;
}
@media print {
nav#TOC > input + ul {
display: block;
}
}

@media screen and (min-width: calc(745px + 2 * (52px + 206px + 52px) - 1px)) {
header {
margin-bottom: var(--line-height);
}
.date.before-toc {
padding-bottom: initial;
}
nav#TOC {

margin-bottom: initial;
border-left: initial;
padding-left: initial;
position: sticky;
margin-top: calc(var(--nav-toc-baseline-offset));
float: left;
top: var(--line-height);
font-size: var(--nav-toc-font-size);
color: var(--color-text-secondary);
margin-left: var(--line-height);
max-width: calc((100vw - var(--main-width)) / 2 - 2 * var(--line-height));
max-height: calc(100vh - 2 * var(--line-height));
overflow-y: scroll;
}
nav#TOC label {
display: none;
}
nav#TOC ul {
display: block;
list-style: none;
margin-left: var(--nav-toc-indent);
}
nav#TOC > ul {
margin-left: 0;
}
nav#TOC code {
font-size: var(--nav-toc-code-font-size);
}
nav#TOC code,
nav#TOC a,
nav#TOD a:link,
nav#TOD a:visited {
color: var(--color-text-secondary);
}
nav#TOC a:hover,
nav#TOC a:hover code {
text-decoration: none;
color: var(--color-link);
}
}


.sidenote,
.marginnote {
float: right;
clear: right;
position: relative;
--side-note-max-width: 300px;
width: var(--computed-width);
max-width: var(--side-note-max-width);
margin-right: calc(-1 * min(var(--computed-width), var(--side-note-max-width)) - var(--margin-left));
}


@media screen and (min-width: calc(745px + 2 * (52px + 206px + 52px))) {
header,
nav#TOC,
main,
footer {
max-width: var(--main-width);
}
header,
main,
footer {
margin-left: auto;
margin-right: auto;
}
.sidenote,
.marginnote {
--margin-left: calc(2 * var(--line-height));
--margin-right: var(--margin-left);
--computed-width: calc((100vw - 100%) / 2 - var(--margin-right) - var(--margin-left));
}
.wide {
width: 100%;
overflow-x: scroll;
}
.wide.extra-wide {
margin-left: calc((1 - var(--extra-wide-scale-factor)) / 2 * 100%);
width: calc(var(--extra-wide-scale-factor) * 100%);
}
.wide.full-width {
margin-left: calc(var(--line-height) - ((100vw - var(--main-width)) / 2));
width: calc(100vw - 2 * var(--line-height));
}
.wide.extra-wide figcaption,
.wide.extra-wide table > caption {
margin-left: calc(((var(--extra-wide-scale-factor) - 1) / 2) * var(--main-width));
max-width: var(--main-width);
margin-right: calc(100% - var(--main-width) - (((var(--extra-wide-scale-factor) - 1) / 2) * var(--main-width)));
}
.wide.full-width figcaption,
.wide.full-width table > caption {
margin-left: calc((100vw - var(--main-width)) / 2 - var(--line-height));
max-width: var(--main-width);
margin-right: calc(100% - var(--main-width) - ((100vw - var(--main-width)) / 2 - var(--line-height)));
}
}

@media screen and (min-width: calc(52px + 745px + 52px + 206px + 52px)) and (max-width: calc(745px + 2 * (52px + 206px + 52px) - 1px)) {
header,
nav#TOC,
main,
footer {
margin-left: calc(2 * var(--line-height));
max-width: var(--main-width);
margin-right: auto;
}
.sidenote,
.marginnote {
--margin-left: calc(2 * var(--line-height));
--margin-right: var(--margin-left);
--computed-width: calc(100vw - var(--main-width) - calc(2 * var(--line-height)) - var(--margin-right) - var(--margin-left));
}
.wide {
width: 100%;
overflow-x: scroll;
overflow-y: hidden;
}
.wide.extra-wide {
margin-left: calc(-1 * var(--line-height));
width: calc(100vw - 2 * var(--line-height));
max-width: calc(var(--extra-wide-scale-factor) * var(--main-width));
}
.wide.full-width {
margin-left: calc(-1 * var(--line-height));
width: calc(100vw - 2 * var(--line-height));
max-width: calc(100vw - 2 * var(--line-height));
}
.wide.extra-wide .katex-display,
.wide.full-width .katex-display {
padding-left: var(--line-height);
padding-right: var(--line-height);
}
.wide.extra-wide .katex-display,
.wide.extra-wide .katex-display > .katex,
.wide.full-width .katex-display,
.wide.full-width .katex-display > .katex {
text-align: left;
}
.wide.extra-wide figcaption,
.wide.extra-wide table > caption,
.wide.full-width figcaption,
.wide.full-width table > caption {
text-align: left;
margin-left: var(--line-height);
max-width: var(--main-width);
}
}

@media screen and (min-width: calc(26px + 550px + 26px + 169px + 26px)) and (max-width: calc(52px + 745px + 52px + 206px + 52px - 1px)) {
header,
nav#TOC,
main,
footer {
margin-left: var(--line-height);
max-width: var(--main-width-narrow);
margin-right: auto;
}
.sidenote,
.marginnote {
--margin-left: var(--line-height);
--margin-right: var(--line-height);
--computed-width: calc(100vw - var(--main-width-narrow) - var(--line-height) - var(--margin-right) - var(--margin-left));
}
.wide {
width: var(--main-width);
overflow-x: scroll;
overflow-y: hidden;
}
.wide .katex-display,
.wide .katex-display > .katex {
text-align: left;
}
.wide figcaption,
.wide table > caption {
text-align: left;
max-width: var(--main-width-narrow);
}
.wide.extra-wide,
.wide.full-width {
width: calc(100vw - 2 * var(--line-height));
}
}



@media screen and (max-width: calc(26px + 550px + 26px + 169px + 26px - 1px)) {
header,
nav#TOC,
main,
footer {
margin-left: var(--line-height);
margin-right: var(--line-height);
}
.sidenote,
.marginnote {
display: none;
}
.margin-toggle:checked + .sidenote,
.margin-toggle:checked + .marginnote {
display: block;
float: left;
clear: both;
width: 100%;
max-width: 100%;
}
.wide {
width: 100%;
overflow-x: scroll;
overflow-y: hidden;
}
.wide .katex-display,
.wide .katex-display > .katex {
text-align: left;
}
.wide figcaption,
.wide table > caption {
text-align: left;
max-width: calc(100vw - 2 * var(--line-height));
}
}


@page {
size: letter;
margin: 0.5in;
}
@media print {
body {
padding-top: 0;
}
header,
nav#TOC,
main,
footer {
width: 5.25in;
margin-right: auto;
}
.sidenote,
.marginnote {
width: 2in;
margin-right: -2.25in;
}
.wide {
width: 7.5in;
overflow-x: hidden;
overflow-y: hidden;
}
.wide .katex-display,
.wide .katex-display > .katex {
text-align: left;
}
.wide figcaption,
.wide table > caption {
text-align: left;
width: 5.25in;
}
.wide pre > code {
white-space: pre-wrap;
}
}
h1, h2, h3 {
page-break-after: avoid;
}
table, figure, pre {
page-break-inside: avoid;
}



</style>
  <style type="text/css">pre, pre.numberSource {
background: #fdf6e3;

--color-code-highlight-bg: #eee8d5;
}
pre code { color: #657b83; }
pre.numberSource > code.sourceCode > span > a:first-child::before {
color: #93a1a1;
}
code span.kw { color: #859900; font-weight: normal; font-style: normal; } 
code span.dt { color: #b58900; font-weight: normal; font-style: normal; } 
code span.dv { color: #2aa198; font-weight: normal; font-style: normal; } 
code span.bn { color: #2aa198; font-weight: normal; font-style: normal; } 
code span.fl { color: #2aa198; font-weight: normal; font-style: normal; } 
code span.ch { color: #2aa198; font-weight: normal; font-style: normal; } 
code span.st { color: #2aa198; font-weight: normal; font-style: normal; } 
code span.co { color: #93a1a1; font-weight: normal; font-style: italic; } 
code span.ot { color: #268bd2; font-weight: normal; font-style: normal; } 
code span.al { color: #dc322f; font-weight: normal; font-style: normal; } 
code span.fu { color: #268bd2; font-weight: normal; font-style: normal; } 
code span.er { color: #dc322f; font-weight: normal; font-style: normal; } 
code span.wa { color: #cb4b16; font-weight: normal; font-style: italic; } 
code span.cn { color: #2aa198; font-weight: normal; font-style: normal; } 
code span.sc { color: #dc322f; font-weight: normal; font-style: normal; } 
code span.vs { color: #2aa198; font-weight: normal; font-style: normal; } 
code span.ss { color: #dc322f; font-weight: normal; font-style: normal; } 
code span.im { color: #657b83; font-weight: normal; font-style: normal; } 
code span.va { color: #268bd2; font-weight: normal; font-style: normal; } 
code span.cf { color: #859900; font-weight: normal; font-style: normal; } 
code span.op { color: #859900; font-weight: normal; font-style: normal; } 
code span.bu { color: #657b83; font-weight: normal; font-style: normal; } 
code span.ex { color: #657b83; font-weight: normal; font-style: normal; } 
code span.pp { color: #cb4b16; font-weight: normal; font-style: normal; } 
code span.at { color: #657b83; font-weight: normal; font-style: normal; } 
code span.do { color: #93a1a1; font-weight: normal; font-style: italic; } 
code span.an { color: #93a1a1; font-weight: normal; font-style: italic; } 
code span.cv { color: #93a1a1; font-weight: normal; font-style: italic; } 
code span.in { color: #93a1a1; font-weight: normal; font-style: italic; } 
a.sourceLine::before { text-decoration: none; }
</style>
</head>
<body>

<header>
<h1 class="title">Nix (builtins) &amp; Nixpkgs (lib) Functions</h1>
<blockquote class="metadata">
</blockquote>
</header>

<nav id="TOC" role="doc-toc">
    <strong>Contents</strong><label for="contents">⊕</label>
  <input type="checkbox" id="contents">
  <ul>
  <li><a href="#nix-builtin-functions">Nix Builtin Functions</a>
  <ul>
  <li><a href="#builtins.zipattrswith">builtins.zipAttrsWith</a></li>
  <li><a href="#builtins.typeof">builtins.typeOf</a></li>
  <li><a href="#builtins.tryeval">builtins.tryEval</a></li>
  <li><a href="#builtins.trace">builtins.trace</a></li>
  <li><a href="#builtins.toxml">builtins.toXML</a></li>
  <li><a href="#builtins.tostring">builtins.toString</a></li>
  <li><a href="#builtins.topath">builtins.toPath</a></li>
  <li><a href="#builtins.tojson">builtins.toJSON</a></li>
  <li><a href="#builtins.tofile">builtins.toFile</a></li>
  <li><a href="#builtins.throw">builtins.throw</a></li>
  <li><a href="#builtins.tail">builtins.tail</a></li>
  <li><a href="#builtins.substring">builtins.substring</a></li>
  <li><a href="#builtins.sub">builtins.sub</a></li>
  <li><a href="#builtins.stringlength">builtins.stringLength</a></li>
  <li><a href="#builtins.storepath">builtins.storePath</a></li>
  <li><a href="#builtins.splitversion">builtins.splitVersion</a></li>
  <li><a href="#builtins.split">builtins.split</a></li>
  <li><a href="#builtins.sort">builtins.sort</a></li>
  <li><a href="#builtins.seq">builtins.seq</a></li>
  <li><a href="#builtins.replacestrings">builtins.replaceStrings</a></li>
  <li><a href="#builtins.removeattrs">builtins.removeAttrs</a></li>
  <li><a href="#builtins.readfile">builtins.readFile</a></li>
  <li><a href="#builtins.readdir">builtins.readDir</a></li>
  <li><a href="#builtins.placeholder">builtins.placeholder</a></li>
  <li><a href="#builtins.pathexists">builtins.pathExists</a></li>
  <li><a href="#builtins.path">builtins.path</a></li>
  <li><a href="#builtins.partition">builtins.partition</a></li>
  <li><a href="#builtins.parsedrvname">builtins.parseDrvName</a></li>
  <li><a href="#builtins.mul">builtins.mul</a></li>
  <li><a href="#builtins.match">builtins.match</a></li>
  <li><a href="#builtins.mapattrs">builtins.mapAttrs</a></li>
  <li><a href="#builtins.map">builtins.map</a></li>
  <li><a href="#builtins.listtoattrs">builtins.listToAttrs</a></li>
  <li><a href="#builtins.lessthan">builtins.lessThan</a></li>
  <li><a href="#builtins.length">builtins.length</a></li>
  <li><a href="#builtins.isstring">builtins.isString</a></li>
  <li><a href="#builtins.ispath">builtins.isPath</a></li>
  <li><a href="#builtins.isnull">builtins.isNull</a></li>
  <li><a href="#builtins.islist">builtins.isList</a></li>
  <li><a href="#builtins.isint">builtins.isInt</a></li>
  <li><a href="#builtins.isfunction">builtins.isFunction</a></li>
  <li><a href="#builtins.isfloat">builtins.isFloat</a></li>
  <li><a href="#builtins.isbool">builtins.isBool</a></li>
  <li><a href="#builtins.isattrs">builtins.isAttrs</a></li>
  <li><a href="#builtins.intersectattrs">builtins.intersectAttrs</a></li>
  <li><a href="#builtins.import">builtins.import</a></li>
  <li><a href="#builtins.head">builtins.head</a></li>
  <li><a href="#builtins.hashstring">builtins.hashString</a></li>
  <li><a href="#builtins.hashfile">builtins.hashFile</a></li>
  <li><a href="#builtins.hasattr">builtins.hasAttr</a></li>
  <li><a href="#builtins.groupby">builtins.groupBy</a></li>
  <li><a href="#builtins.getflake">builtins.getFlake</a></li>
  <li><a href="#builtins.getenv">builtins.getEnv</a></li>
  <li><a href="#builtins.getattr">builtins.getAttr</a></li>
  <li><a href="#builtins.genericclosure">builtins.genericClosure</a></li>
  <li><a href="#builtins.genlist">builtins.genList</a></li>
  <li><a href="#builtins.functionargs">builtins.functionArgs</a></li>
  <li><a href="#builtins.fromjson">builtins.fromJSON</a></li>
  <li><a href="#builtins.foldl">builtins.foldl’</a></li>
  <li><a href="#builtins.floor">builtins.floor</a></li>
  <li><a href="#builtins.filtersource">builtins.filterSource</a></li>
  <li><a href="#builtins.filter">builtins.filter</a></li>
  <li><a href="#builtins.fetchurl">builtins.fetchurl</a></li>
  <li><a href="#builtins.fetchtarball">builtins.fetchTarball</a></li>
  <li><a href="#builtins.fetchgit">builtins.fetchGit</a></li>
  <li><a href="#builtins.fetchclosure">builtins.fetchClosure</a></li>
  <li><a href="#builtins.elemat">builtins.elemAt</a></li>
  <li><a href="#builtins.elem">builtins.elem</a></li>
  <li><a href="#builtins.div">builtins.div</a></li>
  <li><a href="#builtins.dirof">builtins.dirOf</a></li>
  <li><a href="#builtins.deepseq">builtins.deepSeq</a></li>
  <li><a href="#builtins.concatstringssep">builtins.concatStringsSep</a></li>
  <li><a href="#builtins.concatmap">builtins.concatMap</a></li>
  <li><a href="#builtins.concatlists">builtins.concatLists</a></li>
  <li><a href="#builtins.compareversions">builtins.compareVersions</a></li>
  <li><a href="#builtins.ceil">builtins.ceil</a></li>
  <li><a href="#builtins.catattrs">builtins.catAttrs</a></li>
  <li><a href="#builtins.bitxor">builtins.bitXor</a></li>
  <li><a href="#builtins.bitor">builtins.bitOr</a></li>
  <li><a href="#builtins.bitand">builtins.bitAnd</a></li>
  <li><a href="#builtins.basenameof">builtins.baseNameOf</a></li>
  <li><a href="#builtins.attrvalues">builtins.attrValues</a></li>
  <li><a href="#builtins.attrnames">builtins.attrNames</a></li>
  <li><a href="#builtins.any">builtins.any</a></li>
  <li><a href="#builtins.all">builtins.all</a></li>
  <li><a href="#builtins.add">builtins.add</a></li>
  <li><a href="#builtins.abort">builtins.abort</a></li>
  </ul></li>
  <li><a href="#nixpkgs-library-functions">Nixpkgs Library Functions</a>
  <ul>
  <li><a href="#assert-functions">Assert functions</a>
  <ul>
  <li><a href="#lib.asserts.assertmsg">lib.asserts.assertMsg</a></li>
  <li><a href="#lib.asserts.assertoneof">lib.asserts.assertOneOf</a></li>
  </ul></li>
  <li><a href="#attribute-set-functions">Attribute-Set Functions</a>
  <ul>
  <li><a href="#lib.attrset.attrbypath">lib.attrset.attrByPath</a></li>
  <li><a href="#lib.attrsets.hasattrbypath">lib.attrsets.hasAttrByPath</a></li>
  <li><a href="#lib.attrsets.setattrbypath">lib.attrsets.setAttrByPath</a></li>
  <li><a href="#lib.attrsets.getattrfrompath">lib.attrsets.getAttrFromPath</a></li>
  <li><a href="#lib.attrsets.attrvals">lib.attrsets.attrVals</a></li>
  <li><a href="#lib.attrsets.attrvalues">lib.attrsets.attrValues</a></li>
  <li><a href="#lib.attrsets.catattrs">lib.attrsets.catAttrs</a></li>
  <li><a href="#lib.attrsets.filterattrs">lib.attrsets.filterAttrs</a></li>
  <li><a href="#lib.attrsets.filterattrsrecursive">lib.attrsets.filterAttrsRecursive</a></li>
  <li><a href="#lib.attrsets.foldattrs">lib.attrsets.foldAttrs</a></li>
  <li><a href="#lib.attrsets.collect">lib.attrsets.collect</a></li>
  <li><a href="#lib.attrsets.namevaluepair">lib.attrsets.nameValuePair</a></li>
  <li><a href="#lib.attrsets.mapattrs">lib.attrsets.mapAttrs</a></li>
  <li><a href="#lib.attrsets.mapattrs-1">lib.attrsets.mapAttrs’</a></li>
  <li><a href="#lib.attrsets.mapattrstolist">lib.attrsets.mapAttrsToList</a></li>
  <li><a href="#lib.attrsets.mapattrsrecursive">lib.attrsets.mapAttrsRecursive</a></li>
  <li><a href="#lib.attrsets.mapattrsrecursivecond">lib.attrsets.mapAttrsRecursiveCond</a></li>
  <li><a href="#lib.attrsets.genattrs">lib.attrsets.genAttrs</a></li>
  <li><a href="#lib.attrsets.isderivation">lib.attrsets.isDerivation</a></li>
  <li><a href="#lib.attrsets.toderivation">lib.attrsets.toDerivation</a></li>
  <li><a href="#lib.attrsets.optionalattrs">lib.attrsets.optionalAttrs</a></li>
  <li><a href="#lib.attrsets.zipattrswithnames">lib.attrsets.zipAttrsWithNames</a></li>
  <li><a href="#lib.attrsets.zipattrswith">lib.attrsets.zipAttrsWith</a></li>
  <li><a href="#lib.attrsets.zipattrs">lib.attrsets.zipAttrs</a></li>
  <li><a href="#lib.attrsets.recursiveupdateuntil">lib.attrsets.recursiveUpdateUntil</a></li>
  <li><a href="#lib.attrsets.recursiveupdate">lib.attrsets.recursiveUpdate</a></li>
  <li><a href="#lib.attrsets.recurseintoattrs">lib.attrsets.recurseIntoAttrs</a></li>
  <li><a href="#lib.attrsets.cartesianproductofsets">lib.attrsets.cartesianProductOfSets</a></li>
  </ul></li>
  <li><a href="#customisation-functions">Customisation functions</a>
  <ul>
  <li><a href="#lib.customisation.overridederivation">lib.customisation.overrideDerivation</a></li>
  <li><a href="#lib.customisation.makeoverridable">lib.customisation.makeOverridable</a></li>
  <li><a href="#lib.customisation.callpackagewith">lib.customisation.callPackageWith</a></li>
  <li><a href="#lib.customisation.callpackageswith">lib.customisation.callPackagesWith</a></li>
  <li><a href="#lib.customisation.extendderivation">lib.customisation.extendDerivation</a></li>
  <li><a href="#lib.customisation.hydrajob">lib.customisation.hydraJob</a></li>
  <li><a href="#lib.customisation.makescope">lib.customisation.makeScope</a></li>
  <li><a href="#lib.customisation.makescopewithsplicing">lib.customisation.makeScopeWithSplicing</a></li>
  </ul></li>
  <li><a href="#debugging-functions">Debugging functions</a>
  <ul>
  <li><a href="#lib.debug.traceif">lib.debug.traceIf</a></li>
  <li><a href="#lib.debug.tracevalfn">lib.debug.traceValFn</a></li>
  <li><a href="#lib.debug.traceval">lib.debug.traceVal</a></li>
  <li><a href="#lib.debug.traceseq">lib.debug.traceSeq</a></li>
  <li><a href="#lib.debug.traceseqn">lib.debug.traceSeqN</a></li>
  <li><a href="#lib.debug.tracevalseqfn">lib.debug.traceValSeqFn</a></li>
  <li><a href="#lib.debug.tracevalseq">lib.debug.traceValSeq</a></li>
  <li><a href="#lib.debug.tracevalseqnfn">lib.debug.traceValSeqNFn</a></li>
  <li><a href="#lib.debug.tracevalseqn">lib.debug.traceValSeqN</a></li>
  <li><a href="#lib.debug.tracefnseqn">lib.debug.traceFnSeqN</a></li>
  <li><a href="#lib.debug.runtests">lib.debug.runTests</a></li>
  <li><a href="#lib.debug.testalltrue">lib.debug.testAllTrue</a></li>
  </ul></li>
  <li><a href="#generator-functions">Generator functions</a>
  <ul>
  <li><a href="#lib.generators.mkvaluestringdefault">lib.generators.mkValueStringDefault</a></li>
  <li><a href="#lib.generators.mkkeyvaluedefault">lib.generators.mkKeyValueDefault</a></li>
  <li><a href="#lib.generators.tokeyvalue">lib.generators.toKeyValue</a></li>
  <li><a href="#lib.generators.toini">lib.generators.toINI</a></li>
  <li><a href="#lib.generators.toiniwithglobalsection">lib.generators.toINIWithGlobalSection</a></li>
  <li><a href="#lib.generators.togitini">lib.generators.toGitINI</a></li>
  <li><a href="#lib.generators.tojson">lib.generators.toJSON</a></li>
  <li><a href="#lib.generators.toyaml">lib.generators.toYAML</a></li>
  <li><a href="#lib.generators.topretty">lib.generators.toPretty</a></li>
  <li><a href="#lib.generators.todhall">lib.generators.toDhall</a></li>
  </ul></li>
  <li><a href="#list-manipulation-functions">List manipulation
  functions</a>
  <ul>
  <li><a href="#lib.lists.singleton">lib.lists.singleton</a></li>
  <li><a href="#lib.lists.foreach">lib.lists.forEach</a></li>
  <li><a href="#lib.lists.foldr">lib.lists.foldr</a></li>
  <li><a href="#lib.lists.fold">lib.lists.fold</a></li>
  <li><a href="#lib.lists.foldl">lib.lists.foldl</a></li>
  <li><a href="#lib.lists.foldl-1">lib.lists.foldl’</a></li>
  <li><a href="#lib.lists.imap0">lib.lists.imap0</a></li>
  <li><a href="#lib.lists.imap1">lib.lists.imap1</a></li>
  <li><a href="#lib.lists.concatmap">lib.lists.concatMap</a></li>
  <li><a href="#lib.lists.flatten">lib.lists.flatten</a></li>
  <li><a href="#lib.lists.remove">lib.lists.remove</a></li>
  <li><a href="#lib.lists.findsingle">lib.lists.findSingle</a></li>
  <li><a href="#lib.lists.findfirst">lib.lists.findFirst</a></li>
  <li><a href="#lib.lists.any">lib.lists.any</a></li>
  <li><a href="#lib.lists.all">lib.lists.all</a></li>
  <li><a href="#lib.lists.count">lib.lists.count</a></li>
  <li><a href="#lib.lists.optional">lib.lists.optional</a></li>
  <li><a href="#lib.lists.optionals">lib.lists.optionals</a></li>
  <li><a href="#lib.lists.tolist">lib.lists.toList</a></li>
  <li><a href="#lib.lists.range">lib.lists.range</a></li>
  <li><a href="#lib.lists.partition">lib.lists.partition</a></li>
  <li><a href="#lib.lists.groupby">lib.lists.groupBy’</a></li>
  <li><a href="#lib.lists.ziplistswith">lib.lists.zipListsWith</a></li>
  <li><a href="#lib.lists.ziplists">lib.lists.zipLists</a></li>
  <li><a href="#lib.lists.reverselist">lib.lists.reverseList</a></li>
  <li><a href="#lib.lists.listdfs">lib.lists.listDfs</a></li>
  <li><a href="#lib.lists.toposort">lib.lists.toposort</a></li>
  <li><a href="#lib.lists.sort">lib.lists.sort</a></li>
  <li><a href="#lib.lists.comparelists">lib.lists.compareLists</a></li>
  <li><a href="#lib.lists.naturalsort">lib.lists.naturalSort</a></li>
  <li><a href="#lib.lists.take">lib.lists.take</a></li>
  <li><a href="#lib.lists.drop">lib.lists.drop</a></li>
  <li><a href="#lib.lists.sublist">lib.lists.sublist</a></li>
  <li><a href="#lib.lists.last">lib.lists.last</a></li>
  <li><a href="#lib.lists.init">lib.lists.init</a></li>
  <li><a href="#lib.lists.crosslists">lib.lists.crossLists</a></li>
  <li><a href="#lib.lists.unique">lib.lists.unique</a></li>
  <li><a href="#lib.lists.intersectlists">lib.lists.intersectLists</a></li>
  <li><a href="#lib.lists.subtractlists">lib.lists.subtractLists</a></li>
  <li><a href="#lib.lists.mutuallyexclusive">lib.lists.mutuallyExclusive</a></li>
  </ul></li>
  <li><a href="#meta-functions">Meta functions</a>
  <ul>
  <li><a href="#lib.meta.addmetaattrs">lib.meta.addMetaAttrs</a></li>
  <li><a href="#lib.meta.dontdistribute">lib.meta.dontDistribute</a></li>
  <li><a href="#lib.meta.setname">lib.meta.setName</a></li>
  <li><a href="#lib.meta.updatename">lib.meta.updateName</a></li>
  <li><a href="#lib.meta.appendtoname">lib.meta.appendToName</a></li>
  <li><a href="#lib.meta.mapderivationattrset">lib.meta.mapDerivationAttrset</a></li>
  <li><a href="#lib.meta.setprio">lib.meta.setPrio</a></li>
  <li><a href="#lib.meta.lowprio">lib.meta.lowPrio</a></li>
  <li><a href="#lib.meta.lowprioset">lib.meta.lowPrioSet</a></li>
  <li><a href="#lib.meta.hiprio">lib.meta.hiPrio</a></li>
  <li><a href="#lib.meta.hiprioset">lib.meta.hiPrioSet</a></li>
  <li><a href="#lib.meta.platformmatch">lib.meta.platformMatch</a></li>
  <li><a href="#lib.meta.availableon">lib.meta.availableOn</a></li>
  <li><a href="#lib.meta.getlicensefromspdxid">lib.meta.getLicenseFromSpdxId</a></li>
  <li><a href="#lib.meta.getexe">lib.meta.getExe</a></li>
  </ul></li>
  <li><a href="#modules-functions">Modules functions</a>
  <ul>
  <li><a href="#lib.modules.evalmodules">lib.modules.evalModules</a></li>
  <li><a href="#lib.modules.collectstructuredmodules">lib.modules.collectStructuredModules</a></li>
  <li><a href="#lib.modules.setdefaultmodulelocation">lib.modules.setDefaultModuleLocation</a></li>
  <li><a href="#lib.modules.unifymodulesyntax">lib.modules.unifyModuleSyntax</a></li>
  <li><a href="#lib.modules.mergemodules">lib.modules.mergeModules</a></li>
  <li><a href="#lib.modules.byname">lib.modules.byName</a></li>
  <li><a href="#lib.modules.mergeoptiondecls">lib.modules.mergeOptionDecls</a></li>
  <li><a href="#lib.modules.evaloptionvalue">lib.modules.evalOptionValue</a></li>
  <li><a href="#lib.modules.pushdownproperties">lib.modules.pushDownProperties</a></li>
  <li><a href="#lib.modules.dischargeproperties">lib.modules.dischargeProperties</a></li>
  <li><a href="#lib.modules.filteroverrides">lib.modules.filterOverrides</a></li>
  <li><a href="#lib.modules.sortproperties">lib.modules.sortProperties</a></li>
  <li><a href="#lib.modules.mkif">lib.modules.mkIf</a></li>
  <li><a href="#lib.modules.fixmergemodules">lib.modules.fixMergeModules</a></li>
  <li><a href="#lib.modules.mkremovedoptionmodule">lib.modules.mkRemovedOptionModule</a></li>
  <li><a href="#lib.modules.mkrenamedoptionmodule">lib.modules.mkRenamedOptionModule</a></li>
  <li><a href="#lib.modules.mkmergedoptionmodule">lib.modules.mkMergedOptionModule</a></li>
  <li><a href="#lib.modules.mkchangedoptionmodule">lib.modules.mkChangedOptionModule</a></li>
  <li><a href="#lib.modules.mkaliasoptionmodule">lib.modules.mkAliasOptionModule</a></li>
  <li><a href="#lib.modules.mkderivedconfig">lib.modules.mkDerivedConfig</a></li>
  <li><a href="#lib.modules.importjson">lib.modules.importJSON</a></li>
  <li><a href="#lib.modules.importtoml">lib.modules.importTOML</a></li>
  </ul></li>
  <li><a href="#nixos-nixpkgs-option-handling">NixOS / nixpkgs option
  handling</a>
  <ul>
  <li><a href="#lib.options.isoption">lib.options.isOption</a></li>
  <li><a href="#lib.options.mkoption">lib.options.mkOption</a></li>
  <li><a href="#lib.options.mkenableoption">lib.options.mkEnableOption</a></li>
  <li><a href="#lib.options.mkpackageoption">lib.options.mkPackageOption</a></li>
  <li><a href="#lib.options.mksinkundeclaredoptions">lib.options.mkSinkUndeclaredOptions</a></li>
  <li><a href="#lib.options.mergeequaloption">lib.options.mergeEqualOption</a></li>
  <li><a href="#lib.options.getvalues">lib.options.getValues</a></li>
  <li><a href="#lib.options.getfiles">lib.options.getFiles</a></li>
  <li><a href="#lib.options.scruboptionvalue">lib.options.scrubOptionValue</a></li>
  <li><a href="#lib.options.literalexpression">lib.options.literalExpression</a></li>
  <li><a href="#lib.options.literaldocbook">lib.options.literalDocBook</a></li>
  <li><a href="#lib.options.mddoc">lib.options.mdDoc</a></li>
  <li><a href="#lib.options.literalmd">lib.options.literalMD</a></li>
  <li><a href="#lib.options.showoption">lib.options.showOption</a></li>
  </ul></li>
  <li><a href="#source-filtering-functions">Source filtering
  functions</a>
  <ul>
  <li><a href="#lib.sources.pathtype">lib.sources.pathType</a></li>
  <li><a href="#lib.sources.pathisdirectory">lib.sources.pathIsDirectory</a></li>
  <li><a href="#lib.sources.pathisregularfile">lib.sources.pathIsRegularFile</a></li>
  <li><a href="#lib.sources.cleansourcefilter">lib.sources.cleanSourceFilter</a></li>
  <li><a href="#lib.sources.cleansource">lib.sources.cleanSource</a></li>
  <li><a href="#lib.sources.cleansourcewith">lib.sources.cleanSourceWith</a></li>
  <li><a href="#lib.sources.trace">lib.sources.trace</a></li>
  <li><a href="#lib.sources.sourcebyregex">lib.sources.sourceByRegex</a></li>
  <li><a href="#lib.sources.sourcefilesbysuffices">lib.sources.sourceFilesBySuffices</a></li>
  <li><a href="#lib.sources.commitidfromgitrepo">lib.sources.commitIdFromGitRepo</a></li>
  </ul></li>
  <li><a href="#string-manipulation-functions">String manipulation
  functions</a>
  <ul>
  <li><a href="#lib.strings.concatstrings">lib.strings.concatStrings</a></li>
  <li><a href="#lib.strings.concatmapstrings">lib.strings.concatMapStrings</a></li>
  <li><a href="#lib.strings.concatimapstrings">lib.strings.concatImapStrings</a></li>
  <li><a href="#lib.strings.intersperse">lib.strings.intersperse</a></li>
  <li><a href="#lib.strings.concatstringssep">lib.strings.concatStringsSep</a></li>
  <li><a href="#lib.strings.concatmapstringssep">lib.strings.concatMapStringsSep</a></li>
  <li><a href="#lib.strings.concatimapstringssep">lib.strings.concatImapStringsSep</a></li>
  <li><a href="#lib.strings.makesearchpath">lib.strings.makeSearchPath</a></li>
  <li><a href="#lib.strings.makesearchpathoutput">lib.strings.makeSearchPathOutput</a></li>
  <li><a href="#lib.strings.makelibrarypath">lib.strings.makeLibraryPath</a></li>
  <li><a href="#lib.strings.makebinpath">lib.strings.makeBinPath</a></li>
  <li><a href="#lib.strings.optionalstring">lib.strings.optionalString</a></li>
  <li><a href="#lib.strings.hasprefix">lib.strings.hasPrefix</a></li>
  <li><a href="#lib.strings.hassuffix">lib.strings.hasSuffix</a></li>
  <li><a href="#lib.strings.hasinfix">lib.strings.hasInfix</a></li>
  <li><a href="#lib.strings.stringtocharacters">lib.strings.stringToCharacters</a></li>
  <li><a href="#lib.strings.stringaschars">lib.strings.stringAsChars</a></li>
  <li><a href="#lib.strings.escape">lib.strings.escape</a></li>
  <li><a href="#lib.strings.escapeshellarg">lib.strings.escapeShellArg</a></li>
  <li><a href="#lib.strings.escapeshellargs">lib.strings.escapeShellArgs</a></li>
  <li><a href="#lib.strings.isvalidposixname">lib.strings.isValidPosixName</a></li>
  <li><a href="#lib.strings.toshellvar">lib.strings.toShellVar</a></li>
  <li><a href="#lib.strings.toshellvars">lib.strings.toShellVars</a></li>
  <li><a href="#lib.strings.escapenixstring">lib.strings.escapeNixString</a></li>
  <li><a href="#lib.strings.escaperegex">lib.strings.escapeRegex</a></li>
  <li><a href="#lib.strings.escapenixidentifier">lib.strings.escapeNixIdentifier</a></li>
  <li><a href="#lib.strings.escapexml">lib.strings.escapeXML</a></li>
  <li><a href="#lib.strings.tolower">lib.strings.toLower</a></li>
  <li><a href="#lib.strings.toupper">lib.strings.toUpper</a></li>
  <li><a href="#lib.strings.addcontextfrom">lib.strings.addContextFrom</a></li>
  <li><a href="#lib.strings.splitstring">lib.strings.splitString</a></li>
  <li><a href="#lib.strings.removeprefix">lib.strings.removePrefix</a></li>
  <li><a href="#lib.strings.removesuffix">lib.strings.removeSuffix</a></li>
  <li><a href="#lib.strings.versionolder">lib.strings.versionOlder</a></li>
  <li><a href="#lib.strings.versionatleast">lib.strings.versionAtLeast</a></li>
  <li><a href="#lib.strings.getname">lib.strings.getName</a></li>
  <li><a href="#lib.strings.getversion">lib.strings.getVersion</a></li>
  <li><a href="#lib.strings.namefromurl">lib.strings.nameFromURL</a></li>
  <li><a href="#lib.strings.enablefeature">lib.strings.enableFeature</a></li>
  <li><a href="#lib.strings.enablefeatureas">lib.strings.enableFeatureAs</a></li>
  <li><a href="#lib.strings.withfeature">lib.strings.withFeature</a></li>
  <li><a href="#lib.strings.withfeatureas">lib.strings.withFeatureAs</a></li>
  <li><a href="#lib.strings.fixedwidthstring">lib.strings.fixedWidthString</a></li>
  <li><a href="#lib.strings.fixedwidthnumber">lib.strings.fixedWidthNumber</a></li>
  <li><a href="#lib.strings.floattostring">lib.strings.floatToString</a></li>
  <li><a href="#lib.strings.iscoercibletostring">lib.strings.isCoercibleToString</a></li>
  <li><a href="#lib.strings.isstorepath">lib.strings.isStorePath</a></li>
  <li><a href="#lib.strings.toint">lib.strings.toInt</a></li>
  <li><a href="#lib.strings.readpathsfromfile">lib.strings.readPathsFromFile</a></li>
  <li><a href="#lib.strings.filecontents">lib.strings.fileContents</a></li>
  <li><a href="#lib.strings.sanitizederivationname">lib.strings.sanitizeDerivationName</a></li>
  <li><a href="#lib.strings.levenshtein">lib.strings.levenshtein</a></li>
  <li><a href="#lib.strings.commonprefixlength">lib.strings.commonPrefixLength</a></li>
  <li><a href="#lib.strings.commonsuffixlength">lib.strings.commonSuffixLength</a></li>
  <li><a href="#lib.strings.levenshteinatmost">lib.strings.levenshteinAtMost</a></li>
  </ul></li>
  <li><a href="#miscellaneous-functions">Miscellaneous functions</a>
  <ul>
  <li><a href="#lib.trivial.id">lib.trivial.id</a></li>
  <li><a href="#lib.trivial.const">lib.trivial.const</a></li>
  <li><a href="#lib.trivial.pipe">lib.trivial.pipe</a></li>
  <li><a href="#lib.trivial.concat">lib.trivial.concat</a></li>
  <li><a href="#lib.trivial.or">lib.trivial.or</a></li>
  <li><a href="#lib.trivial.and">lib.trivial.and</a></li>
  <li><a href="#lib.trivial.bitand">lib.trivial.bitAnd</a></li>
  <li><a href="#lib.trivial.bitor">lib.trivial.bitOr</a></li>
  <li><a href="#lib.trivial.bitxor">lib.trivial.bitXor</a></li>
  <li><a href="#lib.trivial.bitnot">lib.trivial.bitNot</a></li>
  <li><a href="#lib.trivial.booltostring">lib.trivial.boolToString</a></li>
  <li><a href="#lib.trivial.mergeattrs">lib.trivial.mergeAttrs</a></li>
  <li><a href="#lib.trivial.flip">lib.trivial.flip</a></li>
  <li><a href="#lib.trivial.mapnullable">lib.trivial.mapNullable</a></li>
  <li><a href="#lib.trivial.version">lib.trivial.version</a></li>
  <li><a href="#lib.trivial.release">lib.trivial.release</a></li>
  <li><a href="#lib.trivial.oldestsupportedrelease">lib.trivial.oldestSupportedRelease</a></li>
  <li><a href="#lib.trivial.isinoldestrelease">lib.trivial.isInOldestRelease</a></li>
  <li><a href="#lib.trivial.codename">lib.trivial.codeName</a></li>
  <li><a href="#lib.trivial.versionsuffix">lib.trivial.versionSuffix</a></li>
  <li><a href="#lib.trivial.revisionwithdefault">lib.trivial.revisionWithDefault</a></li>
  <li><a href="#lib.trivial.innixshell">lib.trivial.inNixShell</a></li>
  <li><a href="#lib.trivial.inpureevalmode">lib.trivial.inPureEvalMode</a></li>
  <li><a href="#lib.trivial.min">lib.trivial.min</a></li>
  <li><a href="#lib.trivial.max">lib.trivial.max</a></li>
  <li><a href="#lib.trivial.mod">lib.trivial.mod</a></li>
  <li><a href="#lib.trivial.compare">lib.trivial.compare</a></li>
  <li><a href="#lib.trivial.splitbyandcompare">lib.trivial.splitByAndCompare</a></li>
  <li><a href="#lib.trivial.importjson">lib.trivial.importJSON</a></li>
  <li><a href="#lib.trivial.importtoml">lib.trivial.importTOML</a></li>
  <li><a href="#lib.trivial.warn">lib.trivial.warn</a></li>
  <li><a href="#lib.trivial.warnif">lib.trivial.warnIf</a></li>
  <li><a href="#lib.trivial.warnifnot">lib.trivial.warnIfNot</a></li>
  <li><a href="#lib.trivial.throwifnot">lib.trivial.throwIfNot</a></li>
  <li><a href="#lib.trivial.throwif">lib.trivial.throwIf</a></li>
  <li><a href="#lib.trivial.checklistofenum">lib.trivial.checkListOfEnum</a></li>
  <li><a href="#lib.trivial.setfunctionargs">lib.trivial.setFunctionArgs</a></li>
  <li><a href="#lib.trivial.functionargs">lib.trivial.functionArgs</a></li>
  <li><a href="#lib.trivial.isfunction">lib.trivial.isFunction</a></li>
  <li><a href="#lib.trivial.tofunction">lib.trivial.toFunction</a></li>
  <li><a href="#lib.trivial.tohexstring">lib.trivial.toHexString</a></li>
  <li><a href="#lib.trivial.tobasedigits">lib.trivial.toBaseDigits</a></li>
  </ul></li>
  <li><a href="#versions-functions">Versions functions</a>
  <ul>
  <li><a href="#lib.versions.splitversion">lib.versions.splitVersion</a></li>
  <li><a href="#lib.versions.major">lib.versions.major</a></li>
  <li><a href="#lib.versions.minor">lib.versions.minor</a></li>
  <li><a href="#lib.versions.patch">lib.versions.patch</a></li>
  <li><a href="#lib.versions.majorminor">lib.versions.majorMinor</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>

<main>
<h1 id="nix-builtin-functions">Nix Builtin Functions</h1>
<h2 id="builtins.zipattrswith">builtins.zipAttrsWith</h2>
<p><em>f, list</em></p>
<p>Transpose a list of attribute sets into an attribute set of lists,
then apply <code>mapAttrs</code>.</p>
<p><code>f</code> receives two arguments: the attribute name and a
non-empty list of all values encountered for that attribute name.</p>
<p>The result is an attribute set where the attribute names are the
union of the attribute names in each element of <code>list</code>. The
attribute values are the return values of <code>f</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.zipAttrsWith</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">(</span><span class="va">name</span><span class="op">:</span> <span class="va">values</span><span class="op">:</span> <span class="op">{</span> <span class="kw">inherit</span> name values<span class="op">;</span> <span class="op">})</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span> <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="st">&quot;x&quot;</span><span class="op">;</span> <span class="op">}</span> <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="st">&quot;y&quot;</span><span class="op">;</span> <span class="va">b</span> <span class="op">=</span> <span class="st">&quot;z&quot;</span><span class="op">;</span> <span class="op">}</span> <span class="op">]</span></span></code></pre></div>
<p>evaluates to</p>
<pre><code>{
  a = { name = &quot;a&quot;; values = [ &quot;x&quot; &quot;y&quot; ]; };
  b = { name = &quot;b&quot;; values = [ &quot;z&quot; ]; };
}</code></pre>
<h2 id="builtins.typeof">builtins.typeOf</h2>
<p><em>e</em></p>
<p>Return a string representing the type of the value <em>e</em>, namely
<code>&quot;int&quot;</code>, <code>&quot;bool&quot;</code>, <code>&quot;string&quot;</code>,
<code>&quot;path&quot;</code>, <code>&quot;null&quot;</code>, <code>&quot;set&quot;</code>,
<code>&quot;list&quot;</code>, <code>&quot;lambda&quot;</code> or <code>&quot;float&quot;</code>.</p>
<h2 id="builtins.tryeval">builtins.tryEval</h2>
<p><em>e</em></p>
<p>Try to shallowly evaluate <em>e</em>. Return a set containing the
attributes <code>success</code> (<code>true</code> if <em>e</em>
evaluated successfully, <code>false</code> if an error was thrown) and
<code>value</code>, equalling <em>e</em> if successful and
<code>false</code> otherwise. <code>tryEval</code> will only prevent
errors created by <code>throw</code> or <code>assert</code> from being
thrown. Errors <code>tryEval</code> will not catch are for example those
created by <code>abort</code> and type errors generated by builtins.
Also note that this doesn’t evaluate <em>e</em> deeply, so
<code>let e = { x = throw &quot;&quot;; }; in (builtins.tryEval e).success</code>
will be <code>true</code>. Using <code>builtins.deepSeq</code> one can
get the expected result:
<code>let e = { x = throw &quot;&quot;; }; in (builtins.tryEval (builtins.deepSeq e e)).success</code>
will be <code>false</code>.</p>
<h2 id="builtins.trace">builtins.trace</h2>
<p><em>e1, e2</em></p>
<p>Evaluate <em>e1</em> and print its abstract syntax representation on
standard error. Then return <em>e2</em>. This function is useful for
debugging.</p>
<h2 id="builtins.toxml">builtins.toXML</h2>
<p><em>e</em></p>
<p>Return a string containing an XML representation of <em>e</em>. The
main application for <code>toXML</code> is to communicate information
with the builder in a more structured format than plain environment
variables.</p>
<p>Here is an example where this is the case:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="va">stdenv</span><span class="op">,</span> <span class="va">fetchurl</span><span class="op">,</span> <span class="va">libxslt</span><span class="op">,</span> <span class="va">jira</span><span class="op">,</span> <span class="va">uberwiki</span> <span class="op">}</span>:</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>stdenv.mkDerivation <span class="op">(</span><span class="kw">rec</span> <span class="op">{</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="va">name</span> <span class="op">=</span> <span class="st">&quot;web-server&quot;</span><span class="op">;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="va">buildInputs</span> <span class="op">=</span> <span class="op">[</span> libxslt <span class="op">];</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="va">builder</span> <span class="op">=</span> <span class="bu">builtins</span>.toFile <span class="st">&quot;builder.sh&quot;</span> <span class="st">&quot;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="st">    source $stdenv/setup</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="st">    mkdir $out</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="st">    echo &quot;</span>$servlets<span class="st">&quot; | xsltproc </span><span class="sc">${</span>stylesheet<span class="sc">}</span><span class="st"> - &gt; $out/server-conf.xml ①</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="st">  &quot;</span><span class="op">;</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="va">stylesheet</span> <span class="op">=</span> <span class="bu">builtins</span>.toFile <span class="st">&quot;stylesheet.xsl&quot;</span> ②</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>   <span class="st">&quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;xsl:stylesheet xmlns:xsl=&#39;http://www.w3.org/1999/XSL/Transform&#39; version=&#39;1.0&#39;&gt;</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="st">      &lt;xsl:template match=&#39;/&#39;&gt;</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="st">        &lt;Configure&gt;</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="st">          &lt;xsl:for-each select=&#39;/expr/list/attrs&#39;&gt;</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="st">            &lt;Call name=&#39;addWebApplication&#39;&gt;</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="st">              &lt;Arg&gt;&lt;xsl:value-of select=</span><span class="sc">\&quot;</span><span class="st">attr[@name = &#39;path&#39;]/string/@value</span><span class="sc">\&quot;</span><span class="st"> /&gt;&lt;/Arg&gt;</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="st">              &lt;Arg&gt;&lt;xsl:value-of select=</span><span class="sc">\&quot;</span><span class="st">attr[@name = &#39;war&#39;]/path/@value</span><span class="sc">\&quot;</span><span class="st"> /&gt;&lt;/Arg&gt;</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="st">            &lt;/Call&gt;</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="st">          &lt;/xsl:for-each&gt;</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="st">        &lt;/Configure&gt;</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="st">      &lt;/xsl:template&gt;</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;/xsl:stylesheet&gt;</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="st">  &quot;</span><span class="op">;</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>  <span class="va">servlets</span> <span class="op">=</span> <span class="bu">builtins</span>.toXML <span class="op">[</span> ③</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> <span class="va">path</span> <span class="op">=</span> <span class="st">&quot;/bugtracker&quot;</span><span class="op">;</span> <span class="va">war</span> <span class="op">=</span> jira <span class="op">+</span> <span class="st">&quot;/lib/atlassian-jira.war&quot;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> <span class="va">path</span> <span class="op">=</span> <span class="st">&quot;/wiki&quot;</span><span class="op">;</span> <span class="va">war</span> <span class="op">=</span> uberwiki <span class="op">+</span> <span class="st">&quot;/uberwiki.war&quot;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>  <span class="op">];</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a><span class="op">})</span></span></code></pre></div>
<p>The builder is supposed to generate the configuration file for a <a href="http://jetty.mortbay.org/">Jetty servlet container</a>. A servlet
container contains a number of servlets (<code>*.war</code> files) each
exported under a specific URI prefix. So the servlet configuration is a
list of sets containing the <code>path</code> and <code>war</code> of
the servlet (①). This kind of information is difficult to communicate
with the normal method of passing information through an environment
variable, which just concatenates everything together into a string
(which might just work in this case, but wouldn’t work if fields are
optional or contain lists themselves). Instead the Nix expression is
converted to an XML representation with <code>toXML</code>, which is
unambiguous and can easily be processed with the appropriate tools. For
instance, in the example an XSLT stylesheet (at point ②) is applied to
it (at point ①) to generate the XML configuration file for the Jetty
server. The XML representation produced at point ③ by <code>toXML</code>
is as follows:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">&lt;?xml</span><span class="ot"> version=</span><span class="st">&#39;1.0&#39;</span><span class="ot"> encoding=</span><span class="st">&#39;utf-8&#39;</span><span class="fu">?&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">expr</span>&gt;</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">list</span>&gt;</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">attrs</span>&gt;</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">attr</span><span class="ot"> name=</span><span class="st">&quot;path&quot;</span>&gt;</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">string</span><span class="ot"> value=</span><span class="st">&quot;/bugtracker&quot;</span> /&gt;</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>      &lt;/<span class="kw">attr</span>&gt;</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">attr</span><span class="ot"> name=</span><span class="st">&quot;war&quot;</span>&gt;</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">path</span><span class="ot"> value=</span><span class="st">&quot;/nix/store/d1jh9pasa7k2...-jira/lib/atlassian-jira.war&quot;</span> /&gt;</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>      &lt;/<span class="kw">attr</span>&gt;</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">attrs</span>&gt;</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">attrs</span>&gt;</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">attr</span><span class="ot"> name=</span><span class="st">&quot;path&quot;</span>&gt;</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">string</span><span class="ot"> value=</span><span class="st">&quot;/wiki&quot;</span> /&gt;</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>      &lt;/<span class="kw">attr</span>&gt;</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">attr</span><span class="ot"> name=</span><span class="st">&quot;war&quot;</span>&gt;</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">path</span><span class="ot"> value=</span><span class="st">&quot;/nix/store/y6423b1yi4sx...-uberwiki/uberwiki.war&quot;</span> /&gt;</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>      &lt;/<span class="kw">attr</span>&gt;</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">attrs</span>&gt;</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  &lt;/<span class="kw">list</span>&gt;</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">expr</span>&gt;</span></code></pre></div>
<p>Note that we used the <code>toFile</code> built-in to write the
builder and the stylesheet “inline” in the Nix expression. The path of
the stylesheet is spliced into the builder using the syntax
<code>xsltproc ${stylesheet}</code>.</p>
<h2 id="builtins.tostring">builtins.toString</h2>
<p><em>e</em></p>
<p>Convert the expression <em>e</em> to a string. <em>e</em> can be:</p>
<ul>
<li><p>A string (in which case the string is returned
unmodified).</p></li>
<li><p>A path (e.g., <code>toString /foo/bar</code> yields
<code>&quot;/foo/bar&quot;</code>.</p></li>
<li><p>A set containing <code>{ __toString = self: ...; }</code> or
<code>{ outPath = ...; }</code>.</p></li>
<li><p>An integer.</p></li>
<li><p>A list, in which case the string representations of its elements
are joined with spaces.</p></li>
<li><p>A Boolean (<code>false</code> yields <code>&quot;&quot;</code>,
<code>true</code> yields <code>&quot;1&quot;</code>).</p></li>
<li><p><code>null</code>, which yields the empty string.</p></li>
</ul>
<h2 id="builtins.topath">builtins.toPath</h2>
<p><em>s</em></p>
<p><strong>DEPRECATED.</strong> Use <code>/. + &quot;/path&quot;</code> to convert
a string into an absolute path. For relative paths, use
<code>./. + &quot;/path&quot;</code>.</p>
<h2 id="builtins.tojson">builtins.toJSON</h2>
<p><em>e</em></p>
<p>Return a string containing a JSON representation of <em>e</em>.
Strings, integers, floats, booleans, nulls and lists are mapped to their
JSON equivalents. Sets (except derivations) are represented as objects.
Derivations are translated to a JSON string containing the derivation’s
output path. Paths are copied to the store and represented as a JSON
string of the resulting store path.</p>
<h2 id="builtins.tofile">builtins.toFile</h2>
<p><em>name, s</em></p>
<p>Store the string <em>s</em> in a file in the Nix store and return its
path. The file has suffix <em>name</em>. This file can be used as an
input to derivations. One application is to write builders “inline”. For
instance, the following Nix expression combines the <a href="expression-syntax.md">Nix expression for GNU Hello</a> and its <a href="build-script.md">build script</a> into one file:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="va">stdenv</span><span class="op">,</span> <span class="va">fetchurl</span><span class="op">,</span> <span class="va">perl</span> <span class="op">}</span>:</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>stdenv.mkDerivation <span class="op">{</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="va">name</span> <span class="op">=</span> <span class="st">&quot;hello-2.1.1&quot;</span><span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="va">builder</span> <span class="op">=</span> <span class="bu">builtins</span>.toFile <span class="st">&quot;builder.sh&quot;</span> <span class="st">&quot;</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="st">    source $stdenv/setup</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="st">    PATH=$perl/bin:$PATH</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="st">    tar xvfz $src</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="st">    cd hello-*</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="st">    ./configure --prefix=$out</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="st">    make</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="st">    make install</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="st">  &quot;</span><span class="op">;</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  <span class="va">src</span> <span class="op">=</span> fetchurl <span class="op">{</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="va">url</span> <span class="op">=</span> <span class="st">&quot;http://ftp.nluug.nl/pub/gnu/hello/hello-2.1.1.tar.gz&quot;</span><span class="op">;</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    <span class="va">sha256</span> <span class="op">=</span> <span class="st">&quot;1md7jsfd8pa45z73bz1kszpp01yw6x5ljkjk2hx7wl800any6465&quot;</span><span class="op">;</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  <span class="op">};</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  <span class="kw">inherit</span> perl<span class="op">;</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>It is even possible for one file to refer to another, e.g.,</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>builder = <span class="kw">let</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">configFile</span> <span class="op">=</span> <span class="bu">builtins</span>.toFile <span class="st">&quot;foo.conf&quot;</span> <span class="st">&quot;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="st">    # This is some dummy configuration file.</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="st">    ...</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="st">  &quot;</span><span class="op">;</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="kw">in</span> <span class="bu">builtins</span>.toFile <span class="st">&quot;builder.sh&quot;</span> <span class="st">&quot;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="st">  source $stdenv/setup</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="st">  ...</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="st">  cp </span><span class="sc">${</span>configFile<span class="sc">}</span><span class="st"> $out/etc/foo.conf</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;</span>;</span></code></pre></div>
<p>Note that <code>${configFile}</code> is an <a href="language-values.md">antiquotation</a>, so the result of the
expression <code>configFile</code> (i.e., a path like
<code>/nix/store/m7p7jfny445k...-foo.conf</code>) will be spliced into
the resulting string.</p>
<p>It is however <em>not</em> allowed to have files mutually referring
to each other, like so:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">foo</span> <span class="op">=</span> <span class="bu">builtins</span>.toFile <span class="st">&quot;foo&quot;</span> <span class="st">&quot;...</span><span class="sc">${</span>bar<span class="sc">}</span><span class="st">...&quot;</span><span class="op">;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">bar</span> <span class="op">=</span> <span class="bu">builtins</span>.toFile <span class="st">&quot;bar&quot;</span> <span class="st">&quot;...</span><span class="sc">${</span>foo<span class="sc">}</span><span class="st">...&quot;</span><span class="op">;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="kw">in</span> foo</span></code></pre></div>
<p>This is not allowed because it would cause a cyclic dependency in the
computation of the cryptographic hashes for <code>foo</code> and
<code>bar</code>.</p>
<p>It is also not possible to reference the result of a derivation. If
you are using Nixpkgs, the <code>writeTextFile</code> function is able
to do that.</p>
<h2 id="builtins.throw">builtins.throw</h2>
<p><em>s</em></p>
<p>Throw an error message <em>s</em>. This usually aborts Nix expression
evaluation, but in <code>nix-env -qa</code> and other commands that try
to evaluate a set of derivations to get information about those
derivations, a derivation that throws an error is silently skipped
(which is not the case for <code>abort</code>).</p>
<h2 id="builtins.tail">builtins.tail</h2>
<p><em>list</em></p>
<p>Return the second to last elements of a list; abort evaluation if the
argument isn’t a list or is an empty list.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>This function should generally be avoided since it’s inefficient:
unlike Haskell’s <code>tail</code>, it takes O(n) time, so recursing
over a list by repeatedly calling <code>tail</code> takes O(n^2)
time.</p>
</blockquote>
<h2 id="builtins.substring">builtins.substring</h2>
<p><em>start, len, s</em></p>
<p>Return the substring of <em>s</em> from character position
<em>start</em> (zero-based) up to but not including <em>start +
len</em>. If <em>start</em> is greater than the length of the string, an
empty string is returned, and if <em>start + len</em> lies beyond the
end of the string, only the substring up to the end of the string is
returned. <em>start</em> must be non-negative. For example,</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.substring <span class="dv">0</span> <span class="dv">3</span> <span class="st">&quot;nixos&quot;</span></span></code></pre></div>
<p>evaluates to <code>&quot;nix&quot;</code>.</p>
<h2 id="builtins.sub">builtins.sub</h2>
<p><em>e1, e2</em></p>
<p>Return the difference between the numbers <em>e1</em> and
<em>e2</em>.</p>
<h2 id="builtins.stringlength">builtins.stringLength</h2>
<p><em>e</em></p>
<p>Return the length of the string <em>e</em>. If <em>e</em> is not a
string, evaluation is aborted.</p>
<h2 id="builtins.storepath">builtins.storePath</h2>
<p><em>path</em></p>
<p>This function allows you to define a dependency on an already
existing store path. For example, the derivation attribute
<code>src = builtins.storePath /nix/store/f1d18v1y…-source</code> causes
the derivation to depend on the specified path, which must exist or be
substitutable. Note that this differs from a plain path
(e.g. <code>src = /nix/store/f1d18v1y…-source</code>) in that the latter
causes the path to be <em>copied</em> again to the Nix store, resulting
in a new path
(e.g. <code>/nix/store/ld01dnzc…-source-source</code>).</p>
<p>This function is not available in pure evaluation mode.</p>
<h2 id="builtins.splitversion">builtins.splitVersion</h2>
<p><em>s</em></p>
<p>Split a string representing a version into its components, by the
same version splitting logic underlying the version comparison in <a href="../command-ref/nix-env.md#operation---upgrade"><code>nix-env -u</code></a>.</p>
<h2 id="builtins.split">builtins.split</h2>
<p><em>regex, str</em></p>
<p>Returns a list composed of non matched strings interleaved with the
lists of the <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_04">extended
POSIX regular expression</a> <em>regex</em> matches of <em>str</em>.
Each item in the lists of matched sequences is a regex group.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.split <span class="st">&quot;(a)b&quot;</span> <span class="st">&quot;abc&quot;</span></span></code></pre></div>
<p>Evaluates to <code>[ &quot;&quot; [ &quot;a&quot; ] &quot;c&quot; ]</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.split <span class="st">&quot;([ac])&quot;</span> <span class="st">&quot;abc&quot;</span></span></code></pre></div>
<p>Evaluates to <code>[ &quot;&quot; [ &quot;a&quot; ] &quot;b&quot; [ &quot;c&quot; ] &quot;&quot; ]</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.split <span class="st">&quot;(a)|(c)&quot;</span> <span class="st">&quot;abc&quot;</span></span></code></pre></div>
<p>Evaluates to
<code>[ &quot;&quot; [ &quot;a&quot; null ] &quot;b&quot; [ null &quot;c&quot; ] &quot;&quot; ]</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.split <span class="st">&quot;([[:upper:]]+)&quot;</span> <span class="st">&quot;  FOO   &quot;</span></span></code></pre></div>
<p>Evaluates to <code>[ &quot; &quot; [ &quot;FOO&quot; ] &quot; &quot; ]</code>.</p>
<h2 id="builtins.sort">builtins.sort</h2>
<p><em>comparator, list</em></p>
<p>Return <em>list</em> in sorted order. It repeatedly calls the
function <em>comparator</em> with two elements. The comparator should
return <code>true</code> if the first element is less than the second,
and <code>false</code> otherwise. For example,</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.sort <span class="bu">builtins</span>.lessThan <span class="op">[</span> <span class="dv">483</span> <span class="dv">249</span> <span class="dv">526</span> <span class="dv">147</span> <span class="dv">42</span> <span class="dv">77</span> <span class="op">]</span></span></code></pre></div>
<p>produces the list <code>[ 42 77 147 249 483 526 ]</code>.</p>
<p>This is a stable sort: it preserves the relative order of elements
deemed equal by the comparator.</p>
<h2 id="builtins.seq">builtins.seq</h2>
<p><em>e1, e2</em></p>
<p>Evaluate <em>e1</em>, then evaluate and return <em>e2</em>. This
ensures that a computation is strict in the value of <em>e1</em>.</p>
<h2 id="builtins.replacestrings">builtins.replaceStrings</h2>
<p><em>from, to, s</em></p>
<p>Given string <em>s</em>, replace every occurrence of the strings in
<em>from</em> with the corresponding string in <em>to</em>. For
example,</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.replaceStrings <span class="op">[</span><span class="st">&quot;oo&quot;</span> <span class="st">&quot;a&quot;</span><span class="op">]</span> <span class="op">[</span><span class="st">&quot;a&quot;</span> <span class="st">&quot;i&quot;</span><span class="op">]</span> <span class="st">&quot;foobar&quot;</span></span></code></pre></div>
<p>evaluates to <code>&quot;fabir&quot;</code>.</p>
<h2 id="builtins.removeattrs">builtins.removeAttrs</h2>
<p><em>set, list</em></p>
<p>Remove the attributes listed in <em>list</em> from <em>set</em>. The
attributes don’t have to exist in <em>set</em>. For instance,</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="bu">removeAttrs</span> <span class="op">{</span> <span class="va">x</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="va">y</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="va">z</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="op">}</span> <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;x&quot;</span> <span class="st">&quot;z&quot;</span> <span class="op">]</span></span></code></pre></div>
<p>evaluates to <code>{ y = 2; }</code>.</p>
<h2 id="builtins.readfile">builtins.readFile</h2>
<p><em>path</em></p>
<p>Return the contents of the file <em>path</em> as a string.</p>
<h2 id="builtins.readdir">builtins.readDir</h2>
<p><em>path</em></p>
<p>Return the contents of the directory <em>path</em> as a set mapping
directory entries to the corresponding file type. For instance, if
directory <code>A</code> contains a regular file <code>B</code> and
another directory <code>C</code>, then <code>builtins.readDir ./A</code>
will return the set</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="va">B</span> <span class="op">=</span> <span class="st">&quot;regular&quot;</span><span class="op">;</span> <span class="va">C</span> <span class="op">=</span> <span class="st">&quot;directory&quot;</span><span class="op">;</span> <span class="op">}</span></span></code></pre></div>
<p>The possible values for the file type are <code>&quot;regular&quot;</code>,
<code>&quot;directory&quot;</code>, <code>&quot;symlink&quot;</code> and
<code>&quot;unknown&quot;</code>.</p>
<h2 id="builtins.placeholder">builtins.placeholder</h2>
<p><em>output</em></p>
<p>Return a placeholder string for the specified <em>output</em> that
will be substituted by the corresponding output path at build time.
Typical outputs would be <code>&quot;out&quot;</code>, <code>&quot;bin&quot;</code> or
<code>&quot;dev&quot;</code>.</p>
<h2 id="builtins.pathexists">builtins.pathExists</h2>
<p><em>path</em></p>
<p>Return <code>true</code> if the path <em>path</em> exists at
evaluation time, and <code>false</code> otherwise.</p>
<h2 id="builtins.path">builtins.path</h2>
<p><em>args</em></p>
<p>An enrichment of the built-in path type, based on the attributes
present in <em>args</em>. All are optional except <code>path</code>:</p>
<ul>
<li><p>path<br />
The underlying path.</p></li>
<li><p>name<br />
The name of the path when added to the store. This can used to reference
paths that have nix-illegal characters in their names, like
<code>@</code>.</p></li>
<li><p>filter<br />
A function of the type expected by <code>builtins.filterSource</code>,
with the same semantics.</p></li>
<li><p>recursive<br />
When <code>false</code>, when <code>path</code> is added to the store it
is with a flat hash, rather than a hash of the NAR serialization of the
file. Thus, <code>path</code> must refer to a regular file, not a
directory. This allows similar behavior to <code>fetchurl</code>.
Defaults to <code>true</code>.</p></li>
<li><p>sha256<br />
When provided, this is the expected hash of the file at the path.
Evaluation will fail if the hash is incorrect, and providing a hash
allows <code>builtins.path</code> to be used even when the
<code>pure-eval</code> nix config option is on.</p></li>
</ul>
<h2 id="builtins.partition">builtins.partition</h2>
<p><em>pred, list</em></p>
<p>Given a predicate function <em>pred</em>, this function returns an
attrset containing a list named <code>right</code>, containing the
elements in <em>list</em> for which <em>pred</em> returned
<code>true</code>, and a list named <code>wrong</code>, containing the
elements for which it returned <code>false</code>. For example,</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.partition <span class="op">(</span><span class="va">x</span><span class="op">:</span> x &gt; <span class="dv">10</span><span class="op">)</span> <span class="op">[</span><span class="dv">1</span> <span class="dv">23</span> <span class="dv">9</span> <span class="dv">3</span> <span class="dv">42</span><span class="op">]</span></span></code></pre></div>
<p>evaluates to</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="va">right</span> <span class="op">=</span> <span class="op">[</span> <span class="dv">23</span> <span class="dv">42</span> <span class="op">];</span> <span class="va">wrong</span> <span class="op">=</span> <span class="op">[</span> <span class="dv">1</span> <span class="dv">9</span> <span class="dv">3</span> <span class="op">];</span> <span class="op">}</span></span></code></pre></div>
<h2 id="builtins.parsedrvname">builtins.parseDrvName</h2>
<p><em>s</em></p>
<p>Split the string <em>s</em> into a package name and version. The
package name is everything up to but not including the first dash
followed by a digit, and the version is everything following that dash.
The result is returned in a set <code>{ name, version }</code>. Thus,
<code>builtins.parseDrvName &quot;nix-0.12pre12876&quot;</code> returns
<code>{ name = &quot;nix&quot;; version = &quot;0.12pre12876&quot;; }</code>.</p>
<h2 id="builtins.mul">builtins.mul</h2>
<p><em>e1, e2</em></p>
<p>Return the product of the numbers <em>e1</em> and <em>e2</em>.</p>
<h2 id="builtins.match">builtins.match</h2>
<p><em>regex, str</em></p>
<p>Returns a list if the <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_04">extended
POSIX regular expression</a> <em>regex</em> matches <em>str</em>
precisely, otherwise returns <code>null</code>. Each item in the list is
a regex group.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.match <span class="st">&quot;ab&quot;</span> <span class="st">&quot;abc&quot;</span></span></code></pre></div>
<p>Evaluates to <code>null</code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.match <span class="st">&quot;abc&quot;</span> <span class="st">&quot;abc&quot;</span></span></code></pre></div>
<p>Evaluates to <code>[ ]</code>.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.match <span class="st">&quot;a(b)(c)&quot;</span> <span class="st">&quot;abc&quot;</span></span></code></pre></div>
<p>Evaluates to <code>[ &quot;b&quot; &quot;c&quot; ]</code>.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.match <span class="st">&quot;[[:space:]]+([[:upper:]]+)[[:space:]]+&quot;</span> <span class="st">&quot;  FOO   &quot;</span></span></code></pre></div>
<p>Evaluates to <code>[ &quot;foo&quot; ]</code>.</p>
<h2 id="builtins.mapattrs">builtins.mapAttrs</h2>
<p><em>f, attrset</em></p>
<p>Apply function <em>f</em> to every element of <em>attrset</em>. For
example,</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.mapAttrs <span class="op">(</span><span class="va">name</span><span class="op">:</span> <span class="va">value</span><span class="op">:</span> value <span class="op">*</span> <span class="dv">10</span><span class="op">)</span> <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="op">}</span></span></code></pre></div>
<p>evaluates to <code>{ a = 10; b = 20; }</code>.</p>
<h2 id="builtins.map">builtins.map</h2>
<p><em>f, list</em></p>
<p>Apply the function <em>f</em> to each element in the list
<em>list</em>. For example,</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="bu">map</span> <span class="op">(</span><span class="va">x</span><span class="op">:</span> <span class="st">&quot;foo&quot;</span> <span class="op">+</span> x<span class="op">)</span> <span class="op">[</span> <span class="st">&quot;bar&quot;</span> <span class="st">&quot;bla&quot;</span> <span class="st">&quot;abc&quot;</span> <span class="op">]</span></span></code></pre></div>
<p>evaluates to <code>[ &quot;foobar&quot; &quot;foobla&quot; &quot;fooabc&quot; ]</code>.</p>
<h2 id="builtins.listtoattrs">builtins.listToAttrs</h2>
<p><em>e</em></p>
<p>Construct a set from a list specifying the names and values of each
attribute. Each element of the list should be a set consisting of a
string-valued attribute <code>name</code> specifying the name of the
attribute, and an attribute <code>value</code> specifying its value.
Example:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.listToAttrs</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span> <span class="op">{</span> <span class="va">name</span> <span class="op">=</span> <span class="st">&quot;foo&quot;</span><span class="op">;</span> <span class="va">value</span> <span class="op">=</span> <span class="dv">123</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> <span class="va">name</span> <span class="op">=</span> <span class="st">&quot;bar&quot;</span><span class="op">;</span> <span class="va">value</span> <span class="op">=</span> <span class="dv">456</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">]</span></span></code></pre></div>
<p>evaluates to</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="va">foo</span> <span class="op">=</span> <span class="dv">123</span><span class="op">;</span> <span class="va">bar</span> <span class="op">=</span> <span class="dv">456</span><span class="op">;</span> <span class="op">}</span></span></code></pre></div>
<h2 id="builtins.lessthan">builtins.lessThan</h2>
<p><em>e1, e2</em></p>
<p>Return <code>true</code> if the number <em>e1</em> is less than the
number <em>e2</em>, and <code>false</code> otherwise. Evaluation aborts
if either <em>e1</em> or <em>e2</em> does not evaluate to a number.</p>
<h2 id="builtins.length">builtins.length</h2>
<p><em>e</em></p>
<p>Return the length of the list <em>e</em>.</p>
<h2 id="builtins.isstring">builtins.isString</h2>
<p><em>e</em></p>
<p>Return <code>true</code> if <em>e</em> evaluates to a string, and
<code>false</code> otherwise.</p>
<h2 id="builtins.ispath">builtins.isPath</h2>
<p><em>e</em></p>
<p>Return <code>true</code> if <em>e</em> evaluates to a path, and
<code>false</code> otherwise.</p>
<h2 id="builtins.isnull">builtins.isNull</h2>
<p><em>e</em></p>
<p>Return <code>true</code> if <em>e</em> evaluates to
<code>null</code>, and <code>false</code> otherwise.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>This function is <em>deprecated</em>; just write
<code>e == null</code> instead.</p>
</blockquote>
<h2 id="builtins.islist">builtins.isList</h2>
<p><em>e</em></p>
<p>Return <code>true</code> if <em>e</em> evaluates to a list, and
<code>false</code> otherwise.</p>
<h2 id="builtins.isint">builtins.isInt</h2>
<p><em>e</em></p>
<p>Return <code>true</code> if <em>e</em> evaluates to an integer, and
<code>false</code> otherwise.</p>
<h2 id="builtins.isfunction">builtins.isFunction</h2>
<p><em>e</em></p>
<p>Return <code>true</code> if <em>e</em> evaluates to a function, and
<code>false</code> otherwise.</p>
<h2 id="builtins.isfloat">builtins.isFloat</h2>
<p><em>e</em></p>
<p>Return <code>true</code> if <em>e</em> evaluates to a float, and
<code>false</code> otherwise.</p>
<h2 id="builtins.isbool">builtins.isBool</h2>
<p><em>e</em></p>
<p>Return <code>true</code> if <em>e</em> evaluates to a bool, and
<code>false</code> otherwise.</p>
<h2 id="builtins.isattrs">builtins.isAttrs</h2>
<p><em>e</em></p>
<p>Return <code>true</code> if <em>e</em> evaluates to a set, and
<code>false</code> otherwise.</p>
<h2 id="builtins.intersectattrs">builtins.intersectAttrs</h2>
<p><em>e1, e2</em></p>
<p>Return a set consisting of the attributes in the set <em>e2</em> that
also exist in the set <em>e1</em>.</p>
<h2 id="builtins.import">builtins.import</h2>
<p><em>path</em></p>
<p>Load, parse and return the Nix expression in the file <em>path</em>.
If <em>path</em> is a directory, the file <code>default.nix</code> in
that directory is loaded. Evaluation aborts if the file doesn’t exist or
contains an incorrect Nix expression. <code>import</code> implements
Nix’s module system: you can put any Nix expression (such as a set or a
function) in a separate file, and use it from Nix expressions in other
files.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>Unlike some languages, <code>import</code> is a regular function in
Nix. Paths using the angle bracket syntax (e.g., <code>import</code>
<em>&lt;foo&gt;</em>) are <a href="language-values.md">normal path
values</a>.</p>
</blockquote>
<p>A Nix expression loaded by <code>import</code> must not contain any
<em>free variables</em> (identifiers that are not defined in the Nix
expression itself and are not built-in). Therefore, it cannot refer to
variables that are in scope at the call site. For instance, if you have
a calling expression</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">rec</span> <span class="op">{</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">x</span> <span class="op">=</span> <span class="dv">123</span><span class="op">;</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">y</span> <span class="op">=</span> <span class="bu">import</span> <span class="ss">./foo.nix</span><span class="op">;</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>then the following <code>foo.nix</code> will give an error:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">+</span> <span class="dv">456</span></span></code></pre></div>
<p>since <code>x</code> is not in scope in <code>foo.nix</code>. If you
want <code>x</code> to be available in <code>foo.nix</code>, you should
pass it as a function argument:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">rec</span> <span class="op">{</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">x</span> <span class="op">=</span> <span class="dv">123</span><span class="op">;</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">y</span> <span class="op">=</span> <span class="bu">import</span> <span class="ss">./foo.nix</span> x<span class="op">;</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>and</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="va">x</span><span class="op">:</span> x <span class="op">+</span> <span class="dv">456</span></span></code></pre></div>
<p>(The function argument doesn’t have to be called <code>x</code> in
<code>foo.nix</code>; any name would work.)</p>
<h2 id="builtins.head">builtins.head</h2>
<p><em>list</em></p>
<p>Return the first element of a list; abort evaluation if the argument
isn’t a list or is an empty list. You can test whether a list is empty
by comparing it with <code>[]</code>.</p>
<h2 id="builtins.hashstring">builtins.hashString</h2>
<p><em>type, s</em></p>
<p>Return a base-16 representation of the cryptographic hash of string
<em>s</em>. The hash algorithm specified by <em>type</em> must be one of
<code>&quot;md5&quot;</code>, <code>&quot;sha1&quot;</code>, <code>&quot;sha256&quot;</code> or
<code>&quot;sha512&quot;</code>.</p>
<h2 id="builtins.hashfile">builtins.hashFile</h2>
<p><em>type, p</em></p>
<p>Return a base-16 representation of the cryptographic hash of the file
at path <em>p</em>. The hash algorithm specified by <em>type</em> must
be one of <code>&quot;md5&quot;</code>, <code>&quot;sha1&quot;</code>, <code>&quot;sha256&quot;</code>
or <code>&quot;sha512&quot;</code>.</p>
<h2 id="builtins.hasattr">builtins.hasAttr</h2>
<p><em>s, set</em></p>
<p><code>hasAttr</code> returns <code>true</code> if <em>set</em> has an
attribute named <em>s</em>, and <code>false</code> otherwise. This is a
dynamic version of the <code>?</code> operator, since <em>s</em> is an
expression rather than an identifier.</p>
<h2 id="builtins.groupby">builtins.groupBy</h2>
<p><em>f, list</em></p>
<p>Groups elements of <em>list</em> together by the string returned from
the function <em>f</em> called on each element. It returns an attribute
set where each attribute value contains the elements of <em>list</em>
that are mapped to the same corresponding attribute name returned by
<em>f</em>.</p>
<p>For example,</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.groupBy <span class="op">(</span><span class="bu">builtins</span>.substring <span class="dv">0</span> <span class="dv">1</span><span class="op">)</span> <span class="op">[</span><span class="st">&quot;foo&quot;</span> <span class="st">&quot;bar&quot;</span> <span class="st">&quot;baz&quot;</span><span class="op">]</span></span></code></pre></div>
<p>evaluates to</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="va">b</span> <span class="op">=</span> <span class="op">[</span> <span class="st">&quot;bar&quot;</span> <span class="st">&quot;baz&quot;</span> <span class="op">];</span> <span class="va">f</span> <span class="op">=</span> <span class="op">[</span> <span class="st">&quot;foo&quot;</span> <span class="op">];</span> <span class="op">}</span></span></code></pre></div>
<h2 id="builtins.getflake">builtins.getFlake</h2>
<p><em>args</em></p>
<p>Fetch a flake from a flake reference, and return its output
attributes and some metadata. For example:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="op">(</span><span class="bu">builtins</span>.getFlake <span class="st">&quot;nix/55bc52401966fbffa525c574c14f67b00bc4fb3a&quot;</span><span class="op">)</span>.packages.x86_64<span class="op">-</span>linux.nix</span></code></pre></div>
<p>Unless impure evaluation is allowed (<code>--impure</code>), the
flake reference must be “locked”, e.g. contain a Git revision or content
hash. An example of an unlocked usage is:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="op">(</span><span class="bu">builtins</span>.getFlake <span class="st">&quot;github:edolstra/dwarffs&quot;</span><span class="op">)</span>.rev</span></code></pre></div>
<p>This function is only available if you enable the experimental
feature <code>flakes</code>.</p>
<h2 id="builtins.getenv">builtins.getEnv</h2>
<p><em>s</em></p>
<p><code>getEnv</code> returns the value of the environment variable
<em>s</em>, or an empty string if the variable doesn’t exist. This
function should be used with care, as it can introduce all sorts of
nasty environment dependencies in your Nix expression.</p>
<p><code>getEnv</code> is used in Nix Packages to locate the file
<code>~/.nixpkgs/config.nix</code>, which contains user-local settings
for Nix Packages. (That is, it does a <code>getEnv &quot;HOME&quot;</code> to
locate the user’s home directory.)</p>
<h2 id="builtins.getattr">builtins.getAttr</h2>
<p><em>s, set</em></p>
<p><code>getAttr</code> returns the attribute named <em>s</em> from
<em>set</em>. Evaluation aborts if the attribute doesn’t exist. This is
a dynamic version of the <code>.</code> operator, since <em>s</em> is an
expression rather than an identifier.</p>
<h2 id="builtins.genericclosure">builtins.genericClosure</h2>
<p><em>attrset</em></p>
<p>Take an <em>attrset</em> with values named <code>startSet</code> and
<code>operator</code> in order to return a <em>list of attrsets</em> by
starting with the <code>startSet</code>, recursively applying the
<code>operator</code> function to each element. The <em>attrsets</em> in
the <code>startSet</code> and produced by the <code>operator</code> must
each contain value named <code>key</code> which are comparable to each
other. The result is produced by repeatedly calling the operator for
each element encountered with a unique key, terminating when no new
elements are produced. For example,</p>
<pre><code>builtins.genericClosure {
  startSet = [ {key = 5;} ];
  operator = item: [{
    key = if (item.key / 2 ) * 2 == item.key
         then item.key / 2
         else 3 * item.key + 1;
  }];
}</code></pre>
<p>evaluates to</p>
<pre><code>[ { key = 5; } { key = 16; } { key = 8; } { key = 4; } { key = 2; } { key = 1; } ]</code></pre>
<h2 id="builtins.genlist">builtins.genList</h2>
<p><em>generator, length</em></p>
<p>Generate list of size <em>length</em>, with each element <em>i</em>
equal to the value returned by <em>generator</em> <code>i</code>. For
example,</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.genList <span class="op">(</span><span class="va">x</span><span class="op">:</span> x <span class="op">*</span> x<span class="op">)</span> <span class="dv">5</span></span></code></pre></div>
<p>returns the list <code>[ 0 1 4 9 16 ]</code>.</p>
<h2 id="builtins.functionargs">builtins.functionArgs</h2>
<p><em>f</em></p>
<p>Return a set containing the names of the formal arguments expected by
the function <em>f</em>. The value of each attribute is a Boolean
denoting whether the corresponding argument has a default value. For
instance,
<code>functionArgs ({ x, y ? 123}: ...) = { x = false; y = true; }</code>.</p>
<p>“Formal argument” here refers to the attributes pattern-matched by
the function. Plain lambdas are not included,
e.g. <code>functionArgs (x: ...) = { }</code>.</p>
<h2 id="builtins.fromjson">builtins.fromJSON</h2>
<p><em>e</em></p>
<p>Convert a JSON string to a Nix value. For example,</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.fromJSON <span class="st">&#39;&#39;{&quot;x&quot;: [1, 2, 3], &quot;y&quot;: null}&#39;&#39;</span></span></code></pre></div>
<p>returns the value <code>{ x = [ 1 2 3 ]; y = null; }</code>.</p>
<h2 id="builtins.foldl">builtins.foldl’</h2>
<p><em>op, nul, list</em></p>
<p>Reduce a list by applying a binary operator, from left to right,
e.g. <code>foldl&#39; op nul [x0 x1 x2 ...] = op (op (op nul x0) x1) x2) ...</code>.
The operator is applied strictly, i.e., its arguments are evaluated
first. For example, <code>foldl&#39; (x: y: x + y) 0 [1 2 3]</code>
evaluates to 6.</p>
<h2 id="builtins.floor">builtins.floor</h2>
<p><em>double</em></p>
<p>Converts an IEEE-754 double-precision floating-point number
(<em>double</em>) to the next lower integer.</p>
<p>If the datatype is neither an integer nor a “float”, an evaluation
error will be thrown.</p>
<h2 id="builtins.filtersource">builtins.filterSource</h2>
<p><em>e1, e2</em></p>
<blockquote>
<p><strong>Warning</strong></p>
<p><code>filterSource</code> should not be used to filter store paths.
Since <code>filterSource</code> uses the name of the input directory
while naming the output directory, doing so will produce a directory
name in the form of
<code>&lt;hash2&gt;-&lt;hash&gt;-&lt;name&gt;</code>, where
<code>&lt;hash&gt;-&lt;name&gt;</code> is the name of the input
directory. Since <code>&lt;hash&gt;</code> depends on the unfiltered
directory, the name of the output directory will indirectly depend on
files that are filtered out by the function. This will trigger a rebuild
even when a filtered out file is changed. Use <code>builtins.path</code>
instead, which allows specifying the name of the output directory.</p>
</blockquote>
<p>This function allows you to copy sources into the Nix store while
filtering certain files. For instance, suppose that you want to use the
directory <code>source-dir</code> as an input to a Nix expression,
e.g.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>stdenv.mkDerivation <span class="op">{</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">src</span> = ./<span class="va">source-dir</span>;</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>However, if <code>source-dir</code> is a Subversion working copy,
then all those annoying <code>.svn</code> subdirectories will also be
copied to the store. Worse, the contents of those directories may change
a lot, causing lots of spurious rebuilds. With <code>filterSource</code>
you can filter out the <code>.svn</code> directories:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>src = <span class="bu">builtins</span>.filterSource</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">(</span><span class="va">path</span><span class="op">:</span> <span class="va">type</span><span class="op">:</span> type <span class="op">!</span>= <span class="st">&quot;directory&quot;</span> <span class="op">||</span> <span class="bu">baseNameOf</span> path <span class="op">!</span>= <span class="st">&quot;.svn&quot;</span><span class="op">)</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="ss">./source-dir</span>;</span></code></pre></div>
<p>Thus, the first argument <em>e1</em> must be a predicate function
that is called for each regular file, directory or symlink in the source
tree <em>e2</em>. If the function returns <code>true</code>, the file is
copied to the Nix store, otherwise it is omitted. The function is called
with two arguments. The first is the full path of the file. The second
is a string that identifies the type of the file, which is either
<code>&quot;regular&quot;</code>, <code>&quot;directory&quot;</code>, <code>&quot;symlink&quot;</code>
or <code>&quot;unknown&quot;</code> (for other kinds of files such as device nodes
or fifos — but note that those cannot be copied to the Nix store, so if
the predicate returns <code>true</code> for them, the copy will fail).
If you exclude a directory, the entire corresponding subtree of
<em>e2</em> will be excluded.</p>
<h2 id="builtins.filter">builtins.filter</h2>
<p><em>f, list</em></p>
<p>Return a list consisting of the elements of <em>list</em> for which
the function <em>f</em> returns <code>true</code>.</p>
<h2 id="builtins.fetchurl">builtins.fetchurl</h2>
<p><em>url</em></p>
<p>Download the specified URL and return the path of the downloaded
file. This function is not available if <a href="../command-ref/conf-file.md">restricted evaluation mode</a> is
enabled.</p>
<h2 id="builtins.fetchtarball">builtins.fetchTarball</h2>
<p><em>args</em></p>
<p>Download the specified URL, unpack it and return the path of the
unpacked tree. The file must be a tape archive (<code>.tar</code>)
compressed with <code>gzip</code>, <code>bzip2</code> or
<code>xz</code>. The top-level path component of the files in the
tarball is removed, so it is best if the tarball contains a single
directory at top level. The typical use of the function is to obtain
external Nix expression dependencies, such as a particular version of
Nixpkgs, e.g.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="kw">with</span> <span class="bu">import</span> <span class="op">(</span><span class="bu">fetchTarball</span> <span class="va">https</span><span class="op">://</span><span class="ss">github.com/NixOS/nixpkgs/archive/nixos-14.12.tar.gz</span><span class="op">)</span> <span class="op">{};</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>stdenv.mkDerivation <span class="op">{</span> … <span class="op">}</span></span></code></pre></div>
<p>The fetched tarball is cached for a certain amount of time (1 hour by
default) in <code>~/.cache/nix/tarballs/</code>. You can change the
cache timeout either on the command line with <code>--tarball-ttl</code>
<em>number-of-seconds</em> or in the Nix configuration file by adding
the line <code>tarball-ttl =</code> <em>number-of-seconds</em>.</p>
<p>Note that when obtaining the hash with <code>nix-prefetch-url</code>
the option <code>--unpack</code> is required.</p>
<p>This function can also verify the contents against a hash. In that
case, the function takes a set instead of a URL. The set requires the
attribute <code>url</code> and the attribute <code>sha256</code>,
e.g.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="kw">with</span> <span class="bu">import</span> <span class="op">(</span><span class="bu">fetchTarball</span> <span class="op">{</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">url</span> <span class="op">=</span> <span class="st">&quot;https://github.com/NixOS/nixpkgs/archive/nixos-14.12.tar.gz&quot;</span><span class="op">;</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">sha256</span> <span class="op">=</span> <span class="st">&quot;1jppksrfvbk5ypiqdz4cddxdl8z6zyzdb2srq8fcffr327ld5jj2&quot;</span><span class="op">;</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="op">})</span> <span class="op">{};</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>stdenv.mkDerivation <span class="op">{</span> … <span class="op">}</span></span></code></pre></div>
<p>This function is not available if <a href="../command-ref/conf-file.md">restricted evaluation mode</a> is
enabled.</p>
<h2 id="builtins.fetchgit">builtins.fetchGit</h2>
<p><em>args</em></p>
<p>Fetch a path from git. <em>args</em> can be a URL, in which case the
HEAD of the repo at that URL is fetched. Otherwise, it can be an
attribute with the following attributes (all except <code>url</code>
optional):</p>
<ul>
<li><p>url<br />
The URL of the repo.</p></li>
<li><p>name<br />
The name of the directory the repo should be exported to in the store.
Defaults to the basename of the URL.</p></li>
<li><p>rev<br />
The git revision to fetch. Defaults to the tip of
<code>ref</code>.</p></li>
<li><p>ref<br />
The git ref to look for the requested revision under. This is often a
branch or tag name. Defaults to <code>HEAD</code>.</p>
<p>By default, the <code>ref</code> value is prefixed with
<code>refs/heads/</code>. As of Nix 2.3.0 Nix will not prefix
<code>refs/heads/</code> if <code>ref</code> starts with
<code>refs/</code>.</p></li>
<li><p>submodules<br />
A Boolean parameter that specifies whether submodules should be checked
out. Defaults to <code>false</code>.</p></li>
<li><p>allRefs<br />
Whether to fetch all refs of the repository. With this argument being
true, it’s possible to load a <code>rev</code> from <em>any</em>
<code>ref</code> (by default only <code>rev</code>s from the specified
<code>ref</code> are supported).</p></li>
</ul>
<p>Here are some examples of how to use <code>fetchGit</code>.</p>
<ul>
<li><p>To fetch a private repository over SSH:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.fetchGit <span class="op">{</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">url</span> <span class="op">=</span> <span class="st">&quot;git@github.com:my-secret/repository.git&quot;</span><span class="op">;</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">ref</span> <span class="op">=</span> <span class="st">&quot;master&quot;</span><span class="op">;</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="va">rev</span> <span class="op">=</span> <span class="st">&quot;adab8b916a45068c044658c4158d81878f9ed1c3&quot;</span><span class="op">;</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
<li><p>To fetch an arbitrary reference:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.fetchGit <span class="op">{</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">url</span> <span class="op">=</span> <span class="st">&quot;https://github.com/NixOS/nix.git&quot;</span><span class="op">;</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">ref</span> <span class="op">=</span> <span class="st">&quot;refs/heads/0.5-release&quot;</span><span class="op">;</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
<li><p>If the revision you’re looking for is in the default branch of
the git repository you don’t strictly need to specify the branch name in
the <code>ref</code> attribute.</p>
<p>However, if the revision you’re looking for is in a future branch for
the non-default branch you will need to specify the the <code>ref</code>
attribute as well.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.fetchGit <span class="op">{</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">url</span> <span class="op">=</span> <span class="st">&quot;https://github.com/nixos/nix.git&quot;</span><span class="op">;</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">rev</span> <span class="op">=</span> <span class="st">&quot;841fcbd04755c7a2865c51c1e2d3b045976b7452&quot;</span><span class="op">;</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="va">ref</span> <span class="op">=</span> <span class="st">&quot;1.11-maintenance&quot;</span><span class="op">;</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<blockquote>
<p><strong>Note</strong></p>
<p>It is nice to always specify the branch which a revision belongs to.
Without the branch being specified, the fetcher might fail if the
default branch changes. Additionally, it can be confusing to try a
commit from a non-default branch and see the fetch fail. If the branch
is specified the fault is much more obvious.</p>
</blockquote></li>
<li><p>If the revision you’re looking for is in the default branch of
the git repository you may omit the <code>ref</code> attribute.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.fetchGit <span class="op">{</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">url</span> <span class="op">=</span> <span class="st">&quot;https://github.com/nixos/nix.git&quot;</span><span class="op">;</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">rev</span> <span class="op">=</span> <span class="st">&quot;841fcbd04755c7a2865c51c1e2d3b045976b7452&quot;</span><span class="op">;</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
<li><p>To fetch a specific tag:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.fetchGit <span class="op">{</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">url</span> <span class="op">=</span> <span class="st">&quot;https://github.com/nixos/nix.git&quot;</span><span class="op">;</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">ref</span> <span class="op">=</span> <span class="st">&quot;refs/tags/1.9&quot;</span><span class="op">;</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
<li><p>To fetch the latest version of a remote branch:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.fetchGit <span class="op">{</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">url</span> <span class="op">=</span> <span class="st">&quot;ssh://git@github.com/nixos/nix.git&quot;</span><span class="op">;</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">ref</span> <span class="op">=</span> <span class="st">&quot;master&quot;</span><span class="op">;</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<blockquote>
<p><strong>Note</strong></p>
<p>Nix will refetch the branch in accordance with the option
<code>tarball-ttl</code>.</p>
</blockquote>
<blockquote>
<p><strong>Note</strong></p>
<p>This behavior is disabled in <em>Pure evaluation mode</em>.</p>
</blockquote></li>
</ul>
<h2 id="builtins.fetchclosure">builtins.fetchClosure</h2>
<p><em>args</em></p>
<p>Fetch a Nix store closure from a binary cache, rewriting it into
content-addressed form. For example,</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.fetchClosure <span class="op">{</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">fromStore</span> <span class="op">=</span> <span class="st">&quot;https://cache.nixos.org&quot;</span><span class="op">;</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">fromPath</span> <span class="op">=</span> <span class="ss">/nix/store/r2jd6ygnmirm2g803mksqqjm4y39yi6i-git-2.33.1</span><span class="op">;</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="va">toPath</span> <span class="op">=</span> <span class="ss">/nix/store/ldbhlwhh39wha58rm61bkiiwm6j7211j-git-2.33.1</span><span class="op">;</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>fetches <code>/nix/store/r2jd...</code> from the specified binary
cache, and rewrites it into the content-addressed store path
<code>/nix/store/ldbh...</code>.</p>
<p>If <code>fromPath</code> is already content-addressed, or if you are
allowing impure evaluation (<code>--impure</code>), then
<code>toPath</code> may be omitted.</p>
<p>To find out the correct value for <code>toPath</code> given a
<code>fromPath</code>, you can use
<code>nix store make-content-addressed</code>:</p>
<pre class="console"><code># nix store make-content-addressed --from https://cache.nixos.org /nix/store/r2jd6ygnmirm2g803mksqqjm4y39yi6i-git-2.33.1
rewrote &#39;/nix/store/r2jd6ygnmirm2g803mksqqjm4y39yi6i-git-2.33.1&#39; to &#39;/nix/store/ldbhlwhh39wha58rm61bkiiwm6j7211j-git-2.33.1&#39;</code></pre>
<p>This function is similar to <code>builtins.storePath</code> in that
it allows you to use a previously built store path in a Nix expression.
However, it is more reproducible because it requires specifying a binary
cache from which the path can be fetched. Also, requiring a
content-addressed final store path avoids the need for users to
configure binary cache public keys.</p>
<p>This function is only available if you enable the experimental
feature <code>fetch-closure</code>.</p>
<h2 id="builtins.elemat">builtins.elemAt</h2>
<p><em>xs, n</em></p>
<p>Return element <em>n</em> from the list <em>xs</em>. Elements are
counted starting from 0. A fatal error occurs if the index is out of
bounds.</p>
<h2 id="builtins.elem">builtins.elem</h2>
<p><em>x, xs</em></p>
<p>Return <code>true</code> if a value equal to <em>x</em> occurs in the
list <em>xs</em>, and <code>false</code> otherwise.</p>
<h2 id="builtins.div">builtins.div</h2>
<p><em>e1, e2</em></p>
<p>Return the quotient of the numbers <em>e1</em> and <em>e2</em>.</p>
<h2 id="builtins.dirof">builtins.dirOf</h2>
<p><em>s</em></p>
<p>Return the directory part of the string <em>s</em>, that is,
everything before the final slash in the string. This is similar to the
GNU <code>dirname</code> command.</p>
<h2 id="builtins.deepseq">builtins.deepSeq</h2>
<p><em>e1, e2</em></p>
<p>This is like <code>seq e1 e2</code>, except that <em>e1</em> is
evaluated <em>deeply</em>: if it’s a list or set, its elements or
attributes are also evaluated recursively.</p>
<h2 id="builtins.concatstringssep">builtins.concatStringsSep</h2>
<p><em>separator, list</em></p>
<p>Concatenate a list of strings with a separator between each element,
e.g. <code>concatStringsSep &quot;/&quot; [&quot;usr&quot; &quot;local&quot; &quot;bin&quot;] == &quot;usr/local/bin&quot;</code>.</p>
<h2 id="builtins.concatmap">builtins.concatMap</h2>
<p><em>f, list</em></p>
<p>This function is equivalent to
<code>builtins.concatLists (map f list)</code> but is more
efficient.</p>
<h2 id="builtins.concatlists">builtins.concatLists</h2>
<p><em>lists</em></p>
<p>Concatenate a list of lists into a single list.</p>
<h2 id="builtins.compareversions">builtins.compareVersions</h2>
<p><em>s1, s2</em></p>
<p>Compare two strings representing versions and return <code>-1</code>
if version <em>s1</em> is older than version <em>s2</em>, <code>0</code>
if they are the same, and <code>1</code> if <em>s1</em> is newer than
<em>s2</em>. The version comparison algorithm is the same as the one
used by <a href="../command-ref/nix-env.md#operation---upgrade"><code>nix-env -u</code></a>.</p>
<h2 id="builtins.ceil">builtins.ceil</h2>
<p><em>double</em></p>
<p>Converts an IEEE-754 double-precision floating-point number
(<em>double</em>) to the next higher integer.</p>
<p>If the datatype is neither an integer nor a “float”, an evaluation
error will be thrown.</p>
<h2 id="builtins.catattrs">builtins.catAttrs</h2>
<p><em>attr, list</em></p>
<p>Collect each attribute named <em>attr</em> from a list of attribute
sets. Attrsets that don’t contain the named attribute are ignored. For
example,</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.catAttrs <span class="st">&quot;a&quot;</span> <span class="op">[{</span><span class="va">a</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;}</span> <span class="op">{</span><span class="va">b</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;}</span> <span class="op">{</span><span class="va">a</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;}]</span></span></code></pre></div>
<p>evaluates to <code>[1 2]</code>.</p>
<h2 id="builtins.bitxor">builtins.bitXor</h2>
<p><em>e1, e2</em></p>
<p>Return the bitwise XOR of the integers <em>e1</em> and
<em>e2</em>.</p>
<h2 id="builtins.bitor">builtins.bitOr</h2>
<p><em>e1, e2</em></p>
<p>Return the bitwise OR of the integers <em>e1</em> and
<em>e2</em>.</p>
<h2 id="builtins.bitand">builtins.bitAnd</h2>
<p><em>e1, e2</em></p>
<p>Return the bitwise AND of the integers <em>e1</em> and
<em>e2</em>.</p>
<h2 id="builtins.basenameof">builtins.baseNameOf</h2>
<p><em>s</em></p>
<p>Return the <em>base name</em> of the string <em>s</em>, that is,
everything following the final slash in the string. This is similar to
the GNU <code>basename</code> command.</p>
<h2 id="builtins.attrvalues">builtins.attrValues</h2>
<p><em>set</em></p>
<p>Return the values of the attributes in the set <em>set</em> in the
order corresponding to the sorted attribute names.</p>
<h2 id="builtins.attrnames">builtins.attrNames</h2>
<p><em>set</em></p>
<p>Return the names of the attributes in the set <em>set</em> in an
alphabetically sorted list. For instance,
<code>builtins.attrNames { y = 1; x = &quot;foo&quot;; }</code> evaluates to
<code>[ &quot;x&quot; &quot;y&quot; ]</code>.</p>
<h2 id="builtins.any">builtins.any</h2>
<p><em>pred, list</em></p>
<p>Return <code>true</code> if the function <em>pred</em> returns
<code>true</code> for at least one element of <em>list</em>, and
<code>false</code> otherwise.</p>
<h2 id="builtins.all">builtins.all</h2>
<p><em>pred, list</em></p>
<p>Return <code>true</code> if the function <em>pred</em> returns
<code>true</code> for all elements of <em>list</em>, and
<code>false</code> otherwise.</p>
<h2 id="builtins.add">builtins.add</h2>
<p><em>e1, e2</em></p>
<p>Return the sum of the numbers <em>e1</em> and <em>e2</em>.</p>
<h2 id="builtins.abort">builtins.abort</h2>
<p><em>s</em></p>
<p>Abort Nix expression evaluation and print the error message
<em>s</em>.</p>
<h1 id="nixpkgs-library-functions">Nixpkgs Library Functions</h1>
<h2 id="assert-functions">Assert functions</h2>
<h3 id="lib.asserts.assertmsg">lib.asserts.assertMsg</h3>
<p><em>pred, msg</em></p>
<p><code>assertMsg :: Bool -&gt; String -&gt; Bool</code></p>
<p>Print a trace message if pred is false.</p>
<ul>
<li><p><code>pred</code></p>
<p>Condition under which the <var>msg</var> should
<emphasis>not</emphasis> be printed.</p></li>
<li><p><code>msg</code></p>
<p>Message to print.</p></li>
</ul>
<p>Printing when the predicate is false:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="kw">assert</span> lib.asserts.assertMsg <span class="op">(</span><span class="st">&quot;foo&quot;</span> == <span class="st">&quot;bar&quot;</span><span class="op">)</span> <span class="st">&quot;foo is not bar, silly&quot;</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>stderr&gt; <span class="va">trace</span><span class="op">:</span> foo is not bar, silly</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>stderr&gt; <span class="kw">assert</span> failed</span></code></pre></div>
<h3 id="lib.asserts.assertoneof">lib.asserts.assertOneOf</h3>
<p><em>name, val, xs</em></p>
<p><code>assertOneOf :: String -&gt; String -&gt;       StringList -&gt; Bool</code></p>
<p>Specialized asserts.assertMsg for checking if val is one of the
elements of xs. Useful for checking enums.</p>
<ul>
<li><p><code>name</code></p>
<p>The name of the variable the user entered <var>val</var> into, for
inclusion in the error message.</p></li>
<li><p><code>val</code></p>
<p>The value of what the user provided, to be compared against the
values in <var>xs</var>.</p></li>
<li><p><code>xs</code></p>
<p>The list of valid values.</p></li>
</ul>
<p>Ensuring a user provided a possible value:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> <span class="va">sslLibrary</span> <span class="op">=</span> <span class="st">&quot;bearssl&quot;</span><span class="op">;</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="kw">in</span> lib.asserts.assertOneOf <span class="st">&quot;sslLibrary&quot;</span> sslLibrary <span class="op">[</span> <span class="st">&quot;openssl&quot;</span> <span class="st">&quot;libressl&quot;</span> <span class="op">]</span>;</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">false</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>stderr&gt; <span class="va">trace</span><span class="op">:</span> sslLibrary must be one of <span class="st">&quot;openssl&quot;</span>, <span class="st">&quot;libressl&quot;</span>, but <span class="va">is</span><span class="op">:</span> <span class="st">&quot;bearssl&quot;</span></span></code></pre></div>
<h2 id="attribute-set-functions">Attribute-Set Functions</h2>
<h3 id="lib.attrset.attrbypath">lib.attrset.attrByPath</h3>
<p><em>attrPath, default, set</em></p>
<p><code>attrByPath :: [String] -&gt; Any -&gt; AttrSet -&gt; Any</code></p>
<p>Return an attribute from within nested attribute sets.</p>
<ul>
<li><p><code>attrPath</code></p>
<p>A list of strings representing the path through the nested attribute
set <var>set</var>.</p></li>
<li><p><code>default</code></p>
<p>Default value if <var>attrPath</var> does not resolve to an existing
value.</p></li>
<li><p><code>set</code></p>
<p>The nested attributeset to select values from.</p></li>
</ul>
<p>Extracting a value from a nested attribute set:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> <span class="va">set</span> <span class="op">=</span> <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="op">{</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="op">};</span> <span class="op">};</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="kw">in</span> lib.attrsets.attrByPath <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span> <span class="op">]</span> <span class="dv">0</span> set</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">3</span></span></code></pre></div>
<p>No value at the path, instead using the default:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.attrByPath <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span> <span class="op">]</span> <span class="dv">0</span> <span class="op">{}</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">0</span></span></code></pre></div>
<h3 id="lib.attrsets.hasattrbypath">lib.attrsets.hasAttrByPath</h3>
<p><em>attrPath, set</em></p>
<p><code>hasAttrByPath :: [String] -&gt; AttrSet -&gt; Bool</code></p>
<p>Determine if an attribute exists within a nested attribute set.</p>
<ul>
<li><p><code>attrPath</code></p>
<p>A list of strings representing the path through the nested attribute
set <var>set</var>.</p></li>
<li><p><code>set</code></p>
<p>The nested attributeset to check.</p></li>
</ul>
<p>A nested value does exist inside a set:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.hasAttrByPath</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span> <span class="st">&quot;c&quot;</span> <span class="st">&quot;d&quot;</span> <span class="op">]</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="op">{</span> <span class="va">b</span> <span class="op">=</span> <span class="op">{</span> <span class="va">c</span> <span class="op">=</span> <span class="op">{</span> <span class="va">d</span> <span class="op">=</span> <span class="dv">123</span><span class="op">;</span> <span class="op">};</span> <span class="op">};</span> <span class="op">};</span> <span class="op">}</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span></code></pre></div>
<h3 id="lib.attrsets.setattrbypath">lib.attrsets.setAttrByPath</h3>
<p><em>attrPath, value</em></p>
<p><code>setAttrByPath :: [String] -&gt; Any -&gt; AttrSet</code></p>
<p>Create a new attribute set with value set at the nested attribute
location specified in attrPath.</p>
<ul>
<li><p><code>attrPath</code></p>
<p>A list of strings representing the path through the nested attribute
set.</p></li>
<li><p><code>value</code></p>
<p>The value to set at the location described by
<var>attrPath</var>.</p></li>
</ul>
<p>Creating a new nested attribute set:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.setAttrByPath <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span> <span class="op">]</span> <span class="dv">3</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="op">{</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="op">};</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.attrsets.getattrfrompath">lib.attrsets.getAttrFromPath</h3>
<p><em>attrPath, set</em></p>
<p><code>getAttrFromPath :: [String] -&gt; AttrSet -&gt; Value</code></p>
<p>Like except without a default, and it will throw if the value doesn’t
exist.</p>
<ul>
<li><p><code>attrPath</code></p>
<p>A list of strings representing the path through the nested attribute
set <var>set</var>.</p></li>
<li><p><code>set</code></p>
<p>The nested attribute set to find the value in.</p></li>
</ul>
<p>Succesfully getting a value from an attribute set:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.getAttrFromPath <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span> <span class="op">]</span> <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="op">{</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="op">};</span> <span class="op">}</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">3</span></span></code></pre></div>
<p>Throwing after failing to get a value from an attribute set:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.getAttrFromPath <span class="op">[</span> <span class="st">&quot;x&quot;</span> <span class="st">&quot;y&quot;</span> <span class="op">]</span> <span class="op">{</span> <span class="op">}</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="va">error</span><span class="op">:</span> cannot find attribute `x.y&#39;</span></code></pre></div>
<h3 id="lib.attrsets.attrvals">lib.attrsets.attrVals</h3>
<p><em>nameList, set</em></p>
<p><code>attrVals :: [String] -&gt; AttrSet -&gt; [Any]</code></p>
<p>Return the specified attributes from a set. All values must
exist.</p>
<ul>
<li><p><code>nameList</code></p>
<p>The list of attributes to fetch from <var>set</var>. Each attribute
name must exist on the attrbitue set.</p></li>
<li><p><code>set</code></p>
<p>The set to get attribute values from.</p></li>
</ul>
<p>Getting several values from an attribute set:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.attrVals <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span> <span class="st">&quot;c&quot;</span> <span class="op">]</span> <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="va">c</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="op">]</span></span></code></pre></div>
<p>Getting missing values from an attribute set:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.attrVals <span class="op">[</span> <span class="st">&quot;d&quot;</span> <span class="op">]</span> <span class="op">{</span> <span class="op">}</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="va">error</span><span class="op">:</span> attribute &#39;d&#39; missing</span></code></pre></div>
<h3 id="lib.attrsets.attrvalues">lib.attrsets.attrValues</h3>
<p><em>attrs</em></p>
<p><code>attrValues :: AttrSet -&gt; [Any]</code></p>
<p>Get all the attribute values from an attribute set.</p>
<ul>
<li><p><code>attrs</code></p>
<p>The attribute set.</p></li>
</ul>
<p>:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.attrValues <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="va">c</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.attrsets.catattrs">lib.attrsets.catAttrs</h3>
<p><em>attr, sets</em></p>
<p><code>catAttrs :: String -&gt; [AttrSet] -&gt; [Any]</code></p>
<p>Collect each attribute named `attr’ from the list of attribute sets,
sets. Sets that don’t contain the named attribute are ignored.</p>
<ul>
<li><p><code>attr</code></p>
<p>Attribute name to select from each attribute set in
<var>sets</var>.</p></li>
<li><p><code>sets</code></p>
<p>The list of attribute sets to select <var>attr</var> from.</p></li>
</ul>
<p>Collect an attribute from a list of attribute sets.:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>catAttrs <span class="st">&quot;a&quot;</span> <span class="op">[{</span><span class="va">a</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;}</span> <span class="op">{</span><span class="va">b</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;}</span> <span class="op">{</span><span class="va">a</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;}]</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.attrsets.filterattrs">lib.attrsets.filterAttrs</h3>
<p><em>pred, name, value, set, name, value</em></p>
<p><code>filterAttrs :: (String -&gt; Any -&gt; Bool) -&gt; AttrSet -&gt; AttrSet</code></p>
<p>Filter an attribute set by removing all attributes for which the
given predicate return false.</p>
<ul>
<li><p><code>pred</code></p>
<p><literal>String -&gt; Any -&gt; Bool</literal></p></li>
<li><p><code>name</code></p>
<p>The attribute’s name</p></li>
<li><p><code>value</code></p>
<p>The attribute’s value</p></li>
<li><p><code>set</code></p>
<p>The attribute set to filter</p></li>
<li><p><code>name</code></p>
<p>The attribute’s name</p></li>
<li><p><code>value</code></p>
<p>The attribute’s value</p></li>
</ul>
<p>Filtering an attributeset:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>filterAttrs <span class="op">(</span><span class="va">n</span><span class="op">:</span> <span class="va">v</span><span class="op">:</span> n == <span class="st">&quot;foo&quot;</span><span class="op">)</span> <span class="op">{</span> <span class="va">foo</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="va">bar</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">foo</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.attrsets.filterattrsrecursive">lib.attrsets.filterAttrsRecursive</h3>
<p><em>pred, name, value, set, name, value</em></p>
<p><code>filterAttrsRecursive :: (String -&gt; Any -&gt; Bool) -&gt; AttrSet -&gt; AttrSet</code></p>
<p>Filter an attribute set recursively by removing all attributes for
which the given predicate return false.</p>
<ul>
<li><p><code>pred</code></p>
<p><literal>String -&gt; Any -&gt; Bool</literal></p></li>
<li><p><code>name</code></p>
<p>The attribute’s name</p></li>
<li><p><code>value</code></p>
<p>The attribute’s value</p></li>
<li><p><code>set</code></p>
<p>The attribute set to filter</p></li>
<li><p><code>name</code></p>
<p>The attribute’s name</p></li>
<li><p><code>value</code></p>
<p>The attribute’s value</p></li>
</ul>
<p>Recursively filtering an attribute set:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.filterAttrsRecursive</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">(</span><span class="va">n</span><span class="op">:</span> <span class="va">v</span><span class="op">:</span> v <span class="op">!</span>= <span class="cn">null</span><span class="op">)</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">levelA</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>      <span class="va">example</span> <span class="op">=</span> <span class="st">&quot;hi&quot;</span><span class="op">;</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>      <span class="va">levelB</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">hello</span> <span class="op">=</span> <span class="st">&quot;there&quot;</span><span class="op">;</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>        <span class="va">this-one-is-present</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>          <span class="va">this-is-excluded</span> <span class="op">=</span> <span class="cn">null</span><span class="op">;</span></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">};</span></span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>      <span class="op">};</span></span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>      <span class="va">this-one-is-also-excluded</span> <span class="op">=</span> <span class="cn">null</span><span class="op">;</span></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>    <span class="va">also-excluded</span> <span class="op">=</span> <span class="cn">null</span><span class="op">;</span></span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>     <span class="va">levelA</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>       <span class="va">example</span> <span class="op">=</span> <span class="st">&quot;hi&quot;</span><span class="op">;</span></span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a>       <span class="va">levelB</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>         <span class="va">hello</span> <span class="op">=</span> <span class="st">&quot;there&quot;</span><span class="op">;</span></span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>         <span class="va">this-one-is-present</span> <span class="op">=</span> <span class="op">{</span> <span class="op">};</span></span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a>       <span class="op">};</span></span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a>     <span class="op">};</span></span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a>   <span class="op">}</span></span></code></pre></div>
<h3 id="lib.attrsets.foldattrs">lib.attrsets.foldAttrs</h3>
<p><em>op, val, col, nul, list_of_attrs, val, col</em></p>
<p><code>foldAttrs :: (Any -&gt; Any -&gt; Any) -&gt; Any -&gt; [AttrSets] -&gt; Any</code></p>
<p>Apply fold function to values grouped by key.</p>
<ul>
<li><p><code>op</code></p>
<p><literal>Any -&gt; Any -&gt; Any</literal></p></li>
<li><p><code>val</code></p>
<p>An attribute’s value</p></li>
<li><p><code>col</code></p>
<p>The result of previous <function>op</function> calls with other
values and <function>nul</function>.</p></li>
<li><p><code>nul</code></p>
<p>The null-value, the starting value.</p></li>
<li><p><code>list_of_attrs</code></p>
<p>A list of attribute sets to fold together by key.</p></li>
<li><p><code>val</code></p>
<p>An attribute’s value</p></li>
<li><p><code>col</code></p>
<p>The result of previous <function>op</function> calls with other
values and <function>nul</function>.</p></li>
</ul>
<p>Combining an attribute of lists in to one attribute set:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.foldAttrs</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">(</span><span class="va">n</span><span class="op">:</span> <span class="va">a</span><span class="op">:</span> <span class="op">[</span>n<span class="op">]</span> <span class="op">++</span> a<span class="op">)</span> <span class="op">[]</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">7</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">6</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>  <span class="op">]</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="op">[</span> <span class="dv">2</span> <span class="dv">3</span> <span class="op">];</span> <span class="va">b</span> <span class="op">=</span> <span class="op">[</span> <span class="dv">7</span> <span class="dv">6</span> <span class="op">];</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.attrsets.collect">lib.attrsets.collect</h3>
<p><em>pred, value, attrs, value</em></p>
<p><code>collect :: (Any -&gt; Bool) -&gt; AttrSet -&gt; [Any]</code></p>
<p>Recursively collect sets that verify a given predicate named pred
from the set attrs. The recursion stops when pred returns true.</p>
<ul>
<li><p><code>pred</code></p>
<p><literal>Any -&gt; Bool</literal></p></li>
<li><p><code>value</code></p>
<p>The attribute set value.</p></li>
<li><p><code>attrs</code></p>
<p>The attribute set to recursively collect.</p></li>
<li><p><code>value</code></p>
<p>The attribute set value.</p></li>
</ul>
<p>Collecting all lists from an attribute set:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.collect isList <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="op">{</span> <span class="va">b</span> <span class="op">=</span> <span class="op">[</span><span class="st">&quot;b&quot;</span><span class="op">];</span> <span class="op">};</span> <span class="va">c</span> <span class="op">=</span> <span class="op">[</span><span class="dv">1</span><span class="op">];</span> <span class="op">}</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[[</span><span class="st">&quot;b&quot;</span><span class="op">]</span> <span class="op">[</span><span class="dv">1</span><span class="op">]]</span></span></code></pre></div>
<p>Collecting all attribute-sets which contain the outPath attribute
name.:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>collect <span class="op">(</span><span class="va">x</span><span class="op">:</span> x <span class="op">?</span> outPath<span class="op">)</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="op">{</span> <span class="va">outPath</span> <span class="op">=</span> <span class="st">&quot;a/&quot;</span><span class="op">;</span> <span class="op">};</span> <span class="va">b</span> <span class="op">=</span> <span class="op">{</span> <span class="va">outPath</span> <span class="op">=</span> <span class="st">&quot;b/&quot;</span><span class="op">;</span> <span class="op">};</span> <span class="op">}</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[{</span> <span class="va">outPath</span> <span class="op">=</span> <span class="st">&quot;a/&quot;</span><span class="op">;</span> <span class="op">}</span> <span class="op">{</span> <span class="va">outPath</span> <span class="op">=</span> <span class="st">&quot;b/&quot;</span><span class="op">;</span> <span class="op">}]</span></span></code></pre></div>
<h3 id="lib.attrsets.namevaluepair">lib.attrsets.nameValuePair</h3>
<p><em>name, value</em></p>
<p><code>nameValuePair :: String -&gt; Any -&gt; AttrSet</code></p>
<p>Utility function that creates a {name, value} pair as expected by
builtins.listToAttrs.</p>
<ul>
<li><p><code>name</code></p>
<p>The attribute name.</p></li>
<li><p><code>value</code></p>
<p>The attribute value.</p></li>
</ul>
<p>Creating a name value pair:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>nameValuePair <span class="st">&quot;some&quot;</span> <span class="dv">6</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">name</span> <span class="op">=</span> <span class="st">&quot;some&quot;</span><span class="op">;</span> <span class="va">value</span> <span class="op">=</span> <span class="dv">6</span><span class="op">;</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.attrsets.mapattrs">lib.attrsets.mapAttrs</h3>
<p><em>fn, name, value, name, value</em></p>
<p>``</p>
<p>Apply a function to each element in an attribute set, creating a new
attribute set.</p>
<ul>
<li><p><code>fn</code></p>
<p><literal>String -&gt; Any -&gt; Any</literal></p></li>
<li><p><code>name</code></p>
<p>The name of the attribute.</p></li>
<li><p><code>value</code></p>
<p>The attribute’s value.</p></li>
<li><p><code>name</code></p>
<p>The name of the attribute.</p></li>
<li><p><code>value</code></p>
<p>The attribute’s value.</p></li>
</ul>
<p>Modifying each value of an attribute set:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.mapAttrs</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">(</span><span class="va">name</span><span class="op">:</span> <span class="va">value</span><span class="op">:</span> name <span class="op">+</span> <span class="st">&quot;-&quot;</span> <span class="op">+</span> value<span class="op">)</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span> <span class="va">x</span> <span class="op">=</span> <span class="st">&quot;foo&quot;</span><span class="op">;</span> <span class="va">y</span> <span class="op">=</span> <span class="st">&quot;bar&quot;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">x</span> <span class="op">=</span> <span class="st">&quot;x-foo&quot;</span><span class="op">;</span> <span class="va">y</span> <span class="op">=</span> <span class="st">&quot;y-bar&quot;</span><span class="op">;</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.attrsets.mapattrs-1">lib.attrsets.mapAttrs’</h3>
<p><em>fn, name, value, set, name, value</em></p>
<p><code>mapAttrs&#39; :: (String -&gt; Any -&gt; { name = String; value = Any }) -&gt; AttrSet -&gt; AttrSet</code></p>
<p>Like mapAttrs, but allows the name of each attribute to be changed in
addition to the value. The applied function should return both the new
name and value as a nameValuePair.</p>
<ul>
<li><p><code>fn</code></p>
<p><literal>String -&gt; Any -&gt; { name = String; value = Any
}</literal></p></li>
<li><p><code>name</code></p>
<p>The name of the attribute.</p></li>
<li><p><code>value</code></p>
<p>The attribute’s value.</p></li>
<li><p><code>set</code></p>
<p>The attribute set to map over.</p></li>
<li><p><code>name</code></p>
<p>The name of the attribute.</p></li>
<li><p><code>value</code></p>
<p>The attribute’s value.</p></li>
</ul>
<p>Change the name and value of each attribute of an attribute set:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.mapAttrs&#39; <span class="op">(</span><span class="va">name</span><span class="op">:</span> <span class="va">value</span><span class="op">:</span> lib.attrsets.nameValuePair <span class="op">(</span><span class="st">&quot;foo_&quot;</span> <span class="op">+</span> name<span class="op">)</span> <span class="op">(</span><span class="st">&quot;bar-&quot;</span> <span class="op">+</span> value<span class="op">))</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>   <span class="op">{</span> <span class="va">x</span> <span class="op">=</span> <span class="st">&quot;a&quot;</span><span class="op">;</span> <span class="va">y</span> <span class="op">=</span> <span class="st">&quot;b&quot;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">foo_x</span> <span class="op">=</span> <span class="st">&quot;bar-a&quot;</span><span class="op">;</span> <span class="va">foo_y</span> <span class="op">=</span> <span class="st">&quot;bar-b&quot;</span><span class="op">;</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.attrsets.mapattrstolist">lib.attrsets.mapAttrsToList</h3>
<p><em>fn, name, value, set, name, value</em></p>
<p><code>mapAttrsToList :: (String -&gt; Any -&gt; Any) -&gt;    AttrSet -&gt; [Any]</code></p>
<p>Call fn for each attribute in the given set and return the result in
a list.</p>
<ul>
<li><p><code>fn</code></p>
<p><literal>String -&gt; Any -&gt; Any</literal></p></li>
<li><p><code>name</code></p>
<p>The name of the attribute.</p></li>
<li><p><code>value</code></p>
<p>The attribute’s value.</p></li>
<li><p><code>set</code></p>
<p>The attribute set to map over.</p></li>
<li><p><code>name</code></p>
<p>The name of the attribute.</p></li>
<li><p><code>value</code></p>
<p>The attribute’s value.</p></li>
</ul>
<p>Combine attribute values and names in to a list:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.mapAttrsToList <span class="op">(</span><span class="va">name</span><span class="op">:</span> <span class="va">value</span><span class="op">:</span> <span class="st">&quot;</span><span class="sc">${</span>name<span class="sc">}</span><span class="st">=</span><span class="sc">${</span>value<span class="sc">}</span><span class="st">&quot;</span><span class="op">)</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>   <span class="op">{</span> <span class="va">x</span> <span class="op">=</span> <span class="st">&quot;a&quot;</span><span class="op">;</span> <span class="va">y</span> <span class="op">=</span> <span class="st">&quot;b&quot;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="st">&quot;x=a&quot;</span> <span class="st">&quot;y=b&quot;</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.attrsets.mapattrsrecursive">lib.attrsets.mapAttrsRecursive</h3>
<p><em>f, name_path, value, set, name_path, value</em></p>
<p><code>mapAttrsRecursive :: ([String] &gt; Any -&gt; Any) -&gt; AttrSet -&gt; AttrSet</code></p>
<p>Like mapAttrs, except that it recursively applies itself to attribute
sets. Also, the first argument of the argument function is a list of the
names of the containing attributes.</p>
<ul>
<li><p><code>f</code></p>
<p><literal>[ String ] -&gt; Any -&gt; Any</literal></p></li>
<li><p><code>name_path</code></p>
<p>The list of attribute names to this value.</p></li>
<li><p><code>value</code></p>
<p>The attribute’s value.</p></li>
<li><p><code>set</code></p>
<p>The attribute set to recursively map over.</p></li>
<li><p><code>name_path</code></p>
<p>The list of attribute names to this value.</p></li>
<li><p><code>value</code></p>
<p>The attribute’s value.</p></li>
</ul>
<p>A contrived example of using lib.attrsets.mapAttrsRecursive:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>mapAttrsRecursive</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">(</span><span class="va">path</span><span class="op">:</span> <span class="va">value</span><span class="op">:</span> concatStringsSep <span class="st">&quot;-&quot;</span> <span class="op">(</span>path <span class="op">++</span> <span class="op">[</span>value<span class="op">]))</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">n</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>      <span class="va">a</span> <span class="op">=</span> <span class="st">&quot;A&quot;</span><span class="op">;</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>      <span class="va">m</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">b</span> <span class="op">=</span> <span class="st">&quot;B&quot;</span><span class="op">;</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>        <span class="va">c</span> <span class="op">=</span> <span class="st">&quot;C&quot;</span><span class="op">;</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>      <span class="op">};</span></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>    <span class="va">d</span> <span class="op">=</span> <span class="st">&quot;D&quot;</span><span class="op">;</span></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span></span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a>     <span class="va">n</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a>       <span class="va">a</span> <span class="op">=</span> <span class="st">&quot;n-a-A&quot;</span><span class="op">;</span></span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>       <span class="va">m</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a>         <span class="va">b</span> <span class="op">=</span> <span class="st">&quot;n-m-b-B&quot;</span><span class="op">;</span></span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true" tabindex="-1"></a>         <span class="va">c</span> <span class="op">=</span> <span class="st">&quot;n-m-c-C&quot;</span><span class="op">;</span></span>
<span id="cb73-19"><a href="#cb73-19" aria-hidden="true" tabindex="-1"></a>       <span class="op">};</span></span>
<span id="cb73-20"><a href="#cb73-20" aria-hidden="true" tabindex="-1"></a>     <span class="op">};</span></span>
<span id="cb73-21"><a href="#cb73-21" aria-hidden="true" tabindex="-1"></a>     <span class="va">d</span> <span class="op">=</span> <span class="st">&quot;d-D&quot;</span><span class="op">;</span></span>
<span id="cb73-22"><a href="#cb73-22" aria-hidden="true" tabindex="-1"></a>   <span class="op">}</span></span></code></pre></div>
<h3 id="lib.attrsets.mapattrsrecursivecond">lib.attrsets.mapAttrsRecursiveCond</h3>
<p><em>cond, attributeset, f, name_path, value, set, attributeset,
name_path, value</em></p>
<p><code>mapAttrsRecursiveCond :: (AttrSet -&gt; Bool) -&gt; ([ String ] -&gt; Any -&gt; Any) -&gt; AttrSet -&gt; AttrSet</code></p>
<p>Like mapAttrsRecursive, but it takes an additional predicate function
that tells it whether to recursive into an attribute set. If it returns
false, mapAttrsRecursiveCond does not recurse, but does apply the map
function. It is returns true, it does recurse, and does not apply the
map function.</p>
<ul>
<li><p><code>cond</code></p>
<p><literal>(AttrSet -&gt; Bool)</literal></p></li>
<li><p><code>attributeset</code></p>
<p>An attribute set.</p></li>
<li><p><code>f</code></p>
<p><literal>[ String ] -&gt; Any -&gt; Any</literal></p></li>
<li><p><code>name_path</code></p>
<p>The list of attribute names to this value.</p></li>
<li><p><code>value</code></p>
<p>The attribute’s value.</p></li>
<li><p><code>set</code></p>
<p>The attribute set to recursively map over.</p></li>
<li><p><code>attributeset</code></p>
<p>An attribute set.</p></li>
<li><p><code>name_path</code></p>
<p>The list of attribute names to this value.</p></li>
<li><p><code>value</code></p>
<p>The attribute’s value.</p></li>
</ul>
<p>Only convert attribute values to JSON if the containing attribute set
is marked for recursion:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.mapAttrsRecursiveCond</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">({</span> <span class="va">recurse</span> <span class="op">?</span> <span class="cn">false</span><span class="op">,</span> <span class="op">...</span> <span class="op">}</span>: recurse<span class="op">)</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">(</span><span class="va">name</span><span class="op">:</span> <span class="va">value</span><span class="op">:</span> <span class="bu">builtins</span>.toJSON value<span class="op">)</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">dorecur</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>      <span class="va">recurse</span> <span class="op">=</span> <span class="cn">true</span><span class="op">;</span></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>      <span class="va">hello</span> <span class="op">=</span> <span class="st">&quot;there&quot;</span><span class="op">;</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>    <span class="va">dontrecur</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>      <span class="va">converted-to-</span> <span class="op">=</span> <span class="st">&quot;json&quot;</span><span class="op">;</span></span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span></span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>     <span class="va">dorecur</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a>       <span class="va">hello</span> <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">there</span><span class="sc">\&quot;</span><span class="st">&quot;</span><span class="op">;</span></span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a>       <span class="va">recurse</span> <span class="op">=</span> <span class="st">&quot;true&quot;</span><span class="op">;</span></span>
<span id="cb74-17"><a href="#cb74-17" aria-hidden="true" tabindex="-1"></a>     <span class="op">};</span></span>
<span id="cb74-18"><a href="#cb74-18" aria-hidden="true" tabindex="-1"></a>     <span class="va">dontrecur</span> <span class="op">=</span> <span class="st">&quot;{</span><span class="sc">\&quot;</span><span class="st">converted-to</span><span class="sc">\&quot;</span><span class="st">:</span><span class="sc">\&quot;</span><span class="st">json</span><span class="sc">\&quot;</span><span class="st">}&quot;</span><span class="op">;</span></span>
<span id="cb74-19"><a href="#cb74-19" aria-hidden="true" tabindex="-1"></a>   <span class="op">}</span></span></code></pre></div>
<h3 id="lib.attrsets.genattrs">lib.attrsets.genAttrs</h3>
<p><em>names, f, name, name</em></p>
<p><code>genAttrs :: [ String ] -&gt; (String -&gt; Any) -&gt; AttrSet</code></p>
<p>Generate an attribute set by mapping a function over a list of
attribute names.</p>
<ul>
<li><p><code>names</code></p>
<p>Names of values in the resulting attribute set.</p></li>
<li><p><code>f</code></p>
<p><literal>String -&gt; Any</literal></p></li>
<li><p><code>name</code></p>
<p>The name of the attribute to generate a value for.</p></li>
<li><p><code>name</code></p>
<p>The name of the attribute to generate a value for.</p></li>
</ul>
<p>Generate an attrset based on names only:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.genAttrs <span class="op">[</span> <span class="st">&quot;foo&quot;</span> <span class="st">&quot;bar&quot;</span> <span class="op">]</span> <span class="op">(</span><span class="va">name</span><span class="op">:</span> <span class="st">&quot;x_</span><span class="sc">${</span>name<span class="sc">}</span><span class="st">&quot;</span><span class="op">)</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">foo</span> <span class="op">=</span> <span class="st">&quot;x_foo&quot;</span><span class="op">;</span> <span class="va">bar</span> <span class="op">=</span> <span class="st">&quot;x_bar&quot;</span><span class="op">;</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.attrsets.isderivation">lib.attrsets.isDerivation</h3>
<p><em>value</em></p>
<p><code>isDerivation :: Any -&gt; Bool</code></p>
<p>Check whether the argument is a derivation. Any set with { type =
“derivation”; } counts as a derivation.</p>
<ul>
<li><p><code>value</code></p>
<p>The value which is possibly a derivation.</p></li>
</ul>
<p>A package is a derivation:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.isDerivation <span class="op">(</span><span class="bu">import</span> &lt;nixpkgs&gt; <span class="op">{})</span>.ruby</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span></code></pre></div>
<p>Anything else is not a derivation:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.isDerivation <span class="st">&quot;foobar&quot;</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">false</span></span></code></pre></div>
<h3 id="lib.attrsets.toderivation">lib.attrsets.toDerivation</h3>
<p><em>path</em></p>
<p><code>toDerivation :: Path -&gt; Derivation</code></p>
<p>Converts a store path to a fake derivation.</p>
<ul>
<li><p><code>path</code></p>
<p>A store path to convert to a derivation.</p></li>
</ul>
<h3 id="lib.attrsets.optionalattrs">lib.attrsets.optionalAttrs</h3>
<p><em>cond, as</em></p>
<p><code>optionalAttrs :: Bool -&gt; AttrSet</code></p>
<p>Conditionally return an attribute set or an empty attribute set.</p>
<ul>
<li><p><code>cond</code></p>
<p>Condition under which the <var>as</var> attribute set is
returned.</p></li>
<li><p><code>as</code></p>
<p>The attribute set to return if <var>cond</var> is true.</p></li>
</ul>
<p>Return the provided attribute set when cond is true:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.optionalAttrs <span class="cn">true</span> <span class="op">{</span> <span class="va">my</span> <span class="op">=</span> <span class="st">&quot;set&quot;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">my</span> <span class="op">=</span> <span class="st">&quot;set&quot;</span><span class="op">;</span> <span class="op">}</span></span></code></pre></div>
<p>Return an empty attribute set when cond is false:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.optionalAttrs <span class="cn">false</span> <span class="op">{</span> <span class="va">my</span> <span class="op">=</span> <span class="st">&quot;set&quot;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.attrsets.zipattrswithnames">lib.attrsets.zipAttrsWithNames</h3>
<p><em>names, f, name, vs, sets, name, vs</em></p>
<p><code>zipAttrsWithNames :: [ String ] -&gt; (String -&gt; [ Any ] -&gt; Any) -&gt; [ AttrSet ] -&gt; AttrSet</code></p>
<p>Merge sets of attributes and use the function f to merge attribute
values where the attribute name is in names.</p>
<ul>
<li><p><code>names</code></p>
<p>A list of attribute names to zip.</p></li>
<li><p><code>f</code></p>
<p><literal>(String -&gt; [ Any ] -&gt; Any</literal></p></li>
<li><p><code>name</code></p>
<p>The name of the attribute each value came from.</p></li>
<li><p><code>vs</code></p>
<p>A list of values collected from the list of attribute sets.</p></li>
<li><p><code>sets</code></p>
<p>A list of attribute sets to zip together.</p></li>
<li><p><code>name</code></p>
<p>The name of the attribute each value came from.</p></li>
<li><p><code>vs</code></p>
<p>A list of values collected from the list of attribute sets.</p></li>
</ul>
<p>Summing a list of attribute sets of numbers:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.zipAttrsWithNames</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span> <span class="op">]</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">(</span><span class="va">name</span><span class="op">:</span> <span class="va">vals</span><span class="op">:</span> <span class="st">&quot;</span><span class="sc">${</span>name<span class="sc">}</span><span class="st"> </span><span class="sc">${</span><span class="bu">toString</span> <span class="op">(</span><span class="bu">builtins</span>.foldl&#39; <span class="op">(</span><span class="va">a</span><span class="op">:</span> <span class="va">b</span><span class="op">:</span> a <span class="op">+</span> b<span class="op">)</span> <span class="dv">0</span> vals<span class="op">)</span><span class="sc">}</span><span class="st">&quot;</span><span class="op">)</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="va">c</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">100</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> <span class="va">c</span> <span class="op">=</span> <span class="dv">1000</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a>  <span class="op">]</span></span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="st">&quot;a 11&quot;</span><span class="op">;</span> <span class="va">b</span> <span class="op">=</span> <span class="st">&quot;b 101&quot;</span><span class="op">;</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.attrsets.zipattrswith">lib.attrsets.zipAttrsWith</h3>
<p><em>f, name, vs, sets, name, vs</em></p>
<p><code>zipAttrsWith :: (String -&gt; [ Any ] -&gt; Any) -&gt; [ AttrSet ] -&gt; AttrSet</code></p>
<p>Merge sets of attributes and use the function f to merge attribute
values. Similar to where all key names are passed for names.</p>
<ul>
<li><p><code>f</code></p>
<p><literal>(String -&gt; [ Any ] -&gt; Any</literal></p></li>
<li><p><code>name</code></p>
<p>The name of the attribute each value came from.</p></li>
<li><p><code>vs</code></p>
<p>A list of values collected from the list of attribute sets.</p></li>
<li><p><code>sets</code></p>
<p>A list of attribute sets to zip together.</p></li>
<li><p><code>name</code></p>
<p>The name of the attribute each value came from.</p></li>
<li><p><code>vs</code></p>
<p>A list of values collected from the list of attribute sets.</p></li>
</ul>
<p>Summing a list of attribute sets of numbers:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.zipAttrsWith</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">(</span><span class="va">name</span><span class="op">:</span> <span class="va">vals</span><span class="op">:</span> <span class="st">&quot;</span><span class="sc">${</span>name<span class="sc">}</span><span class="st"> </span><span class="sc">${</span><span class="bu">toString</span> <span class="op">(</span><span class="bu">builtins</span>.foldl&#39; <span class="op">(</span><span class="va">a</span><span class="op">:</span> <span class="va">b</span><span class="op">:</span> a <span class="op">+</span> b<span class="op">)</span> <span class="dv">0</span> vals<span class="op">)</span><span class="sc">}</span><span class="st">&quot;</span><span class="op">)</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="va">c</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">100</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> <span class="va">c</span> <span class="op">=</span> <span class="dv">1000</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>  <span class="op">]</span></span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="st">&quot;a 11&quot;</span><span class="op">;</span> <span class="va">b</span> <span class="op">=</span> <span class="st">&quot;b 101&quot;</span><span class="op">;</span> <span class="va">c</span> <span class="op">=</span> <span class="st">&quot;c 1001&quot;</span><span class="op">;</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.attrsets.zipattrs">lib.attrsets.zipAttrs</h3>
<p><em>sets</em></p>
<p><code>zipAttrs :: [ AttrSet ] -&gt; AttrSet</code></p>
<p>Merge sets of attributes and combine each attribute value in to a
list. Similar to where the merge function returns a list of all
values.</p>
<ul>
<li><p><code>sets</code></p>
<p>A list of attribute sets to zip together.</p></li>
</ul>
<p>Combining a list of attribute sets:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.zipAttrs</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="va">c</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">100</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> <span class="va">c</span> <span class="op">=</span> <span class="dv">1000</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>  <span class="op">]</span></span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="op">[</span> <span class="dv">1</span> <span class="dv">10</span> <span class="op">];</span> <span class="va">b</span> <span class="op">=</span> <span class="op">[</span> <span class="dv">1</span> <span class="dv">100</span> <span class="op">];</span> <span class="va">c</span> <span class="op">=</span> <span class="op">[</span> <span class="dv">1</span> <span class="dv">1000</span> <span class="op">];</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.attrsets.recursiveupdateuntil">lib.attrsets.recursiveUpdateUntil</h3>
<p><em>pred, path, l, r, lhs, rhs, path, l, r</em></p>
<p><code>recursiveUpdateUntil :: ( [ String ] -&gt; AttrSet -&gt; AttrSet -&gt; Bool ) -&gt; AttrSet -&gt; AttrSet -&gt; AttrSet</code></p>
<p>Does the same as the update operator // except that attributes are
merged until the given predicate is verified. The predicate should
accept 3 arguments which are the path to reach the attribute, a part of
the first attribute set and a part of the second attribute set. When the
predicate is verified, the value of the first attribute set is replaced
by the value of the second attribute set.</p>
<ul>
<li><p><code>pred</code></p>
<p><literal>[ String ] -&gt; AttrSet -&gt; AttrSet -&gt;
Bool</literal></p></li>
<li><p><code>path</code></p>
<p>The path to the values in the left and right hand sides.</p></li>
<li><p><code>l</code></p>
<p>The left hand side value.</p></li>
<li><p><code>r</code></p>
<p>The right hand side value.</p></li>
<li><p><code>lhs</code></p>
<p>The left hand attribute set of the merge.</p></li>
<li><p><code>rhs</code></p>
<p>The right hand attribute set of the merge.</p></li>
<li><p><code>path</code></p>
<p>The path to the values in the left and right hand sides.</p></li>
<li><p><code>l</code></p>
<p>The left hand side value.</p></li>
<li><p><code>r</code></p>
<p>The right hand side value.</p></li>
</ul>
<p>Recursively merging two attribute sets:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>lib.attrsets.recursiveUpdateUntil <span class="op">(</span><span class="va">path</span><span class="op">:</span> <span class="va">l</span><span class="op">:</span> <span class="va">r</span><span class="op">:</span> path == <span class="op">[</span><span class="st">&quot;foo&quot;</span><span class="op">])</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># first attribute set</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">foo</span>.<span class="va">bar</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">foo</span>.<span class="va">baz</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>    <span class="va">bar</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span></span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">#second attribute set</span></span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>    <span class="va">foo</span>.<span class="va">bar</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a>    <span class="va">foo</span>.<span class="va">quz</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a>    <span class="va">baz</span> <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span></span>
<span id="cb83-15"><a href="#cb83-15" aria-hidden="true" tabindex="-1"></a>  <span class="va">foo</span>.<span class="va">bar</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="co"># &#39;foo.*&#39; from the second set</span></span>
<span id="cb83-16"><a href="#cb83-16" aria-hidden="true" tabindex="-1"></a>  <span class="va">foo</span>.<span class="va">quz</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="co">#</span></span>
<span id="cb83-17"><a href="#cb83-17" aria-hidden="true" tabindex="-1"></a>  <span class="va">bar</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span>     <span class="co"># &#39;bar&#39; from the first set</span></span>
<span id="cb83-18"><a href="#cb83-18" aria-hidden="true" tabindex="-1"></a>  <span class="va">baz</span> <span class="op">=</span> <span class="dv">4</span><span class="op">;</span>     <span class="co"># &#39;baz&#39; from the second set</span></span>
<span id="cb83-19"><a href="#cb83-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="lib.attrsets.recursiveupdate">lib.attrsets.recursiveUpdate</h3>
<p><em>lhs, rhs</em></p>
<p><code>recursiveUpdate :: AttrSet -&gt; AttrSet -&gt; AttrSet</code></p>
<p>A recursive variant of the update operator //. The recursion stops
when one of the attribute values is not an attribute set, in which case
the right hand side value takes precedence over the left hand side
value.</p>
<ul>
<li><p><code>lhs</code></p>
<p>The left hand attribute set of the merge.</p></li>
<li><p><code>rhs</code></p>
<p>The right hand attribute set of the merge.</p></li>
</ul>
<p>Recursively merging two attribute sets:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>recursiveUpdate</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>    <span class="va">boot</span>.<span class="va">loader</span>.<span class="va">grub</span>.<span class="va">enable</span> <span class="op">=</span> <span class="cn">true</span><span class="op">;</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">boot</span>.<span class="va">loader</span>.<span class="va">grub</span>.<span class="va">device</span> <span class="op">=</span> <span class="st">&quot;/dev/hda&quot;</span><span class="op">;</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>    <span class="va">boot</span>.<span class="va">loader</span>.<span class="va">grub</span>.<span class="va">device</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span></span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>  <span class="va">boot</span>.<span class="va">loader</span>.<span class="va">grub</span>.<span class="va">enable</span> <span class="op">=</span> <span class="cn">true</span><span class="op">;</span></span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a>  <span class="va">boot</span>.<span class="va">loader</span>.<span class="va">grub</span>.<span class="va">device</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span></span>
<span id="cb84-12"><a href="#cb84-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="lib.attrsets.recurseintoattrs">lib.attrsets.recurseIntoAttrs</h3>
<p><em>attrs</em></p>
<p><code>recurseIntoAttrs :: AttrSet -&gt; AttrSet</code></p>
<p>Make various Nix tools consider the contents of the resulting
attribute set when looking for what to build, find, etc.</p>
<ul>
<li><p><code>attrs</code></p>
<p>An attribute set to scan for derivations.</p></li>
</ul>
<p>Making Nix look inside an attribute set:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="va">pkgs</span> <span class="op">?</span> <span class="bu">import</span> &lt;nixpkgs&gt; <span class="op">{}</span> <span class="op">}</span>:</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">myTools</span> <span class="op">=</span> pkgs.lib.recurseIntoAttrs <span class="op">{</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">inherit</span> <span class="op">(</span>pkgs<span class="op">)</span> hello figlet<span class="op">;</span></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">};</span></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="lib.attrsets.cartesianproductofsets">lib.attrsets.cartesianProductOfSets</h3>
<p><em>set</em></p>
<p><code>cartesianProductOfSets :: AttrSet -&gt; [ AttrSet ]</code></p>
<p>Return the cartesian product of attribute set value combinations.</p>
<ul>
<li><p><code>set</code></p>
<p>An attribute set with attributes that carry lists of values.</p></li>
</ul>
<p>Creating the cartesian product of a list of attribute values:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>cartesianProductOfSets <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="op">];</span> <span class="va">b</span> <span class="op">=</span> <span class="op">[</span> <span class="dv">10</span> <span class="dv">20</span> <span class="op">];</span> <span class="op">}</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>     <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>     <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">20</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>     <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>     <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">20</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>   <span class="op">]</span></span></code></pre></div>
<h2 id="customisation-functions">Customisation functions</h2>
<h3 id="lib.customisation.overridederivation">lib.customisation.overrideDerivation</h3>
<p><em>drv, f</em></p>
<p><code>overrideDerivation drv f&#39; takes a derivation (i.e., the result of a call to the builtin function</code>derivation’)
and returns a new derivation in which the attributes of the original are
overridden according to the function <code>f&#39;.  The function</code>f’ is
called with the original derivation attributes.</p>
<ul>
<li><p><code>drv</code></p>
<p>Function argument</p></li>
<li><p><code>f</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.customisation.makeoverridable">lib.customisation.makeOverridable</h3>
<p><em>f, origArgs</em></p>
<p><code>makeOverridable</code> takes a function from attribute set to
attribute set and injects <code>override</code> attribute which can be
used to override arguments of the function.</p>
<ul>
<li><p><code>f</code></p>
<p>Function argument</p></li>
<li><p><code>origArgs</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.customisation.callpackagewith">lib.customisation.callPackageWith</h3>
<p><em>autoArgs, fn, args</em></p>
<p>Call the package function in the file
<code>fn&#39; with the required arguments automatically.  The function is called with the arguments</code>args’,
but any missing arguments are obtained from `autoArgs’. This function is
intended to be partially parameterised, e.g.,</p>
<ul>
<li><p><code>autoArgs</code></p>
<p>Function argument</p></li>
<li><p><code>fn</code></p>
<p>Function argument</p></li>
<li><p><code>args</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.customisation.callpackageswith">lib.customisation.callPackagesWith</h3>
<p><em>autoArgs, fn, args</em></p>
<p>Like callPackage, but for a function that returns an attribute set of
derivations. The override function is added to the individual
attributes.</p>
<ul>
<li><p><code>autoArgs</code></p>
<p>Function argument</p></li>
<li><p><code>fn</code></p>
<p>Function argument</p></li>
<li><p><code>args</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.customisation.extendderivation">lib.customisation.extendDerivation</h3>
<p><em>condition, passthru, drv</em></p>
<p>Add attributes to each output of a derivation without changing the
derivation itself and check a given condition when evaluating.</p>
<ul>
<li><p><code>condition</code></p>
<p>Function argument</p></li>
<li><p><code>passthru</code></p>
<p>Function argument</p></li>
<li><p><code>drv</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.customisation.hydrajob">lib.customisation.hydraJob</h3>
<p><em>drv</em></p>
<p>Strip a derivation of all non-essential attributes, returning only
those needed by hydra-eval-jobs. Also strictly evaluate the result to
ensure that there are no thunks kept alive to prevent garbage
collection.</p>
<ul>
<li><p><code>drv</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.customisation.makescope">lib.customisation.makeScope</h3>
<p><em>newScope, f</em></p>
<p>Make a set of packages with a common scope. All packages called with
the provided
<code>callPackage&#39; will be evaluated with the same arguments. Any package in the set may depend on any other. The</code>overrideScope’<code>function allows subsequent modification of the package set in a consistent way, i.e. all packages in the set will be called with the overridden packages. The package sets may be hierarchical: the packages in the set are called with the scope provided by</code>newScope’
and the set provides a `newScope’ attribute which can form the parent
scope for later package sets.</p>
<ul>
<li><p><code>newScope</code></p>
<p>Function argument</p></li>
<li><p><code>f</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.customisation.makescopewithsplicing">lib.customisation.makeScopeWithSplicing</h3>
<p><em>splicePackages, newScope, otherSplices, keep, extra, f</em></p>
<p>Like the above, but aims to support cross compilation. It’s still
ugly, but hopefully it helps a little bit.</p>
<ul>
<li><p><code>splicePackages</code></p>
<p>Function argument</p></li>
<li><p><code>newScope</code></p>
<p>Function argument</p></li>
<li><p><code>otherSplices</code></p>
<p>Function argument</p></li>
<li><p><code>keep</code></p>
<p>Function argument</p></li>
<li><p><code>extra</code></p>
<p>Function argument</p></li>
<li><p><code>f</code></p>
<p>Function argument</p></li>
</ul>
<h2 id="debugging-functions">Debugging functions</h2>
<h3 id="lib.debug.traceif">lib.debug.traceIf</h3>
<p><em>pred, msg, x</em></p>
<p><code>traceIf :: bool -&gt; string -&gt; a -&gt; a</code></p>
<p>Conditionally trace the supplied message, based on a predicate.</p>
<ul>
<li><p><code>pred</code></p>
<p>Predicate to check</p></li>
<li><p><code>msg</code></p>
<p>Message that should be traced</p></li>
<li><p><code>x</code></p>
<p>Value to return</p></li>
</ul>
<p>lib.debug.traceIf usage example:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>traceIf <span class="cn">true</span> <span class="st">&quot;hello&quot;</span> <span class="dv">3</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="va">trace</span><span class="op">:</span> hello</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">3</span></span></code></pre></div>
<h3 id="lib.debug.tracevalfn">lib.debug.traceValFn</h3>
<p><em>f, x</em></p>
<p><code>traceValFn :: (a -&gt; b) -&gt; a -&gt; a</code></p>
<p>Trace the supplied value after applying a function to it, and return
the original value.</p>
<ul>
<li><p><code>f</code></p>
<p>Function to apply</p></li>
<li><p><code>x</code></p>
<p>Value to trace and return</p></li>
</ul>
<p>lib.debug.traceValFn usage example:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>traceValFn <span class="op">(</span><span class="va">v</span><span class="op">:</span> <span class="st">&quot;mystring </span><span class="sc">${</span>v<span class="sc">}</span><span class="st">&quot;</span><span class="op">)</span> <span class="st">&quot;foo&quot;</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="va">trace</span><span class="op">:</span> mystring foo</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;foo&quot;</span></span></code></pre></div>
<h3 id="lib.debug.traceval">lib.debug.traceVal</h3>
<p>__</p>
<p><code>traceVal :: a -&gt; a</code></p>
<p>Trace the supplied value and return it.</p>
<p>lib.debug.traceVal usage example:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>traceVal <span class="dv">42</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="co"># trace: 42</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">42</span></span></code></pre></div>
<h3 id="lib.debug.traceseq">lib.debug.traceSeq</h3>
<p><em>x, y</em></p>
<p><code>traceSeq :: a -&gt; b -&gt; b</code></p>
<p><code>builtins.trace</code>, but the value is
<code>builtins.deepSeq</code>ed first.</p>
<ul>
<li><p><code>x</code></p>
<p>The value to trace</p></li>
<li><p><code>y</code></p>
<p>The value to return</p></li>
</ul>
<p>lib.debug.traceSeq usage example:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>trace <span class="op">{</span> <span class="va">a</span>.<span class="va">b</span>.<span class="va">c</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="op">}</span> <span class="cn">null</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="va">trace</span><span class="op">:</span> <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> &lt;CODE&gt;<span class="op">;</span> <span class="op">}</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">null</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>traceSeq <span class="op">{</span> <span class="va">a</span>.<span class="va">b</span>.<span class="va">c</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="op">}</span> <span class="cn">null</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a><span class="va">trace</span><span class="op">:</span> <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="op">{</span> <span class="va">b</span> <span class="op">=</span> <span class="op">{</span> <span class="va">c</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="op">};</span> <span class="op">};</span> <span class="op">}</span></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">null</span></span></code></pre></div>
<h3 id="lib.debug.traceseqn">lib.debug.traceSeqN</h3>
<p><em>depth, x, y</em></p>
<p>Like <code>traceSeq</code>, but only evaluate down to depth n. This
is very useful because lots of <code>traceSeq</code> usages lead to an
infinite recursion.</p>
<ul>
<li><p><code>depth</code></p>
<p>Function argument</p></li>
<li><p><code>x</code></p>
<p>Function argument</p></li>
<li><p><code>y</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.debug.traceSeqN usage example:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>traceSeqN <span class="dv">2</span> <span class="op">{</span> <span class="va">a</span>.<span class="va">b</span>.<span class="va">c</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="op">}</span> <span class="cn">null</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="va">trace</span><span class="op">:</span> <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="op">{</span> <span class="va">b</span> <span class="op">=</span> <span class="op">{</span>…<span class="op">};</span> <span class="op">};</span> <span class="op">}</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">null</span></span></code></pre></div>
<h3 id="lib.debug.tracevalseqfn">lib.debug.traceValSeqFn</h3>
<p><em>f, v</em></p>
<p>A combination of <code>traceVal</code> and <code>traceSeq</code> that
applies a provided function to the value to be traced after
<code>deepSeq</code>ing it.</p>
<ul>
<li><p><code>f</code></p>
<p>Function to apply</p></li>
<li><p><code>v</code></p>
<p>Value to trace</p></li>
</ul>
<h3 id="lib.debug.tracevalseq">lib.debug.traceValSeq</h3>
<p>__</p>
<p>A combination of <code>traceVal</code> and <code>traceSeq</code>.</p>
<h3 id="lib.debug.tracevalseqnfn">lib.debug.traceValSeqNFn</h3>
<p><em>f, depth, v</em></p>
<p>A combination of <code>traceVal</code> and <code>traceSeqN</code>
that applies a provided function to the value to be traced.</p>
<ul>
<li><p><code>f</code></p>
<p>Function to apply</p></li>
<li><p><code>depth</code></p>
<p>Function argument</p></li>
<li><p><code>v</code></p>
<p>Value to trace</p></li>
</ul>
<h3 id="lib.debug.tracevalseqn">lib.debug.traceValSeqN</h3>
<p>__</p>
<p>A combination of <code>traceVal</code> and
<code>traceSeqN</code>.</p>
<h3 id="lib.debug.tracefnseqn">lib.debug.traceFnSeqN</h3>
<p><em>depth, name, f, v</em></p>
<p>Trace the input and output of a function <code>f</code> named
<code>name</code>, both down to <code>depth</code>.</p>
<ul>
<li><p><code>depth</code></p>
<p>Function argument</p></li>
<li><p><code>name</code></p>
<p>Function argument</p></li>
<li><p><code>f</code></p>
<p>Function argument</p></li>
<li><p><code>v</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.debug.traceFnSeqN usage example:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>traceFnSeqN <span class="dv">2</span> <span class="st">&quot;id&quot;</span> <span class="op">(</span><span class="va">x</span><span class="op">:</span> x<span class="op">)</span> <span class="op">{</span> <span class="va">a</span>.<span class="va">b</span>.<span class="va">c</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="va">trace</span><span class="op">:</span> <span class="op">{</span> <span class="va">fn</span> <span class="op">=</span> <span class="st">&quot;id&quot;</span><span class="op">;</span> <span class="va">from</span> <span class="op">=</span> <span class="op">{</span> <span class="va">a</span>.<span class="va">b</span> <span class="op">=</span> <span class="op">{</span>…<span class="op">};</span> <span class="op">};</span> <span class="va">to</span> <span class="op">=</span> <span class="op">{</span> <span class="va">a</span>.<span class="va">b</span> <span class="op">=</span> <span class="op">{</span>…<span class="op">};</span> <span class="op">};</span> <span class="op">}</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">a</span>.<span class="va">b</span>.<span class="va">c</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.debug.runtests">lib.debug.runTests</h3>
<p><em>tests</em></p>
<p>Evaluate a set of tests. A test is an attribute set
<code>{expr, expected}</code>, denoting an expression and its expected
result. The result is a list of failed tests, each represented as
<code>{name, expected, actual}</code>, denoting the attribute name of
the failing test and its expected and actual results.</p>
<ul>
<li><p><code>tests</code></p>
<p>Tests to run</p></li>
</ul>
<h3 id="lib.debug.testalltrue">lib.debug.testAllTrue</h3>
<p><em>expr</em></p>
<p>Create a test assuming that list elements are <code>true</code>.</p>
<ul>
<li><p><code>expr</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.debug.testAllTrue usage example:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="va">testX</span> <span class="op">=</span> allTrue <span class="op">[</span> <span class="cn">true</span> <span class="op">];</span> <span class="op">}</span></span></code></pre></div>
<h2 id="generator-functions">Generator functions</h2>
<h3 id="lib.generators.mkvaluestringdefault">lib.generators.mkValueStringDefault</h3>
<p><em>v</em></p>
<p>Convert a value to a sensible default string representation. * The
builtin <code>toString</code> function has some strange defaults, *
suitable for bash scripts but not much else.</p>
<ul>
<li><p><code>v</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.generators.mkkeyvaluedefault">lib.generators.mkKeyValueDefault</h3>
<p><em>pattern, mkValueString, sep, k, v, mkValueString</em></p>
<p>Generate a line of key k and value v, separated by * character sep.
If sep appears in k, it is escaped. * Helper for synaxes with different
separators. <em> </em> mkValueString specifies how values should be
formatted. <em> </em> mkKeyValueDefault {} “:” “f:oo” “bar” * &gt;
“f:oo:bar”</p>
<ul>
<li><p><code>pattern</code></p>
<p>Structured function argument</p></li>
<li><p><code>mkValueString</code></p>
<p>Function argument</p></li>
<li><p><code>sep</code></p>
<p>Function argument</p></li>
<li><p><code>k</code></p>
<p>Function argument</p></li>
<li><p><code>v</code></p>
<p>Function argument</p></li>
<li><p><code>mkValueString</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.generators.tokeyvalue">lib.generators.toKeyValue</h3>
<p><em>pattern, mkKeyValue, listsAsDuplicateKeys, mkKeyValue,
listsAsDuplicateKeys</em></p>
<p>Generate a key-value-style config file from an attrset. <em> </em>
mkKeyValue is the same as in toINI.</p>
<ul>
<li><p><code>pattern</code></p>
<p>Structured function argument</p></li>
<li><p><code>mkKeyValue</code></p>
<p>Function argument</p></li>
<li><p><code>listsAsDuplicateKeys</code></p>
<p>Function argument</p></li>
<li><p><code>mkKeyValue</code></p>
<p>Function argument</p></li>
<li><p><code>listsAsDuplicateKeys</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.generators.toini">lib.generators.toINI</h3>
<p><em>pattern, mkSectionName, mkKeyValue, listsAsDuplicateKeys,
attrsOfAttrs, mkSectionName, mkKeyValue, listsAsDuplicateKeys</em></p>
<p>Generate an INI-style config file from an * attrset of sections to an
attrset of key-value pairs. <em> </em> generators.toINI {} { * foo = {
hi = “${pkgs.hello}”; ciao = “bar”; }; * baz = { “also, integers” = 42;
}; * } <em> </em>&gt; [baz] <em>&gt; also, integers=42 </em>&gt;
<em>&gt; [foo] </em>&gt; ciao=bar <em>&gt;
hi=/nix/store/y93qql1p5ggfnaqjjqhxcw0vqw95rlz0-hello-2.10 </em> * The
mk* configuration attributes can generically change * the way sections
and key-value strings are generated. <em> </em> For more examples see
the test cases in ./tests/misc.nix.</p>
<ul>
<li><p><code>pattern</code></p>
<p>Structured function argument</p></li>
<li><p><code>mkSectionName</code></p>
<p>apply transformations (e.g. escapes) to section names</p></li>
<li><p><code>mkKeyValue</code></p>
<p>format a setting line from key and value</p></li>
<li><p><code>listsAsDuplicateKeys</code></p>
<p>allow lists as values for duplicate keys</p></li>
<li><p><code>attrsOfAttrs</code></p>
<p>Function argument</p></li>
<li><p><code>mkSectionName</code></p>
<p>apply transformations (e.g. escapes) to section names</p></li>
<li><p><code>mkKeyValue</code></p>
<p>format a setting line from key and value</p></li>
<li><p><code>listsAsDuplicateKeys</code></p>
<p>allow lists as values for duplicate keys</p></li>
</ul>
<h3 id="lib.generators.toiniwithglobalsection">lib.generators.toINIWithGlobalSection</h3>
<p><em>pattern, mkSectionName, mkKeyValue, listsAsDuplicateKeys,
pattern, globalSection, sections, mkSectionName, mkKeyValue,
listsAsDuplicateKeys, globalSection, sections</em></p>
<p>Generate an INI-style config file from an attrset * specifying the
global section (no header), and an * attrset of sections to an attrset
of key-value pairs. <em> </em> generators.toINIWithGlobalSection {} { *
globalSection = { * someGlobalKey = “hi”; * }; * sections = { * foo = {
hi = “${pkgs.hello}”; ciao = “bar”; }; * baz = { “also, integers” = 42;
}; * } <em> </em>&gt; someGlobalKey=hi <em>&gt; </em>&gt; [baz] <em>&gt;
also, integers=42 </em>&gt; <em>&gt; [foo] </em>&gt; ciao=bar <em>&gt;
hi=/nix/store/y93qql1p5ggfnaqjjqhxcw0vqw95rlz0-hello-2.10 </em> * The
mk* configuration attributes can generically change * the way sections
and key-value strings are generated. <em> </em> For more examples see
the test cases in ./tests/misc.nix. <em> </em> If you don’t need a
global section, you can also use * <code>generators.toINI</code>
directly, which only takes * the part in <code>sections</code>.</p>
<ul>
<li><p><code>pattern</code></p>
<p>Structured function argument</p></li>
<li><p><code>mkSectionName</code></p>
<p>apply transformations (e.g. escapes) to section names</p></li>
<li><p><code>mkKeyValue</code></p>
<p>format a setting line from key and value</p></li>
<li><p><code>listsAsDuplicateKeys</code></p>
<p>allow lists as values for duplicate keys</p></li>
<li><p><code>pattern</code></p>
<p>Structured function argument</p></li>
<li><p><code>globalSection</code></p>
<p>Function argument</p></li>
<li><p><code>sections</code></p>
<p>Function argument</p></li>
<li><p><code>mkSectionName</code></p>
<p>apply transformations (e.g. escapes) to section names</p></li>
<li><p><code>mkKeyValue</code></p>
<p>format a setting line from key and value</p></li>
<li><p><code>listsAsDuplicateKeys</code></p>
<p>allow lists as values for duplicate keys</p></li>
<li><p><code>globalSection</code></p>
<p>Function argument</p></li>
<li><p><code>sections</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.generators.togitini">lib.generators.toGitINI</h3>
<p><em>attrs</em></p>
<p>Generate a git-config file from an attrset. <em> </em> It has two
major differences from the regular INI format: <em> </em> 1. values are
indented with tabs * 2. sections can have sub-sections <em> </em>
generators.toGitINI { * url.”ssh://git@github.com/“.insteadOf
=”https://github.com”; * user.name = “edolstra”; * } <em> </em>&gt; [url
“ssh://git@github.com/”] <em>&gt; insteadOf = https://github.com/
</em>&gt; <em>&gt; [user] </em>&gt; name = edolstra</p>
<ul>
<li><p><code>attrs</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.generators.tojson">lib.generators.toJSON</h3>
<p>__</p>
<p>Generates JSON from an arbitrary (non-function) value. * For more
information see the documentation of the builtin.</p>
<h3 id="lib.generators.toyaml">lib.generators.toYAML</h3>
<p>__</p>
<p>YAML has been a strict superset of JSON since 1.2, so we * use
toJSON. Before it only had a few differences referring * to implicit
typing rules, so it should work with older * parsers as well.</p>
<h3 id="lib.generators.topretty">lib.generators.toPretty</h3>
<p><em>pattern, allowPrettyValues, multiline, allowPrettyValues,
multiline</em></p>
<p>Pretty print a value, akin to <code>builtins.trace</code>. * Should
probably be a builtin as well.</p>
<ul>
<li><p><code>pattern</code></p>
<p>Structured function argument</p></li>
<li><p><code>allowPrettyValues</code></p>
<p>If this option is true, attrsets like { __pretty = fn; val = …; }
will use fn to convert val to a pretty printed representation. (This
means fn is type Val -&gt; String.)</p></li>
<li><p><code>multiline</code></p>
<p>If this option is true, the output is indented with newlines for
attribute sets and lists</p></li>
<li><p><code>allowPrettyValues</code></p>
<p>If this option is true, attrsets like { __pretty = fn; val = …; }
will use fn to convert val to a pretty printed representation. (This
means fn is type Val -&gt; String.)</p></li>
<li><p><code>multiline</code></p>
<p>If this option is true, the output is indented with newlines for
attribute sets and lists</p></li>
</ul>
<h3 id="lib.generators.todhall">lib.generators.toDhall</h3>
<p><em>v</em></p>
<p>Translate a simple Nix expression to Dhall notation. * Note that
integers are translated to Integer and never * the Natural type.</p>
<ul>
<li><p><code>v</code></p>
<p>Function argument</p></li>
</ul>
<h2 id="list-manipulation-functions">List manipulation functions</h2>
<h3 id="lib.lists.singleton">lib.lists.singleton</h3>
<p><em>x</em></p>
<p><code>singleton :: a -&gt; [a]</code></p>
<p>Create a list consisting of a single element.
<code>singleton x</code> is sometimes more convenient with respect to
indentation than <code>[x]</code> when x spans multiple lines.</p>
<ul>
<li><p><code>x</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.lists.singleton usage example:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>singleton <span class="st">&quot;foo&quot;</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="st">&quot;foo&quot;</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.foreach">lib.lists.forEach</h3>
<p><em>xs, f</em></p>
<p><code>forEach :: [a] -&gt; (a -&gt; b) -&gt; [b]</code></p>
<p>Apply the function to each element in the list. Same as
<code>map</code>, but arguments flipped.</p>
<ul>
<li><p><code>xs</code></p>
<p>Function argument</p></li>
<li><p><code>f</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.lists.forEach usage example:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>forEach <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="op">]</span> <span class="op">(</span><span class="va">x</span><span class="op">:</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="bu">toString</span> x</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="op">)</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="st">&quot;1&quot;</span> <span class="st">&quot;2&quot;</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.foldr">lib.lists.foldr</h3>
<p><em>op, nul, list</em></p>
<p><code>foldr :: (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b</code></p>
<p>“right fold” a binary function <code>op</code> between successive
elements of <code>list</code> with <code>nul</code> as the starting
value, i.e.,
<code>foldr op nul [x_1 x_2 ... x_n] == op x_1 (op x_2 ... (op x_n nul))</code>.</p>
<ul>
<li><p><code>op</code></p>
<p>Function argument</p></li>
<li><p><code>nul</code></p>
<p>Function argument</p></li>
<li><p><code>list</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.lists.foldr usage example:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>concat = foldr <span class="op">(</span><span class="va">a</span><span class="op">:</span> <span class="va">b</span><span class="op">:</span> a <span class="op">+</span> b<span class="op">)</span> <span class="st">&quot;z&quot;</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>concat <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span> <span class="st">&quot;c&quot;</span> <span class="op">]</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;abcz&quot;</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a><span class="co"># different types</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>strange = foldr <span class="op">(</span><span class="va">int</span><span class="op">:</span> <span class="va">str</span><span class="op">:</span> <span class="bu">toString</span> <span class="op">(</span>int <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> str<span class="op">)</span> <span class="st">&quot;a&quot;</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>strange <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="op">]</span></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;2345a&quot;</span></span></code></pre></div>
<h3 id="lib.lists.fold">lib.lists.fold</h3>
<p>__</p>
<p><code>fold</code> is an alias of <code>foldr</code> for historic
reasons</p>
<h3 id="lib.lists.foldl">lib.lists.foldl</h3>
<p><em>op, nul, list</em></p>
<p><code>foldl :: (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b</code></p>
<p>“left fold”, like <code>foldr</code>, but from the left:
<code>foldl op nul [x_1 x_2 ... x_n] == op (... (op (op nul x_1) x_2) ... x_n)</code>.</p>
<ul>
<li><p><code>op</code></p>
<p>Function argument</p></li>
<li><p><code>nul</code></p>
<p>Function argument</p></li>
<li><p><code>list</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.lists.foldl usage example:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>lconcat = foldl <span class="op">(</span><span class="va">a</span><span class="op">:</span> <span class="va">b</span><span class="op">:</span> a <span class="op">+</span> b<span class="op">)</span> <span class="st">&quot;z&quot;</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>lconcat <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span> <span class="st">&quot;c&quot;</span> <span class="op">]</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;zabc&quot;</span></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a><span class="co"># different types</span></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>lstrange = foldl <span class="op">(</span><span class="va">str</span><span class="op">:</span> <span class="va">int</span><span class="op">:</span> str <span class="op">+</span> <span class="bu">toString</span> <span class="op">(</span>int <span class="op">+</span> <span class="dv">1</span><span class="op">))</span> <span class="st">&quot;a&quot;</span></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>lstrange <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="op">]</span></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;a2345&quot;</span></span></code></pre></div>
<h3 id="lib.lists.foldl-1">lib.lists.foldl’</h3>
<p>__</p>
<p><code>foldl&#39; :: (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b</code></p>
<p>Strict version of <code>foldl</code>.</p>
<h3 id="lib.lists.imap0">lib.lists.imap0</h3>
<p><em>f, list</em></p>
<p><code>imap0 :: (int -&gt; a -&gt; b) -&gt; [a] -&gt; [b]</code></p>
<p>Map with index starting from 0</p>
<ul>
<li><p><code>f</code></p>
<p>Function argument</p></li>
<li><p><code>list</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.lists.imap0 usage example:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>imap0 <span class="op">(</span><span class="va">i</span><span class="op">:</span> <span class="va">v</span><span class="op">:</span> <span class="st">&quot;</span><span class="sc">${</span>v<span class="sc">}</span><span class="st">-</span><span class="sc">${</span><span class="bu">toString</span> i<span class="sc">}</span><span class="st">&quot;</span><span class="op">)</span> <span class="op">[</span><span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span><span class="op">]</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="st">&quot;a-0&quot;</span> <span class="st">&quot;b-1&quot;</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.imap1">lib.lists.imap1</h3>
<p><em>f, list</em></p>
<p><code>imap1 :: (int -&gt; a -&gt; b) -&gt; [a] -&gt; [b]</code></p>
<p>Map with index starting from 1</p>
<ul>
<li><p><code>f</code></p>
<p>Function argument</p></li>
<li><p><code>list</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.lists.imap1 usage example:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>imap1 <span class="op">(</span><span class="va">i</span><span class="op">:</span> <span class="va">v</span><span class="op">:</span> <span class="st">&quot;</span><span class="sc">${</span>v<span class="sc">}</span><span class="st">-</span><span class="sc">${</span><span class="bu">toString</span> i<span class="sc">}</span><span class="st">&quot;</span><span class="op">)</span> <span class="op">[</span><span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span><span class="op">]</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="st">&quot;a-1&quot;</span> <span class="st">&quot;b-2&quot;</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.concatmap">lib.lists.concatMap</h3>
<p>__</p>
<p><code>concatMap :: (a -&gt; [b]) -&gt; [a] -&gt; [b]</code></p>
<p>Map and concatenate the result.</p>
<p>lib.lists.concatMap usage example:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>concatMap <span class="op">(</span><span class="va">x</span><span class="op">:</span> <span class="op">[</span>x<span class="op">]</span> <span class="op">++</span> <span class="op">[</span><span class="st">&quot;z&quot;</span><span class="op">])</span> <span class="op">[</span><span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span><span class="op">]</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;z&quot;</span> <span class="st">&quot;b&quot;</span> <span class="st">&quot;z&quot;</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.flatten">lib.lists.flatten</h3>
<p><em>x</em></p>
<p>Flatten the argument into a single list; that is, nested lists are
spliced into the top-level lists.</p>
<ul>
<li><p><code>x</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.lists.flatten usage example:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>flatten <span class="op">[</span><span class="dv">1</span> <span class="op">[</span><span class="dv">2</span> <span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="dv">4</span><span class="op">]</span> <span class="dv">5</span><span class="op">]</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span><span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span><span class="op">]</span></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>flatten <span class="dv">1</span></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span><span class="dv">1</span><span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.remove">lib.lists.remove</h3>
<p><em>e</em></p>
<p><code>remove :: a -&gt; [a] -&gt; [a]</code></p>
<p>Remove elements equal to ‘e’ from a list. Useful for buildInputs.</p>
<ul>
<li><p><code>e</code></p>
<p>Element to remove from the list</p></li>
</ul>
<p>lib.lists.remove usage example:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>remove <span class="dv">3</span> <span class="op">[</span> <span class="dv">1</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">3</span> <span class="op">]</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="dv">1</span> <span class="dv">4</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.findsingle">lib.lists.findSingle</h3>
<p><em>pred, default, multiple, list</em></p>
<p><code>findSingle :: (a -&gt; bool) -&gt; a -&gt; a -&gt; [a] -&gt; a</code></p>
<p>Find the sole element in the list matching the specified predicate,
returns <code>default</code> if no such element exists, or
<code>multiple</code> if there are multiple matching elements.</p>
<ul>
<li><p><code>pred</code></p>
<p>Predicate</p></li>
<li><p><code>default</code></p>
<p>Default value to return if element was not found.</p></li>
<li><p><code>multiple</code></p>
<p>Default value to return if more than one element was found</p></li>
<li><p><code>list</code></p>
<p>Input list</p></li>
</ul>
<p>lib.lists.findSingle usage example:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>findSingle <span class="op">(</span><span class="va">x</span><span class="op">:</span> x == <span class="dv">3</span><span class="op">)</span> <span class="st">&quot;none&quot;</span> <span class="st">&quot;multiple&quot;</span> <span class="op">[</span> <span class="dv">1</span> <span class="dv">3</span> <span class="dv">3</span> <span class="op">]</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;multiple&quot;</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>findSingle <span class="op">(</span><span class="va">x</span><span class="op">:</span> x == <span class="dv">3</span><span class="op">)</span> <span class="st">&quot;none&quot;</span> <span class="st">&quot;multiple&quot;</span> <span class="op">[</span> <span class="dv">1</span> <span class="dv">3</span> <span class="op">]</span></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">3</span></span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>findSingle <span class="op">(</span><span class="va">x</span><span class="op">:</span> x == <span class="dv">3</span><span class="op">)</span> <span class="st">&quot;none&quot;</span> <span class="st">&quot;multiple&quot;</span> <span class="op">[</span> <span class="dv">1</span> <span class="dv">9</span> <span class="op">]</span></span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;none&quot;</span></span></code></pre></div>
<h3 id="lib.lists.findfirst">lib.lists.findFirst</h3>
<p><em>pred, default, list</em></p>
<p><code>findFirst :: (a -&gt; bool) -&gt; a -&gt; [a] -&gt; a</code></p>
<p>Find the first element in the list matching the specified predicate
or return <code>default</code> if no such element exists.</p>
<ul>
<li><p><code>pred</code></p>
<p>Predicate</p></li>
<li><p><code>default</code></p>
<p>Default value to return</p></li>
<li><p><code>list</code></p>
<p>Input list</p></li>
</ul>
<p>lib.lists.findFirst usage example:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>findFirst <span class="op">(</span><span class="va">x</span><span class="op">:</span> x &gt; <span class="dv">3</span><span class="op">)</span> <span class="dv">7</span> <span class="op">[</span> <span class="dv">1</span> <span class="dv">6</span> <span class="dv">4</span> <span class="op">]</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">6</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>findFirst <span class="op">(</span><span class="va">x</span><span class="op">:</span> x &gt; <span class="dv">9</span><span class="op">)</span> <span class="dv">7</span> <span class="op">[</span> <span class="dv">1</span> <span class="dv">6</span> <span class="dv">4</span> <span class="op">]</span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">7</span></span></code></pre></div>
<h3 id="lib.lists.any">lib.lists.any</h3>
<p>__</p>
<p><code>any :: (a -&gt; bool) -&gt; [a] -&gt; bool</code></p>
<p>Return true if function <code>pred</code> returns true for at least
one element of <code>list</code>.</p>
<p>lib.lists.any usage example:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>any isString <span class="op">[</span> <span class="dv">1</span> <span class="st">&quot;a&quot;</span> <span class="op">{</span> <span class="op">}</span> <span class="op">]</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>any isString <span class="op">[</span> <span class="dv">1</span> <span class="op">{</span> <span class="op">}</span> <span class="op">]</span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">false</span></span></code></pre></div>
<h3 id="lib.lists.all">lib.lists.all</h3>
<p>__</p>
<p><code>all :: (a -&gt; bool) -&gt; [a] -&gt; bool</code></p>
<p>Return true if function <code>pred</code> returns true for all
elements of <code>list</code>.</p>
<p>lib.lists.all usage example:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>all <span class="op">(</span><span class="va">x</span><span class="op">:</span> x &lt; <span class="dv">3</span><span class="op">)</span> <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="op">]</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>all <span class="op">(</span><span class="va">x</span><span class="op">:</span> x &lt; <span class="dv">3</span><span class="op">)</span> <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="op">]</span></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">false</span></span></code></pre></div>
<h3 id="lib.lists.count">lib.lists.count</h3>
<p><em>pred</em></p>
<p><code>count :: (a -&gt; bool) -&gt; [a] -&gt; int</code></p>
<p>Count how many elements of <code>list</code> match the supplied
predicate function.</p>
<ul>
<li><p><code>pred</code></p>
<p>Predicate</p></li>
</ul>
<p>lib.lists.count usage example:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>count <span class="op">(</span><span class="va">x</span><span class="op">:</span> x == <span class="dv">3</span><span class="op">)</span> <span class="op">[</span> <span class="dv">3</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">6</span> <span class="op">]</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">2</span></span></code></pre></div>
<h3 id="lib.lists.optional">lib.lists.optional</h3>
<p><em>cond, elem</em></p>
<p><code>optional :: bool -&gt; a -&gt; [a]</code></p>
<p>Return a singleton list or an empty list, depending on a boolean
value. Useful when building lists with optional elements (e.g. `++
optional (system == “i686-linux”) firefox’).</p>
<ul>
<li><p><code>cond</code></p>
<p>Function argument</p></li>
<li><p><code>elem</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.lists.optional usage example:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>optional <span class="cn">true</span> <span class="st">&quot;foo&quot;</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="st">&quot;foo&quot;</span> <span class="op">]</span></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>optional <span class="cn">false</span> <span class="st">&quot;foo&quot;</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.optionals">lib.lists.optionals</h3>
<p><em>cond, elems</em></p>
<p><code>optionals :: bool -&gt; [a] -&gt; [a]</code></p>
<p>Return a list or an empty list, depending on a boolean value.</p>
<ul>
<li><p><code>cond</code></p>
<p>Condition</p></li>
<li><p><code>elems</code></p>
<p>List to return if condition is true</p></li>
</ul>
<p>lib.lists.optionals usage example:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>optionals <span class="cn">true</span> <span class="op">[</span> <span class="dv">2</span> <span class="dv">3</span> <span class="op">]</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="dv">2</span> <span class="dv">3</span> <span class="op">]</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>optionals <span class="cn">false</span> <span class="op">[</span> <span class="dv">2</span> <span class="dv">3</span> <span class="op">]</span></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.tolist">lib.lists.toList</h3>
<p><em>x</em></p>
<p>If argument is a list, return it; else, wrap it in a singleton list.
If you’re using this, you should almost certainly reconsider if there
isn’t a more “well-typed” approach.</p>
<ul>
<li><p><code>x</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.lists.toList usage example:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>toList <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="op">]</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="op">]</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>toList <span class="st">&quot;hi&quot;</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="st">&quot;hi &quot;</span><span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.range">lib.lists.range</h3>
<p><em>first, last</em></p>
<p><code>range :: int -&gt; int -&gt; [int]</code></p>
<p>Return a list of integers from
<code>first&#39; up to and including</code>last’.</p>
<ul>
<li><p><code>first</code></p>
<p>First integer in the range</p></li>
<li><p><code>last</code></p>
<p>Last integer in the range</p></li>
</ul>
<p>lib.lists.range usage example:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>range <span class="dv">2</span> <span class="dv">4</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="op">]</span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>range <span class="dv">3</span> <span class="dv">2</span></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.partition">lib.lists.partition</h3>
<p>__</p>
<p><code>(a -&gt; bool) -&gt; [a] -&gt; { right :: [a], wrong :: [a] }</code></p>
<p>Splits the elements of a list in two lists, <code>right</code> and
<code>wrong</code>, depending on the evaluation of a predicate.</p>
<p>lib.lists.partition usage example:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>partition <span class="op">(</span><span class="va">x</span><span class="op">:</span> x &gt; <span class="dv">2</span><span class="op">)</span> <span class="op">[</span> <span class="dv">5</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="op">]</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">right</span> <span class="op">=</span> <span class="op">[</span> <span class="dv">5</span> <span class="dv">3</span> <span class="dv">4</span> <span class="op">];</span> <span class="va">wrong</span> <span class="op">=</span> <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="op">];</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.lists.groupby">lib.lists.groupBy’</h3>
<p><em>op, nul, pred, lst</em></p>
<p>Splits the elements of a list into many lists, using the return value
of a predicate. Predicate should return a string which becomes keys of
attrset `groupBy’ returns.</p>
<ul>
<li><p><code>op</code></p>
<p>Function argument</p></li>
<li><p><code>nul</code></p>
<p>Function argument</p></li>
<li><p><code>pred</code></p>
<p>Function argument</p></li>
<li><p><code>lst</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.lists.groupBy’ usage example:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>groupBy <span class="op">(</span><span class="va">x</span><span class="op">:</span> boolToString <span class="op">(</span>x &gt; <span class="dv">2</span><span class="op">))</span> <span class="op">[</span> <span class="dv">5</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="op">]</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">true</span> <span class="op">=</span> <span class="op">[</span> <span class="dv">5</span> <span class="dv">3</span> <span class="dv">4</span> <span class="op">];</span> <span class="va">false</span> <span class="op">=</span> <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="op">];</span> <span class="op">}</span></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>groupBy <span class="op">(</span><span class="va">x</span><span class="op">:</span> x.name<span class="op">)</span> <span class="op">[</span> <span class="op">{</span><span class="va">name</span> <span class="op">=</span> <span class="st">&quot;icewm&quot;</span><span class="op">;</span> <span class="va">script</span> <span class="op">=</span> <span class="st">&quot;icewm &amp;&quot;</span><span class="op">;}</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">name</span> <span class="op">=</span> <span class="st">&quot;xfce&quot;</span><span class="op">;</span>  <span class="va">script</span> <span class="op">=</span> <span class="st">&quot;xfce4-session &amp;&quot;</span><span class="op">;}</span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">name</span> <span class="op">=</span> <span class="st">&quot;icewm&quot;</span><span class="op">;</span> <span class="va">script</span> <span class="op">=</span> <span class="st">&quot;icewmbg &amp;&quot;</span><span class="op">;}</span></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="va">name</span> <span class="op">=</span> <span class="st">&quot;mate&quot;</span><span class="op">;</span>  <span class="va">script</span> <span class="op">=</span> <span class="st">&quot;gnome-session &amp;&quot;</span><span class="op">;}</span></span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a><span class="op">]</span></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">icewm</span> <span class="op">=</span> <span class="op">[</span> <span class="op">{</span> <span class="va">name</span> <span class="op">=</span> <span class="st">&quot;icewm&quot;</span><span class="op">;</span> <span class="va">script</span> <span class="op">=</span> <span class="st">&quot;icewm &amp;&quot;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a><span class="op">{</span> <span class="va">name</span> <span class="op">=</span> <span class="st">&quot;icewm&quot;</span><span class="op">;</span> <span class="va">script</span> <span class="op">=</span> <span class="st">&quot;icewmbg &amp;&quot;</span><span class="op">;</span> <span class="op">}</span> <span class="op">];</span></span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a><span class="va">mate</span>  <span class="op">=</span> <span class="op">[</span> <span class="op">{</span> <span class="va">name</span> <span class="op">=</span> <span class="st">&quot;mate&quot;</span><span class="op">;</span>  <span class="va">script</span> <span class="op">=</span> <span class="st">&quot;gnome-session &amp;&quot;</span><span class="op">;</span> <span class="op">}</span> <span class="op">];</span></span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a><span class="va">xfce</span>  <span class="op">=</span> <span class="op">[</span> <span class="op">{</span> <span class="va">name</span> <span class="op">=</span> <span class="st">&quot;xfce&quot;</span><span class="op">;</span>  <span class="va">script</span> <span class="op">=</span> <span class="st">&quot;xfce4-session &amp;&quot;</span><span class="op">;</span> <span class="op">}</span> <span class="op">];</span></span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb113-13"><a href="#cb113-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-14"><a href="#cb113-14" aria-hidden="true" tabindex="-1"></a>groupBy&#39; <span class="bu">builtins</span>.add <span class="dv">0</span> <span class="op">(</span><span class="va">x</span><span class="op">:</span> boolToString <span class="op">(</span>x &gt; <span class="dv">2</span><span class="op">))</span> <span class="op">[</span> <span class="dv">5</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="op">]</span></span>
<span id="cb113-15"><a href="#cb113-15" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">true</span> <span class="op">=</span> <span class="dv">12</span><span class="op">;</span> <span class="va">false</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.lists.ziplistswith">lib.lists.zipListsWith</h3>
<p><em>f, fst, snd</em></p>
<p><code>zipListsWith :: (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]</code></p>
<p>Merges two lists of the same size together. If the sizes aren’t the
same the merging stops at the shortest. How both lists are merged is
defined by the first argument.</p>
<ul>
<li><p><code>f</code></p>
<p>Function to zip elements of both lists</p></li>
<li><p><code>fst</code></p>
<p>First list</p></li>
<li><p><code>snd</code></p>
<p>Second list</p></li>
</ul>
<p>lib.lists.zipListsWith usage example:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>zipListsWith <span class="op">(</span><span class="va">a</span><span class="op">:</span> <span class="va">b</span><span class="op">:</span> a <span class="op">+</span> b<span class="op">)</span> <span class="op">[</span><span class="st">&quot;h&quot;</span> <span class="st">&quot;l&quot;</span><span class="op">]</span> <span class="op">[</span><span class="st">&quot;e&quot;</span> <span class="st">&quot;o&quot;</span><span class="op">]</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span><span class="st">&quot;he&quot;</span> <span class="st">&quot;lo&quot;</span><span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.ziplists">lib.lists.zipLists</h3>
<p>__</p>
<p><code>zipLists :: [a] -&gt; [b] -&gt; [{ fst :: a, snd :: b}]</code></p>
<p>Merges two lists of the same size together. If the sizes aren’t the
same the merging stops at the shortest.</p>
<p>lib.lists.zipLists usage example:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>zipLists <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="op">]</span> <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span> <span class="op">]</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="op">{</span> <span class="va">fst</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="va">snd</span> <span class="op">=</span> <span class="st">&quot;a&quot;</span><span class="op">;</span> <span class="op">}</span> <span class="op">{</span> <span class="va">fst</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="va">snd</span> <span class="op">=</span> <span class="st">&quot;b&quot;</span><span class="op">;</span> <span class="op">}</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.reverselist">lib.lists.reverseList</h3>
<p><em>xs</em></p>
<p><code>reverseList :: [a] -&gt; [a]</code></p>
<p>Reverse the order of the elements of a list.</p>
<ul>
<li><p><code>xs</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.lists.reverseList usage example:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>reverseList <span class="op">[</span> <span class="st">&quot;b&quot;</span> <span class="st">&quot;o&quot;</span> <span class="st">&quot;j&quot;</span> <span class="op">]</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="st">&quot;j&quot;</span> <span class="st">&quot;o&quot;</span> <span class="st">&quot;b&quot;</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.listdfs">lib.lists.listDfs</h3>
<p><em>stopOnCycles, before, list</em></p>
<p>Depth-First Search (DFS) for lists <code>list != []</code>.</p>
<ul>
<li><p><code>stopOnCycles</code></p>
<p>Function argument</p></li>
<li><p><code>before</code></p>
<p>Function argument</p></li>
<li><p><code>list</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.lists.listDfs usage example:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>listDfs <span class="cn">true</span> hasPrefix <span class="op">[</span> <span class="st">&quot;/home/user&quot;</span> <span class="st">&quot;other&quot;</span> <span class="st">&quot;/&quot;</span> <span class="st">&quot;/home&quot;</span> <span class="op">]</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>== <span class="op">{</span> <span class="va">minimal</span> <span class="op">=</span> <span class="st">&quot;/&quot;</span><span class="op">;</span>                  <span class="co"># minimal element</span></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a><span class="va">visited</span> <span class="op">=</span> <span class="op">[</span> <span class="st">&quot;/home/user&quot;</span> <span class="op">];</span>     <span class="co"># seen elements (in reverse order)</span></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a><span class="va">rest</span>    <span class="op">=</span> <span class="op">[</span> <span class="st">&quot;/home&quot;</span> <span class="st">&quot;other&quot;</span> <span class="op">];</span>  <span class="co"># everything else</span></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a>listDfs <span class="cn">true</span> hasPrefix <span class="op">[</span> <span class="st">&quot;/home/user&quot;</span> <span class="st">&quot;other&quot;</span> <span class="st">&quot;/&quot;</span> <span class="st">&quot;/home&quot;</span> <span class="st">&quot;/&quot;</span> <span class="op">]</span></span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a>== <span class="op">{</span> <span class="va">cycle</span>   <span class="op">=</span> <span class="st">&quot;/&quot;</span><span class="op">;</span>                  <span class="co"># cycle encountered at this element</span></span>
<span id="cb117-9"><a href="#cb117-9" aria-hidden="true" tabindex="-1"></a><span class="va">loops</span>   <span class="op">=</span> <span class="op">[</span> <span class="st">&quot;/&quot;</span> <span class="op">];</span>              <span class="co"># and continues to these elements</span></span>
<span id="cb117-10"><a href="#cb117-10" aria-hidden="true" tabindex="-1"></a><span class="va">visited</span> <span class="op">=</span> <span class="op">[</span> <span class="st">&quot;/&quot;</span> <span class="st">&quot;/home/user&quot;</span> <span class="op">];</span> <span class="co"># elements leading to the cycle (in reverse order)</span></span>
<span id="cb117-11"><a href="#cb117-11" aria-hidden="true" tabindex="-1"></a><span class="va">rest</span>    <span class="op">=</span> <span class="op">[</span> <span class="st">&quot;/home&quot;</span> <span class="st">&quot;other&quot;</span> <span class="op">];</span>  <span class="co"># everything else</span></span></code></pre></div>
<h3 id="lib.lists.toposort">lib.lists.toposort</h3>
<p><em>before, list</em></p>
<p>Sort a list based on a partial ordering using DFS. This
implementation is O(N^2), if your ordering is linear, use
<code>sort</code> instead.</p>
<ul>
<li><p><code>before</code></p>
<p>Function argument</p></li>
<li><p><code>list</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.lists.toposort usage example:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>toposort hasPrefix <span class="op">[</span> <span class="st">&quot;/home/user&quot;</span> <span class="st">&quot;other&quot;</span> <span class="st">&quot;/&quot;</span> <span class="st">&quot;/home&quot;</span> <span class="op">]</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>== <span class="op">{</span> <span class="va">result</span> <span class="op">=</span> <span class="op">[</span> <span class="st">&quot;/&quot;</span> <span class="st">&quot;/home&quot;</span> <span class="st">&quot;/home/user&quot;</span> <span class="st">&quot;other&quot;</span> <span class="op">];</span> <span class="op">}</span></span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>toposort hasPrefix <span class="op">[</span> <span class="st">&quot;/home/user&quot;</span> <span class="st">&quot;other&quot;</span> <span class="st">&quot;/&quot;</span> <span class="st">&quot;/home&quot;</span> <span class="st">&quot;/&quot;</span> <span class="op">]</span></span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a>== <span class="op">{</span> <span class="va">cycle</span> <span class="op">=</span> <span class="op">[</span> <span class="st">&quot;/home/user&quot;</span> <span class="st">&quot;/&quot;</span> <span class="st">&quot;/&quot;</span> <span class="op">];</span> <span class="co"># path leading to a cycle</span></span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a><span class="va">loops</span> <span class="op">=</span> <span class="op">[</span> <span class="st">&quot;/&quot;</span> <span class="op">];</span> <span class="op">}</span>                <span class="co"># loops back to these elements</span></span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a>toposort hasPrefix <span class="op">[</span> <span class="st">&quot;other&quot;</span> <span class="st">&quot;/home/user&quot;</span> <span class="st">&quot;/home&quot;</span> <span class="st">&quot;/&quot;</span> <span class="op">]</span></span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a>== <span class="op">{</span> <span class="va">result</span> <span class="op">=</span> <span class="op">[</span> <span class="st">&quot;other&quot;</span> <span class="st">&quot;/&quot;</span> <span class="st">&quot;/home&quot;</span> <span class="st">&quot;/home/user&quot;</span> <span class="op">];</span> <span class="op">}</span></span>
<span id="cb118-10"><a href="#cb118-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-11"><a href="#cb118-11" aria-hidden="true" tabindex="-1"></a>toposort <span class="op">(</span><span class="va">a</span><span class="op">:</span> <span class="va">b</span><span class="op">:</span> a &lt; b<span class="op">)</span> <span class="op">[</span> <span class="dv">3</span> <span class="dv">2</span> <span class="dv">1</span> <span class="op">]</span> == <span class="op">{</span> <span class="va">result</span> <span class="op">=</span> <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="op">];</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.lists.sort">lib.lists.sort</h3>
<p>__</p>
<p>Sort a list based on a comparator function which compares two
elements and returns true if the first argument is strictly below the
second argument. The returned list is sorted in an increasing order. The
implementation does a quick-sort.</p>
<p>lib.lists.sort usage example:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>sort <span class="op">(</span><span class="va">a</span><span class="op">:</span> <span class="va">b</span><span class="op">:</span> a &lt; b<span class="op">)</span> <span class="op">[</span> <span class="dv">5</span> <span class="dv">3</span> <span class="dv">7</span> <span class="op">]</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="dv">3</span> <span class="dv">5</span> <span class="dv">7</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.comparelists">lib.lists.compareLists</h3>
<p><em>cmp, a, b</em></p>
<p>Compare two lists element-by-element.</p>
<ul>
<li><p><code>cmp</code></p>
<p>Function argument</p></li>
<li><p><code>a</code></p>
<p>Function argument</p></li>
<li><p><code>b</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.lists.compareLists usage example:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>compareLists compare <span class="op">[]</span> <span class="op">[]</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">0</span></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>compareLists compare <span class="op">[]</span> <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="op">]</span></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">-</span><span class="dv">1</span></span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a>compareLists compare <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="op">]</span> <span class="op">[]</span></span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">1</span></span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a>compareLists compare <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span> <span class="op">]</span> <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;c&quot;</span> <span class="op">]</span></span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">-</span><span class="dv">1</span></span></code></pre></div>
<h3 id="lib.lists.naturalsort">lib.lists.naturalSort</h3>
<p><em>lst</em></p>
<p>Sort list using “Natural sorting”. Numeric portions of strings are
sorted in numeric order.</p>
<ul>
<li><p><code>lst</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.lists.naturalSort usage example:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>naturalSort <span class="op">[</span><span class="st">&quot;disk11&quot;</span> <span class="st">&quot;disk8&quot;</span> <span class="st">&quot;disk100&quot;</span> <span class="st">&quot;disk9&quot;</span><span class="op">]</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span><span class="st">&quot;disk8&quot;</span> <span class="st">&quot;disk9&quot;</span> <span class="st">&quot;disk11&quot;</span> <span class="st">&quot;disk100&quot;</span><span class="op">]</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>naturalSort <span class="op">[</span><span class="st">&quot;10.46.133.149&quot;</span> <span class="st">&quot;10.5.16.62&quot;</span> <span class="st">&quot;10.54.16.25&quot;</span><span class="op">]</span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span><span class="st">&quot;10.5.16.62&quot;</span> <span class="st">&quot;10.46.133.149&quot;</span> <span class="st">&quot;10.54.16.25&quot;</span><span class="op">]</span></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>naturalSort <span class="op">[</span><span class="st">&quot;v0.2&quot;</span> <span class="st">&quot;v0.15&quot;</span> <span class="st">&quot;v0.0.9&quot;</span><span class="op">]</span></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="st">&quot;v0.0.9&quot;</span> <span class="st">&quot;v0.2&quot;</span> <span class="st">&quot;v0.15&quot;</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.take">lib.lists.take</h3>
<p><em>count</em></p>
<p><code>take :: int -&gt; [a] -&gt; [a]</code></p>
<p>Return the first (at most) N elements of a list.</p>
<ul>
<li><p><code>count</code></p>
<p>Number of elements to take</p></li>
</ul>
<p>lib.lists.take usage example:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>take <span class="dv">2</span> <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span> <span class="st">&quot;c&quot;</span> <span class="st">&quot;d&quot;</span> <span class="op">]</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span> <span class="op">]</span></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>take <span class="dv">2</span> <span class="op">[</span> <span class="op">]</span></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.drop">lib.lists.drop</h3>
<p><em>count, list</em></p>
<p><code>drop :: int -&gt; [a] -&gt; [a]</code></p>
<p>Remove the first (at most) N elements of a list.</p>
<ul>
<li><p><code>count</code></p>
<p>Number of elements to drop</p></li>
<li><p><code>list</code></p>
<p>Input list</p></li>
</ul>
<p>lib.lists.drop usage example:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>drop <span class="dv">2</span> <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span> <span class="st">&quot;c&quot;</span> <span class="st">&quot;d&quot;</span> <span class="op">]</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="st">&quot;c&quot;</span> <span class="st">&quot;d&quot;</span> <span class="op">]</span></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>drop <span class="dv">2</span> <span class="op">[</span> <span class="op">]</span></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.sublist">lib.lists.sublist</h3>
<p><em>start, count, list</em></p>
<p><code>sublist :: int -&gt; int -&gt; [a] -&gt; [a]</code></p>
<p>Return a list consisting of at most <code>count</code> elements of
<code>list</code>, starting at index <code>start</code>.</p>
<ul>
<li><p><code>start</code></p>
<p>Index at which to start the sublist</p></li>
<li><p><code>count</code></p>
<p>Number of elements to take</p></li>
<li><p><code>list</code></p>
<p>Input list</p></li>
</ul>
<p>lib.lists.sublist usage example:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>sublist <span class="dv">1</span> <span class="dv">3</span> <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span> <span class="st">&quot;c&quot;</span> <span class="st">&quot;d&quot;</span> <span class="st">&quot;e&quot;</span> <span class="op">]</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="st">&quot;b&quot;</span> <span class="st">&quot;c&quot;</span> <span class="st">&quot;d&quot;</span> <span class="op">]</span></span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a>sublist <span class="dv">1</span> <span class="dv">3</span> <span class="op">[</span> <span class="op">]</span></span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.last">lib.lists.last</h3>
<p><em>list</em></p>
<p><code>last :: [a] -&gt; a</code></p>
<p>Return the last element of a list.</p>
<ul>
<li><p><code>list</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.lists.last usage example:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>last <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="op">]</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">3</span></span></code></pre></div>
<h3 id="lib.lists.init">lib.lists.init</h3>
<p><em>list</em></p>
<p><code>init :: [a] -&gt; [a]</code></p>
<p>Return all elements but the last.</p>
<ul>
<li><p><code>list</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.lists.init usage example:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>init <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="op">]</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.crosslists">lib.lists.crossLists</h3>
<p>__</p>
<p>Return the image of the cross product of some lists by a
function.</p>
<p>lib.lists.crossLists usage example:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>crossLists <span class="op">(</span><span class="va">x</span><span class="op">:</span><span class="va">y</span><span class="op">:</span> <span class="st">&quot;</span><span class="sc">${</span><span class="bu">toString</span> x<span class="sc">}${</span><span class="bu">toString</span> y<span class="sc">}</span><span class="st">&quot;</span><span class="op">)</span> <span class="op">[[</span><span class="dv">1</span> <span class="dv">2</span><span class="op">]</span> <span class="op">[</span><span class="dv">3</span> <span class="dv">4</span><span class="op">]]</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="st">&quot;13&quot;</span> <span class="st">&quot;14&quot;</span> <span class="st">&quot;23&quot;</span> <span class="st">&quot;24&quot;</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.unique">lib.lists.unique</h3>
<p>__</p>
<p><code>unique :: [a] -&gt; [a]</code></p>
<p>Remove duplicate elements from the list. O(n^2) complexity.</p>
<p>lib.lists.unique usage example:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>unique <span class="op">[</span> <span class="dv">3</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="op">]</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="dv">3</span> <span class="dv">2</span> <span class="dv">4</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.intersectlists">lib.lists.intersectLists</h3>
<p><em>e</em></p>
<p>Intersects list ‘e’ and another list. O(nm) complexity.</p>
<ul>
<li><p><code>e</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.lists.intersectLists usage example:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>intersectLists <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="op">]</span> <span class="op">[</span> <span class="dv">6</span> <span class="dv">3</span> <span class="dv">2</span> <span class="op">]</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="dv">3</span> <span class="dv">2</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.subtractlists">lib.lists.subtractLists</h3>
<p><em>e</em></p>
<p>Subtracts list ‘e’ from another list. O(nm) complexity.</p>
<ul>
<li><p><code>e</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.lists.subtractLists usage example:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>subtractLists <span class="op">[</span> <span class="dv">3</span> <span class="dv">2</span> <span class="op">]</span> <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">3</span> <span class="op">]</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="dv">1</span> <span class="dv">4</span> <span class="dv">5</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.lists.mutuallyexclusive">lib.lists.mutuallyExclusive</h3>
<p><em>a, b</em></p>
<p>Test if two lists have no common element. It should be slightly more
efficient than (intersectLists a b == [])</p>
<ul>
<li><p><code>a</code></p>
<p>Function argument</p></li>
<li><p><code>b</code></p>
<p>Function argument</p></li>
</ul>
<h2 id="meta-functions">Meta functions</h2>
<h3 id="lib.meta.addmetaattrs">lib.meta.addMetaAttrs</h3>
<p><em>newAttrs, drv</em></p>
<p>Add to or override the meta attributes of the given derivation.</p>
<ul>
<li><p><code>newAttrs</code></p>
<p>Function argument</p></li>
<li><p><code>drv</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.meta.addMetaAttrs usage example:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>addMetaAttrs <span class="op">{</span><span class="va">description</span> <span class="op">=</span> <span class="st">&quot;Bla blah&quot;</span><span class="op">;}</span> somePkg</span></code></pre></div>
<h3 id="lib.meta.dontdistribute">lib.meta.dontDistribute</h3>
<p><em>drv</em></p>
<p>Disable Hydra builds of given derivation.</p>
<ul>
<li><p><code>drv</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.meta.setname">lib.meta.setName</h3>
<p><em>name, drv</em></p>
<p>Change the symbolic name of a package for presentation purposes
(i.e., so that nix-env users can tell them apart).</p>
<ul>
<li><p><code>name</code></p>
<p>Function argument</p></li>
<li><p><code>drv</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.meta.updatename">lib.meta.updateName</h3>
<p><em>updater, drv</em></p>
<p>Like `setName’, but takes the previous name as an argument.</p>
<ul>
<li><p><code>updater</code></p>
<p>Function argument</p></li>
<li><p><code>drv</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.meta.updateName usage example:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>updateName <span class="op">(</span><span class="va">oldName</span><span class="op">:</span> oldName <span class="op">+</span> <span class="st">&quot;-experimental&quot;</span><span class="op">)</span> somePkg</span></code></pre></div>
<h3 id="lib.meta.appendtoname">lib.meta.appendToName</h3>
<p><em>suffix</em></p>
<p>Append a suffix to the name of a package (before the version
part).</p>
<ul>
<li><p><code>suffix</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.meta.mapderivationattrset">lib.meta.mapDerivationAttrset</h3>
<p><em>f, set</em></p>
<p>Apply a function to each derivation and only to derivations in an
attrset.</p>
<ul>
<li><p><code>f</code></p>
<p>Function argument</p></li>
<li><p><code>set</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.meta.setprio">lib.meta.setPrio</h3>
<p><em>priority</em></p>
<p>Set the nix-env priority of the package.</p>
<ul>
<li><p><code>priority</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.meta.lowprio">lib.meta.lowPrio</h3>
<p>__</p>
<p>Decrease the nix-env priority of the package, i.e., other
versions/variants of the package will be preferred.</p>
<h3 id="lib.meta.lowprioset">lib.meta.lowPrioSet</h3>
<p><em>set</em></p>
<p>Apply lowPrio to an attrset with derivations</p>
<ul>
<li><p><code>set</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.meta.hiprio">lib.meta.hiPrio</h3>
<p>__</p>
<p>Increase the nix-env priority of the package, i.e., this
version/variant of the package will be preferred.</p>
<h3 id="lib.meta.hiprioset">lib.meta.hiPrioSet</h3>
<p><em>set</em></p>
<p>Apply hiPrio to an attrset with derivations</p>
<ul>
<li><p><code>set</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.meta.platformmatch">lib.meta.platformMatch</h3>
<p><em>platform, elem</em></p>
<p>Check to see if a platform is matched by the given
<code>meta.platforms</code> element.</p>
<ul>
<li><p><code>platform</code></p>
<p>Function argument</p></li>
<li><p><code>elem</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.meta.availableon">lib.meta.availableOn</h3>
<p><em>platform, pkg</em></p>
<p>Check if a package is available on a given platform.</p>
<ul>
<li><p><code>platform</code></p>
<p>Function argument</p></li>
<li><p><code>pkg</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.meta.getlicensefromspdxid">lib.meta.getLicenseFromSpdxId</h3>
<p>__</p>
<p><code>getLicenseFromSpdxId :: str -&gt; AttrSet</code></p>
<p>Get the corresponding attribute in lib.licenses from the SPDX ID. For
SPDX IDs, see https://spdx.org/licenses</p>
<p>lib.meta.getLicenseFromSpdxId usage example:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>lib.getLicenseFromSpdxId <span class="st">&quot;MIT&quot;</span> == lib.licenses.mit</span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>lib.getLicenseFromSpdxId <span class="st">&quot;mIt&quot;</span> == lib.licenses.mit</span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a>lib.getLicenseFromSpdxId <span class="st">&quot;MY LICENSE&quot;</span></span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="va">trace</span><span class="op">:</span> <span class="va">warning</span><span class="op">:</span> <span class="va">getLicenseFromSpdxId</span><span class="op">:</span> No license matches the given SPDX <span class="va">ID</span><span class="op">:</span> MY LICENSE</span>
<span id="cb133-7"><a href="#cb133-7" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">shortName</span> <span class="op">=</span> <span class="st">&quot;MY LICENSE&quot;</span><span class="op">;</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.meta.getexe">lib.meta.getExe</h3>
<p><em>x</em></p>
<p><code>getExe :: derivation -&gt; string</code></p>
<p>Get the path to the main program of a derivation with either
meta.mainProgram or pname or name</p>
<ul>
<li><p><code>x</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.meta.getExe usage example:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>getExe pkgs.hello</span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;/nix/store/g124820p9hlv4lj8qplzxw1c44dxaw1k-hello-2.12/bin/hello&quot;</span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>getExe pkgs.mustache<span class="op">-</span>go</span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;/nix/store/am9ml4f4ywvivxnkiaqwr0hyxka1xjsf-mustache-go-1.3.0/bin/mustache&quot;</span></span></code></pre></div>
<h2 id="modules-functions">Modules functions</h2>
<h3 id="lib.modules.evalmodules">lib.modules.evalModules</h3>
<p>__</p>
<p>Evaluate a set of modules. The result is a set with the
attributes:</p>
<h3 id="lib.modules.collectstructuredmodules">lib.modules.collectStructuredModules</h3>
<p>__</p>
<p>Collects all modules recursively into the form</p>
<h3 id="lib.modules.setdefaultmodulelocation">lib.modules.setDefaultModuleLocation</h3>
<p><em>file, m</em></p>
<p>Wrap a module with a default location for reporting errors.</p>
<ul>
<li><p><code>file</code></p>
<p>Function argument</p></li>
<li><p><code>m</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.modules.unifymodulesyntax">lib.modules.unifyModuleSyntax</h3>
<p><em>file, key, m</em></p>
<p>Massage a module into canonical form, that is, a set consisting of
‘options’, ‘config’ and ‘imports’ attributes.</p>
<ul>
<li><p><code>file</code></p>
<p>Function argument</p></li>
<li><p><code>key</code></p>
<p>Function argument</p></li>
<li><p><code>m</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.modules.mergemodules">lib.modules.mergeModules</h3>
<p><em>prefix, modules</em></p>
<p>Merge a list of modules. This will recurse over the option
declarations in all modules, combining them into a single set. At the
same time, for each option declaration, it will merge the corresponding
option definitions in all machines, returning them in the ‘value’
attribute of each option.</p>
<ul>
<li><p><code>prefix</code></p>
<p>Function argument</p></li>
<li><p><code>modules</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.modules.byname">lib.modules.byName</h3>
<p><em>attr, f, modules</em></p>
<p>byName is like foldAttrs, but will look for attributes to merge in
the specified attribute name.</p>
<ul>
<li><p><code>attr</code></p>
<p>Function argument</p></li>
<li><p><code>f</code></p>
<p>Function argument</p></li>
<li><p><code>modules</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.modules.mergeoptiondecls">lib.modules.mergeOptionDecls</h3>
<p>__</p>
<p>Merge multiple option declarations into a single declaration. In
general, there should be only one declaration of each option. The
exception is the ‘options’ attribute, which specifies sub-options. These
can be specified multiple times to allow one module to add sub-options
to an option declared somewhere else (e.g. multiple modules define
sub-options for ‘fileSystems’).</p>
<h3 id="lib.modules.evaloptionvalue">lib.modules.evalOptionValue</h3>
<p><em>loc, opt, defs</em></p>
<p>Merge all the definitions of an option to produce the final config
value.</p>
<ul>
<li><p><code>loc</code></p>
<p>Function argument</p></li>
<li><p><code>opt</code></p>
<p>Function argument</p></li>
<li><p><code>defs</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.modules.pushdownproperties">lib.modules.pushDownProperties</h3>
<p><em>cfg</em></p>
<p>Given a config set, expand mkMerge properties, and push down the
other properties into the children. The result is a list of config sets
that do not have properties at top-level. For example,</p>
<ul>
<li><p><code>cfg</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.modules.dischargeproperties">lib.modules.dischargeProperties</h3>
<p><em>def</em></p>
<p>Given a config value, expand mkMerge properties, and discharge any
mkIf conditions. That is, this is the place where mkIf conditions are
actually evaluated. The result is a list of config values. For example,
‘mkIf false x’ yields ‘[]’, ‘mkIf true x’ yields ‘[x]’, and</p>
<ul>
<li><p><code>def</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.modules.filteroverrides">lib.modules.filterOverrides</h3>
<p><em>defs</em></p>
<p>Given a list of config values, process the mkOverride properties,
that is, return the values that have the highest (that is, numerically
lowest) priority, and strip the mkOverride properties. For example,</p>
<ul>
<li><p><code>defs</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.modules.sortproperties">lib.modules.sortProperties</h3>
<p><em>defs</em></p>
<p>Sort a list of properties. The sort priority of a property is 1000 by
default, but can be overridden by wrapping the property using
mkOrder.</p>
<ul>
<li><p><code>defs</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.modules.mkif">lib.modules.mkIf</h3>
<p><em>condition, content</em></p>
<p>Properties.</p>
<ul>
<li><p><code>condition</code></p>
<p>Function argument</p></li>
<li><p><code>content</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.modules.fixmergemodules">lib.modules.fixMergeModules</h3>
<p><em>modules, args</em></p>
<p>Compatibility.</p>
<ul>
<li><p><code>modules</code></p>
<p>Function argument</p></li>
<li><p><code>args</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.modules.mkremovedoptionmodule">lib.modules.mkRemovedOptionModule</h3>
<p><em>optionName, replacementInstructions, pattern, options,
options</em></p>
<p>Return a module that causes a warning to be shown if the specified
option is defined. For example,</p>
<ul>
<li><p><code>optionName</code></p>
<p>Function argument</p></li>
<li><p><code>replacementInstructions</code></p>
<p>Function argument</p></li>
<li><p><code>pattern</code></p>
<p>Structured function argument</p></li>
<li><p><code>options</code></p>
<p>Function argument</p></li>
<li><p><code>options</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.modules.mkrenamedoptionmodule">lib.modules.mkRenamedOptionModule</h3>
<p><em>from, to</em></p>
<p>Return a module that causes a warning to be shown if the specified
“from” option is defined; the defined value is however forwarded to the
“to” option. This can be used to rename options while providing backward
compatibility. For example,</p>
<ul>
<li><p><code>from</code></p>
<p>Function argument</p></li>
<li><p><code>to</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.modules.mkmergedoptionmodule">lib.modules.mkMergedOptionModule</h3>
<p><em>from, to, mergeFn, pattern, config, options, config,
options</em></p>
<p>Return a module that causes a warning to be shown if any of the
“from” option is defined; the defined values can be used in the
“mergeFn” to set the “to” value. This function can be used to merge
multiple options into one that has a different type.</p>
<ul>
<li><p><code>from</code></p>
<p>Function argument</p></li>
<li><p><code>to</code></p>
<p>Function argument</p></li>
<li><p><code>mergeFn</code></p>
<p>Function argument</p></li>
<li><p><code>pattern</code></p>
<p>Structured function argument</p></li>
<li><p><code>config</code></p>
<p>Function argument</p></li>
<li><p><code>options</code></p>
<p>Function argument</p></li>
<li><p><code>config</code></p>
<p>Function argument</p></li>
<li><p><code>options</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.modules.mkchangedoptionmodule">lib.modules.mkChangedOptionModule</h3>
<p><em>from, to, changeFn</em></p>
<p>Single “from” version of mkMergedOptionModule. Return a module that
causes a warning to be shown if the “from” option is defined; the
defined value can be used in the “mergeFn” to set the “to” value. This
function can be used to change an option into another that has a
different type.</p>
<ul>
<li><p><code>from</code></p>
<p>Function argument</p></li>
<li><p><code>to</code></p>
<p>Function argument</p></li>
<li><p><code>changeFn</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.modules.mkaliasoptionmodule">lib.modules.mkAliasOptionModule</h3>
<p><em>from, to</em></p>
<p>Like ‘mkRenamedOptionModule’, but doesn’t show a warning.</p>
<ul>
<li><p><code>from</code></p>
<p>Function argument</p></li>
<li><p><code>to</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.modules.mkderivedconfig">lib.modules.mkDerivedConfig</h3>
<p><em>opt, f</em></p>
<p>mkDerivedConfig : Option a -&gt; (a -&gt; Definition b) -&gt;
Definition b</p>
<ul>
<li><p><code>opt</code></p>
<p>Function argument</p></li>
<li><p><code>f</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.modules.importjson">lib.modules.importJSON</h3>
<p><em>file</em></p>
<p>Use this function to import a JSON file as NixOS configuration.</p>
<ul>
<li><p><code>file</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.modules.importtoml">lib.modules.importTOML</h3>
<p><em>file</em></p>
<p>Use this function to import a TOML file as NixOS configuration.</p>
<ul>
<li><p><code>file</code></p>
<p>Function argument</p></li>
</ul>
<h2 id="nixos-nixpkgs-option-handling">NixOS / nixpkgs option
handling</h2>
<h3 id="lib.options.isoption">lib.options.isOption</h3>
<p>__</p>
<p><code>isOption :: a -&gt; bool</code></p>
<p>Returns true when the given argument is an option</p>
<p>lib.options.isOption usage example:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>isOption <span class="dv">1</span>             <span class="op">//</span> =&gt; <span class="cn">false</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>isOption <span class="op">(</span>mkOption <span class="op">{})</span> <span class="op">//</span> =&gt; <span class="cn">true</span></span></code></pre></div>
<h3 id="lib.options.mkoption">lib.options.mkOption</h3>
<p><em>pattern, default, defaultText, example, description,
relatedPackages, type, apply, internal, visible, readOnly, default,
defaultText, example, description, relatedPackages, type, apply,
internal, visible, readOnly</em></p>
<p>Creates an Option attribute set. mkOption accepts an attribute set
with the following keys:</p>
<ul>
<li><p><code>pattern</code></p>
<p>Structured function argument</p></li>
<li><p><code>default</code></p>
<p>Default value used when no definition is given in the
configuration.</p></li>
<li><p><code>defaultText</code></p>
<p>Textual representation of the default, for the manual.</p></li>
<li><p><code>example</code></p>
<p>Example value used in the manual.</p></li>
<li><p><code>description</code></p>
<p>String describing the option.</p></li>
<li><p><code>relatedPackages</code></p>
<p>Related packages used in the manual (see
<code>genRelatedPackages</code> in
../nixos/lib/make-options-doc/default.nix).</p></li>
<li><p><code>type</code></p>
<p>Option type, providing type-checking and value merging.</p></li>
<li><p><code>apply</code></p>
<p>Function that converts the option value to something else.</p></li>
<li><p><code>internal</code></p>
<p>Whether the option is for NixOS developers only.</p></li>
<li><p><code>visible</code></p>
<p>Whether the option shows up in the manual. Default: true. Use false
to hide the option and any sub-options from submodules. Use &quot;shallow&quot; to
hide only sub-options.</p></li>
<li><p><code>readOnly</code></p>
<p>Whether the option can be set only once</p></li>
<li><p><code>default</code></p>
<p>Default value used when no definition is given in the
configuration.</p></li>
<li><p><code>defaultText</code></p>
<p>Textual representation of the default, for the manual.</p></li>
<li><p><code>example</code></p>
<p>Example value used in the manual.</p></li>
<li><p><code>description</code></p>
<p>String describing the option.</p></li>
<li><p><code>relatedPackages</code></p>
<p>Related packages used in the manual (see
<code>genRelatedPackages</code> in
../nixos/lib/make-options-doc/default.nix).</p></li>
<li><p><code>type</code></p>
<p>Option type, providing type-checking and value merging.</p></li>
<li><p><code>apply</code></p>
<p>Function that converts the option value to something else.</p></li>
<li><p><code>internal</code></p>
<p>Whether the option is for NixOS developers only.</p></li>
<li><p><code>visible</code></p>
<p>Whether the option shows up in the manual. Default: true. Use false
to hide the option and any sub-options from submodules. Use &quot;shallow&quot; to
hide only sub-options.</p></li>
<li><p><code>readOnly</code></p>
<p>Whether the option can be set only once</p></li>
</ul>
<p>lib.options.mkOption usage example:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>mkOption <span class="op">{</span> <span class="op">}</span>  <span class="op">//</span> =&gt; <span class="op">{</span> <span class="va">_type</span> <span class="op">=</span> <span class="st">&quot;option&quot;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>mkOption <span class="op">{</span> <span class="va">default</span> <span class="op">=</span> <span class="st">&quot;foo&quot;</span><span class="op">;</span> <span class="op">}</span> <span class="op">//</span> =&gt; <span class="op">{</span> <span class="va">_type</span> <span class="op">=</span> <span class="st">&quot;option&quot;</span><span class="op">;</span> <span class="va">default</span> <span class="op">=</span> <span class="st">&quot;foo&quot;</span><span class="op">;</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.options.mkenableoption">lib.options.mkEnableOption</h3>
<p><em>name</em></p>
<p>Creates an Option attribute set for a boolean value option i.e an
option to be toggled on or off:</p>
<ul>
<li><p><code>name</code></p>
<p>Name for the created option</p></li>
</ul>
<p>lib.options.mkEnableOption usage example:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>mkEnableOption <span class="st">&quot;foo&quot;</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">_type</span> <span class="op">=</span> <span class="st">&quot;option&quot;</span><span class="op">;</span> <span class="va">default</span> <span class="op">=</span> <span class="cn">false</span><span class="op">;</span> <span class="va">description</span> <span class="op">=</span> <span class="st">&quot;Whether to enable foo.&quot;</span><span class="op">;</span> <span class="va">example</span> <span class="op">=</span> <span class="cn">true</span><span class="op">;</span> <span class="va">type</span> <span class="op">=</span> <span class="op">{</span> <span class="op">...</span> <span class="op">};</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.options.mkpackageoption">lib.options.mkPackageOption</h3>
<p><em>pkgs, name, pattern, default, example, default, example</em></p>
<p><code>mkPackageOption :: pkgs -&gt; string -&gt; { default :: [string], example :: null | string | [string] } -&gt; optionThe package is specified as a list of strings representing its attribute path in nixpkgs.Because of this, you need to pass nixpkgs itself as the first argument.The second argument is the name of the option, used in the description &quot;The &lt;name&gt; package to use.&quot;.You can also pass an example value, either a literal string or a package&#39;s attribute path.You can omit the default path if the name of the option is also attribute path in nixpkgs.</code></p>
<p>Creates an Option attribute set for an option that specifies the
package a module should use for some purpose.</p>
<ul>
<li><p><code>pkgs</code></p>
<p>Package set (a specific version of nixpkgs)</p></li>
<li><p><code>name</code></p>
<p>Name for the package, shown in option description</p></li>
<li><p><code>pattern</code></p>
<p>Structured function argument</p></li>
<li><p><code>default</code></p>
<p>Function argument</p></li>
<li><p><code>example</code></p>
<p>Function argument</p></li>
<li><p><code>default</code></p>
<p>Function argument</p></li>
<li><p><code>example</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.options.mkPackageOption usage example:</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>mkPackageOption pkgs <span class="st">&quot;hello&quot;</span> <span class="op">{</span> <span class="op">}</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">_type</span> <span class="op">=</span> <span class="st">&quot;option&quot;</span><span class="op">;</span> <span class="va">default</span> <span class="op">=</span> «derivation <span class="ss">/nix/store/3r2vg51hlxj3cx5vscp0vkv60bqxkaq0-hello-2.10.drv</span>»<span class="op">;</span> <span class="va">defaultText</span> <span class="op">=</span> <span class="op">{</span> <span class="op">...</span> <span class="op">};</span> <span class="va">description</span> <span class="op">=</span> <span class="st">&quot;The hello package to use.&quot;</span><span class="op">;</span> <span class="va">type</span> <span class="op">=</span> <span class="op">{</span> <span class="op">...</span> <span class="op">};</span> <span class="op">}</span></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a>mkPackageOption pkgs <span class="st">&quot;GHC&quot;</span> <span class="op">{</span></span>
<span id="cb138-6"><a href="#cb138-6" aria-hidden="true" tabindex="-1"></a><span class="va">default</span> <span class="op">=</span> <span class="op">[</span> <span class="st">&quot;ghc&quot;</span> <span class="op">];</span></span>
<span id="cb138-7"><a href="#cb138-7" aria-hidden="true" tabindex="-1"></a><span class="va">example</span> <span class="op">=</span> <span class="st">&quot;pkgs.haskell.packages.ghc924.ghc.withPackages (hkgs: [ hkgs.primes ])&quot;</span><span class="op">;</span></span>
<span id="cb138-8"><a href="#cb138-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb138-9"><a href="#cb138-9" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">_type</span> <span class="op">=</span> <span class="st">&quot;option&quot;</span><span class="op">;</span> <span class="va">default</span> <span class="op">=</span> «derivation <span class="ss">/nix/store/jxx55cxsjrf8kyh3fp2ya17q99w7541r-ghc-8.10.7.drv</span>»<span class="op">;</span> <span class="va">defaultText</span> <span class="op">=</span> <span class="op">{</span> <span class="op">...</span> <span class="op">};</span> <span class="va">description</span> <span class="op">=</span> <span class="st">&quot;The GHC package to use.&quot;</span><span class="op">;</span> <span class="va">example</span> <span class="op">=</span> <span class="op">{</span> <span class="op">...</span> <span class="op">};</span> <span class="va">type</span> <span class="op">=</span> <span class="op">{</span> <span class="op">...</span> <span class="op">};</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.options.mksinkundeclaredoptions">lib.options.mkSinkUndeclaredOptions</h3>
<p><em>attrs</em></p>
<p>This option accepts anything, but it does not produce any result.</p>
<ul>
<li><p><code>attrs</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.options.mergeequaloption">lib.options.mergeEqualOption</h3>
<p><em>loc, defs</em></p>
<p>“Merge” option definitions by checking that they all have the same
value.</p>
<ul>
<li><p><code>loc</code></p>
<p>Function argument</p></li>
<li><p><code>defs</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.options.getvalues">lib.options.getValues</h3>
<p>__</p>
<p><code>getValues :: [ { value :: a } ] -&gt; [a]</code></p>
<p>Extracts values of all “value” keys of the given list.</p>
<p>lib.options.getValues usage example:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>getValues <span class="op">[</span> <span class="op">{</span> <span class="va">value</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span> <span class="op">{</span> <span class="va">value</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="op">}</span> <span class="op">]</span> <span class="op">//</span> =&gt; <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="op">]</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>getValues <span class="op">[</span> <span class="op">]</span>                               <span class="op">//</span> =&gt; <span class="op">[</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.options.getfiles">lib.options.getFiles</h3>
<p>__</p>
<p><code>getFiles :: [ { file :: a } ] -&gt; [a]</code></p>
<p>Extracts values of all “file” keys of the given list</p>
<p>lib.options.getFiles usage example:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>getFiles <span class="op">[</span> <span class="op">{</span> <span class="va">file</span> <span class="op">=</span> <span class="st">&quot;file1&quot;</span><span class="op">;</span> <span class="op">}</span> <span class="op">{</span> <span class="va">file</span> <span class="op">=</span> <span class="st">&quot;file2&quot;</span><span class="op">;</span> <span class="op">}</span> <span class="op">]</span> <span class="op">//</span> =&gt; <span class="op">[</span> <span class="st">&quot;file1&quot;</span> <span class="st">&quot;file2&quot;</span> <span class="op">]</span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>getFiles <span class="op">[</span> <span class="op">]</span>                                         <span class="op">//</span> =&gt; <span class="op">[</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.options.scruboptionvalue">lib.options.scrubOptionValue</h3>
<p><em>x</em></p>
<p>This function recursively removes all derivation attributes from
<code>x</code> except for the <code>name</code> attribute.</p>
<ul>
<li><p><code>x</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.options.literalexpression">lib.options.literalExpression</h3>
<p><em>text</em></p>
<p>For use in the <code>defaultText</code> and <code>example</code>
option attributes. Causes the given string to be rendered verbatim in
the documentation as Nix code. This is necessary for complex values,
e.g. functions, or values that depend on other values or packages.</p>
<ul>
<li><p><code>text</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.options.literaldocbook">lib.options.literalDocBook</h3>
<p><em>text</em></p>
<p>For use in the <code>defaultText</code> and <code>example</code>
option attributes. Causes the given DocBook text to be inserted verbatim
in the documentation, for when a <code>literalExpression</code> would be
too hard to read.</p>
<ul>
<li><p><code>text</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.options.mddoc">lib.options.mdDoc</h3>
<p><em>text</em></p>
<p>Transition marker for documentation that’s already migrated to
markdown syntax.</p>
<ul>
<li><p><code>text</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.options.literalmd">lib.options.literalMD</h3>
<p><em>text</em></p>
<p>For use in the <code>defaultText</code> and <code>example</code>
option attributes. Causes the given MD text to be inserted verbatim in
the documentation, for when a <code>literalExpression</code> would be
too hard to read.</p>
<ul>
<li><p><code>text</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.options.showoption">lib.options.showOption</h3>
<p><em>parts</em></p>
<p>Convert an option, described as a list of the option parts in to a
safe, human readable version.</p>
<ul>
<li><p><code>parts</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.options.showOption usage example:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="op">(</span>showOption <span class="op">[</span><span class="st">&quot;foo&quot;</span> <span class="st">&quot;bar&quot;</span> <span class="st">&quot;baz&quot;</span><span class="op">])</span> == <span class="st">&quot;foo.bar.baz&quot;</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="op">(</span>showOption <span class="op">[</span><span class="st">&quot;foo&quot;</span> <span class="st">&quot;bar.baz&quot;</span> <span class="st">&quot;tux&quot;</span><span class="op">])</span> == <span class="st">&quot;foo.bar.baz.tux&quot;</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>Placeholders will not be quoted as they are not actual <span class="va">values</span><span class="op">:</span></span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a><span class="op">(</span>showOption <span class="op">[</span><span class="st">&quot;foo&quot;</span> <span class="st">&quot;*&quot;</span> <span class="st">&quot;bar&quot;</span><span class="op">])</span> == <span class="st">&quot;foo.*.bar&quot;</span></span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a><span class="op">(</span>showOption <span class="op">[</span><span class="st">&quot;foo&quot;</span> <span class="st">&quot;&lt;name&gt;&quot;</span> <span class="st">&quot;bar&quot;</span><span class="op">])</span> == <span class="st">&quot;foo.&lt;name&gt;.bar&quot;</span></span>
<span id="cb141-7"><a href="#cb141-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-8"><a href="#cb141-8" aria-hidden="true" tabindex="-1"></a>Unlike attributes, options can also start <span class="kw">with</span> <span class="va">numbers</span><span class="op">:</span></span>
<span id="cb141-9"><a href="#cb141-9" aria-hidden="true" tabindex="-1"></a><span class="op">(</span>showOption <span class="op">[</span><span class="st">&quot;windowManager&quot;</span> <span class="st">&quot;2bwm&quot;</span> <span class="st">&quot;enable&quot;</span><span class="op">])</span> == <span class="st">&quot;windowManager.2bwm.enable&quot;</span></span></code></pre></div>
<h2 id="source-filtering-functions">Source filtering functions</h2>
<h3 id="lib.sources.pathtype">lib.sources.pathType</h3>
<p><em>path</em></p>
<p>Returns the type of a path: regular (for file), symlink, or
directory.</p>
<ul>
<li><p><code>path</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.sources.pathisdirectory">lib.sources.pathIsDirectory</h3>
<p><em>path</em></p>
<p>Returns true if the path exists and is a directory, false
otherwise.</p>
<ul>
<li><p><code>path</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.sources.pathisregularfile">lib.sources.pathIsRegularFile</h3>
<p><em>path</em></p>
<p>Returns true if the path exists and is a regular file, false
otherwise.</p>
<ul>
<li><p><code>path</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.sources.cleansourcefilter">lib.sources.cleanSourceFilter</h3>
<p><em>name, type</em></p>
<p>A basic filter for <code>cleanSourceWith</code> that removes
directories of version control system, backup files (*~) and some
generated files.</p>
<ul>
<li><p><code>name</code></p>
<p>Function argument</p></li>
<li><p><code>type</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.sources.cleansource">lib.sources.cleanSource</h3>
<p><em>src</em></p>
<p>Filters a source tree removing version control files and directories
using cleanSourceFilter.</p>
<ul>
<li><p><code>src</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.sources.cleanSource usage example:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>cleanSource <span class="ss">./.</span></span></code></pre></div>
<h3 id="lib.sources.cleansourcewith">lib.sources.cleanSourceWith</h3>
<p><em>pattern, src, filter, name, src, filter, name</em></p>
<p>Like <code>builtins.filterSource</code>, except it will compose with
itself, allowing you to chain multiple calls together without any
intermediate copies being put in the nix store.</p>
<ul>
<li><p><code>pattern</code></p>
<p>Structured function argument</p></li>
<li><p><code>src</code></p>
<p>A path or cleanSourceWith result to filter and/or rename.</p></li>
<li><p><code>filter</code></p>
<p>Optional with default value: constant true (include
everything)</p></li>
<li><p><code>name</code></p>
<p>Optional name to use as part of the store path.</p></li>
<li><p><code>src</code></p>
<p>A path or cleanSourceWith result to filter and/or rename.</p></li>
<li><p><code>filter</code></p>
<p>Optional with default value: constant true (include
everything)</p></li>
<li><p><code>name</code></p>
<p>Optional name to use as part of the store path.</p></li>
</ul>
<p>lib.sources.cleanSourceWith usage example:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>lib.cleanSourceWith <span class="op">{</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="va">filter</span> <span class="op">=</span> f<span class="op">;</span></span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a><span class="va">src</span> <span class="op">=</span> lib.cleanSourceWith <span class="op">{</span></span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a><span class="va">filter</span> <span class="op">=</span> g<span class="op">;</span></span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a><span class="va">src</span> <span class="op">=</span> <span class="ss">./.</span><span class="op">;</span></span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb143-7"><a href="#cb143-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb143-8"><a href="#cb143-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Succeeds!</span></span>
<span id="cb143-9"><a href="#cb143-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-10"><a href="#cb143-10" aria-hidden="true" tabindex="-1"></a><span class="bu">builtins</span>.filterSource f <span class="op">(</span><span class="bu">builtins</span>.filterSource g <span class="ss">./.</span><span class="op">)</span></span>
<span id="cb143-11"><a href="#cb143-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Fails!</span></span></code></pre></div>
<h3 id="lib.sources.trace">lib.sources.trace</h3>
<p><em>src</em></p>
<p><code>sources.trace :: sourceLike -&gt; Source</code></p>
<p>Add logging to a source, for troubleshooting the filtering
behavior.</p>
<ul>
<li><p><code>src</code></p>
<p>Source to debug. The returned source will behave like this source,
but also log its filter invocations.</p></li>
</ul>
<h3 id="lib.sources.sourcebyregex">lib.sources.sourceByRegex</h3>
<p><em>src, regexes</em></p>
<p>Filter sources by a list of regular expressions.</p>
<ul>
<li><p><code>src</code></p>
<p>Function argument</p></li>
<li><p><code>regexes</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.sources.sourceByRegex usage example:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>src = sourceByRegex <span class="ss">./my-subproject</span> <span class="op">[</span><span class="st">&quot;.*</span><span class="sc">\.</span><span class="st">py$&quot;</span> <span class="st">&quot;^database.sql$&quot;</span><span class="op">]</span></span></code></pre></div>
<h3 id="lib.sources.sourcefilesbysuffices">lib.sources.sourceFilesBySuffices</h3>
<p><em>src, exts</em></p>
<p><code>sourceLike -&gt; [String] -&gt; Source</code></p>
<p>Get all files ending with the specified suffices from the given
source directory or its descendants, omitting files that do not match
any suffix. The result of the example below will include files like
<code>./dir/module.c</code> and <code>./dir/subdir/doc.xml</code> if
present.</p>
<ul>
<li><p><code>src</code></p>
<p>Path or source containing the files to be returned</p></li>
<li><p><code>exts</code></p>
<p>A list of file suffix strings</p></li>
</ul>
<p>lib.sources.sourceFilesBySuffices usage example:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>sourceFilesBySuffices <span class="ss">./.</span> <span class="op">[</span> <span class="st">&quot;.xml&quot;</span> <span class="st">&quot;.c&quot;</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.sources.commitidfromgitrepo">lib.sources.commitIdFromGitRepo</h3>
<p>__</p>
<p>Get the commit id of a git repo.</p>
<p>lib.sources.commitIdFromGitRepo usage example:</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>commitIdFromGitRepo &lt;<span class="ss">nixpkgs/.git</span>&gt;</span></code></pre></div>
<h2 id="string-manipulation-functions">String manipulation
functions</h2>
<h3 id="lib.strings.concatstrings">lib.strings.concatStrings</h3>
<p>__</p>
<p><code>concatStrings :: [string] -&gt; string</code></p>
<p>Concatenate a list of strings.</p>
<p>lib.strings.concatStrings usage example:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>concatStrings <span class="op">[</span><span class="st">&quot;foo&quot;</span> <span class="st">&quot;bar&quot;</span><span class="op">]</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;foobar&quot;</span></span></code></pre></div>
<h3 id="lib.strings.concatmapstrings">lib.strings.concatMapStrings</h3>
<p><em>f, list</em></p>
<p><code>concatMapStrings :: (a -&gt; string) -&gt; [a] -&gt; string</code></p>
<p>Map a function over a list and concatenate the resulting strings.</p>
<ul>
<li><p><code>f</code></p>
<p>Function argument</p></li>
<li><p><code>list</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.concatMapStrings usage example:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>concatMapStrings <span class="op">(</span><span class="va">x</span><span class="op">:</span> <span class="st">&quot;a&quot;</span> <span class="op">+</span> x<span class="op">)</span> <span class="op">[</span><span class="st">&quot;foo&quot;</span> <span class="st">&quot;bar&quot;</span><span class="op">]</span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;afooabar&quot;</span></span></code></pre></div>
<h3 id="lib.strings.concatimapstrings">lib.strings.concatImapStrings</h3>
<p><em>f, list</em></p>
<p><code>concatImapStrings :: (int -&gt; a -&gt; string) -&gt; [a] -&gt; string</code></p>
<p>Like <code>concatMapStrings</code> except that the f functions also
gets the position as a parameter.</p>
<ul>
<li><p><code>f</code></p>
<p>Function argument</p></li>
<li><p><code>list</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.concatImapStrings usage example:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>concatImapStrings <span class="op">(</span><span class="va">pos</span><span class="op">:</span> <span class="va">x</span><span class="op">:</span> <span class="st">&quot;</span><span class="sc">${</span><span class="bu">toString</span> pos<span class="sc">}</span><span class="st">-</span><span class="sc">${</span>x<span class="sc">}</span><span class="st">&quot;</span><span class="op">)</span> <span class="op">[</span><span class="st">&quot;foo&quot;</span> <span class="st">&quot;bar&quot;</span><span class="op">]</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;1-foo2-bar&quot;</span></span></code></pre></div>
<h3 id="lib.strings.intersperse">lib.strings.intersperse</h3>
<p><em>separator, list</em></p>
<p><code>intersperse :: a -&gt; [a] -&gt; [a]</code></p>
<p>Place an element between each element of a list</p>
<ul>
<li><p><code>separator</code></p>
<p>Separator to add between elements</p></li>
<li><p><code>list</code></p>
<p>Input list</p></li>
</ul>
<p>lib.strings.intersperse usage example:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>intersperse <span class="st">&quot;/&quot;</span> <span class="op">[</span><span class="st">&quot;usr&quot;</span> <span class="st">&quot;local&quot;</span> <span class="st">&quot;bin&quot;</span><span class="op">]</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span><span class="st">&quot;usr&quot;</span> <span class="st">&quot;/&quot;</span> <span class="st">&quot;local&quot;</span> <span class="st">&quot;/&quot;</span> <span class="st">&quot;bin&quot;</span><span class="op">]</span>.</span></code></pre></div>
<h3 id="lib.strings.concatstringssep">lib.strings.concatStringsSep</h3>
<p>__</p>
<p><code>concatStringsSep :: string -&gt; [string] -&gt; string</code></p>
<p>Concatenate a list of strings with a separator between each
element</p>
<p>lib.strings.concatStringsSep usage example:</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>concatStringsSep <span class="st">&quot;/&quot;</span> <span class="op">[</span><span class="st">&quot;usr&quot;</span> <span class="st">&quot;local&quot;</span> <span class="st">&quot;bin&quot;</span><span class="op">]</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;usr/local/bin&quot;</span></span></code></pre></div>
<h3 id="lib.strings.concatmapstringssep">lib.strings.concatMapStringsSep</h3>
<p><em>sep, f, list</em></p>
<p><code>concatMapStringsSep :: string -&gt; (a -&gt; string) -&gt; [a] -&gt; string</code></p>
<p>Maps a function over a list of strings and then concatenates the
result with the specified separator interspersed between elements.</p>
<ul>
<li><p><code>sep</code></p>
<p>Separator to add between elements</p></li>
<li><p><code>f</code></p>
<p>Function to map over the list</p></li>
<li><p><code>list</code></p>
<p>List of input strings</p></li>
</ul>
<p>lib.strings.concatMapStringsSep usage example:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>concatMapStringsSep <span class="st">&quot;-&quot;</span> <span class="op">(</span><span class="va">x</span><span class="op">:</span> toUpper x<span class="op">)</span>  <span class="op">[</span><span class="st">&quot;foo&quot;</span> <span class="st">&quot;bar&quot;</span> <span class="st">&quot;baz&quot;</span><span class="op">]</span></span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;FOO-BAR-BAZ&quot;</span></span></code></pre></div>
<h3 id="lib.strings.concatimapstringssep">lib.strings.concatImapStringsSep</h3>
<p><em>sep, f, list</em></p>
<p><code>concatIMapStringsSep :: string -&gt; (int -&gt; a -&gt; string) -&gt; [a] -&gt; string</code></p>
<p>Same as <code>concatMapStringsSep</code>, but the mapping function
additionally receives the position of its argument.</p>
<ul>
<li><p><code>sep</code></p>
<p>Separator to add between elements</p></li>
<li><p><code>f</code></p>
<p>Function that receives elements and their positions</p></li>
<li><p><code>list</code></p>
<p>List of input strings</p></li>
</ul>
<p>lib.strings.concatImapStringsSep usage example:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>concatImapStringsSep <span class="st">&quot;-&quot;</span> <span class="op">(</span><span class="va">pos</span><span class="op">:</span> <span class="va">x</span><span class="op">:</span> <span class="bu">toString</span> <span class="op">(</span>x <span class="op">/</span> pos<span class="op">))</span> <span class="op">[</span> <span class="dv">6</span> <span class="dv">6</span> <span class="dv">6</span> <span class="op">]</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;6-3-2&quot;</span></span></code></pre></div>
<h3 id="lib.strings.makesearchpath">lib.strings.makeSearchPath</h3>
<p><em>subDir, paths</em></p>
<p><code>makeSearchPath :: string -&gt; [string] -&gt; string</code></p>
<p>Construct a Unix-style, colon-separated search path consisting of the
given <code>subDir</code> appended to each of the given paths.</p>
<ul>
<li><p><code>subDir</code></p>
<p>Directory name to append</p></li>
<li><p><code>paths</code></p>
<p>List of base paths</p></li>
</ul>
<p>lib.strings.makeSearchPath usage example:</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>makeSearchPath <span class="st">&quot;bin&quot;</span> <span class="op">[</span><span class="st">&quot;/root&quot;</span> <span class="st">&quot;/usr&quot;</span> <span class="st">&quot;/usr/local&quot;</span><span class="op">]</span></span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;/root/bin:/usr/bin:/usr/local/bin&quot;</span></span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a>makeSearchPath <span class="st">&quot;bin&quot;</span> <span class="op">[</span><span class="st">&quot;&quot;</span><span class="op">]</span></span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;/bin&quot;</span></span></code></pre></div>
<h3 id="lib.strings.makesearchpathoutput">lib.strings.makeSearchPathOutput</h3>
<p><em>output, subDir, pkgs</em></p>
<p><code>string -&gt; string -&gt; [package] -&gt; string</code></p>
<p>Construct a Unix-style search path by appending the given
<code>subDir</code> to the specified <code>output</code> of each of the
packages. If no output by the given name is found, fallback to
<code>.out</code> and then to the default.</p>
<ul>
<li><p><code>output</code></p>
<p>Package output to use</p></li>
<li><p><code>subDir</code></p>
<p>Directory name to append</p></li>
<li><p><code>pkgs</code></p>
<p>List of packages</p></li>
</ul>
<p>lib.strings.makeSearchPathOutput usage example:</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>makeSearchPathOutput <span class="st">&quot;dev&quot;</span> <span class="st">&quot;bin&quot;</span> <span class="op">[</span> pkgs.openssl pkgs.zlib <span class="op">]</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;/nix/store/9rz8gxhzf8sw4kf2j2f1grr49w8zx5vj-openssl-1.0.1r-dev/bin:/nix/store/wwh7mhwh269sfjkm6k5665b5kgp7jrk2-zlib-1.2.8/bin&quot;</span></span></code></pre></div>
<h3 id="lib.strings.makelibrarypath">lib.strings.makeLibraryPath</h3>
<p>__</p>
<p>Construct a library search path (such as RPATH) containing the
libraries for a set of packages</p>
<p>lib.strings.makeLibraryPath usage example:</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>makeLibraryPath <span class="op">[</span> <span class="st">&quot;/usr&quot;</span> <span class="st">&quot;/usr/local&quot;</span> <span class="op">]</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;/usr/lib:/usr/local/lib&quot;</span></span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a>pkgs = <span class="bu">import</span> &lt;nixpkgs&gt; <span class="op">{</span> <span class="op">}</span></span>
<span id="cb156-4"><a href="#cb156-4" aria-hidden="true" tabindex="-1"></a>makeLibraryPath <span class="op">[</span> pkgs.openssl pkgs.zlib <span class="op">]</span></span>
<span id="cb156-5"><a href="#cb156-5" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;/nix/store/9rz8gxhzf8sw4kf2j2f1grr49w8zx5vj-openssl-1.0.1r/lib:/nix/store/wwh7mhwh269sfjkm6k5665b5kgp7jrk2-zlib-1.2.8/lib&quot;</span></span></code></pre></div>
<h3 id="lib.strings.makebinpath">lib.strings.makeBinPath</h3>
<p>__</p>
<p>Construct a binary search path (such as $PATH) containing the
binaries for a set of packages.</p>
<p>lib.strings.makeBinPath usage example:</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>makeBinPath <span class="op">[</span><span class="st">&quot;/root&quot;</span> <span class="st">&quot;/usr&quot;</span> <span class="st">&quot;/usr/local&quot;</span><span class="op">]</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;/root/bin:/usr/bin:/usr/local/bin&quot;</span></span></code></pre></div>
<h3 id="lib.strings.optionalstring">lib.strings.optionalString</h3>
<p><em>cond, string</em></p>
<p><code>optionalString :: bool -&gt; string -&gt; string</code></p>
<p>Depending on the boolean `cond’, return either the given string or
the empty string. Useful to concatenate against a bigger string.</p>
<ul>
<li><p><code>cond</code></p>
<p>Condition</p></li>
<li><p><code>string</code></p>
<p>String to return if condition is true</p></li>
</ul>
<p>lib.strings.optionalString usage example:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>optionalString <span class="cn">true</span> <span class="st">&quot;some-string&quot;</span></span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;some-string&quot;</span></span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a>optionalString <span class="cn">false</span> <span class="st">&quot;some-string&quot;</span></span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;&quot;</span></span></code></pre></div>
<h3 id="lib.strings.hasprefix">lib.strings.hasPrefix</h3>
<p><em>pref, str</em></p>
<p><code>hasPrefix :: string -&gt; string -&gt; bool</code></p>
<p>Determine whether a string has given prefix.</p>
<ul>
<li><p><code>pref</code></p>
<p>Prefix to check for</p></li>
<li><p><code>str</code></p>
<p>Input string</p></li>
</ul>
<p>lib.strings.hasPrefix usage example:</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>hasPrefix <span class="st">&quot;foo&quot;</span> <span class="st">&quot;foobar&quot;</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a>hasPrefix <span class="st">&quot;foo&quot;</span> <span class="st">&quot;barfoo&quot;</span></span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">false</span></span></code></pre></div>
<h3 id="lib.strings.hassuffix">lib.strings.hasSuffix</h3>
<p><em>suffix, content</em></p>
<p><code>hasSuffix :: string -&gt; string -&gt; bool</code></p>
<p>Determine whether a string has given suffix.</p>
<ul>
<li><p><code>suffix</code></p>
<p>Suffix to check for</p></li>
<li><p><code>content</code></p>
<p>Input string</p></li>
</ul>
<p>lib.strings.hasSuffix usage example:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>hasSuffix <span class="st">&quot;foo&quot;</span> <span class="st">&quot;foobar&quot;</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">false</span></span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a>hasSuffix <span class="st">&quot;foo&quot;</span> <span class="st">&quot;barfoo&quot;</span></span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span></code></pre></div>
<h3 id="lib.strings.hasinfix">lib.strings.hasInfix</h3>
<p><em>infix, content</em></p>
<p><code>hasInfix :: string -&gt; string -&gt; bool</code></p>
<p>Determine whether a string contains the given infix</p>
<ul>
<li><p><code>infix</code></p>
<p>Function argument</p></li>
<li><p><code>content</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.hasInfix usage example:</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>hasInfix <span class="st">&quot;bc&quot;</span> <span class="st">&quot;abcd&quot;</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>hasInfix <span class="st">&quot;ab&quot;</span> <span class="st">&quot;abcd&quot;</span></span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a>hasInfix <span class="st">&quot;cd&quot;</span> <span class="st">&quot;abcd&quot;</span></span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span>
<span id="cb161-7"><a href="#cb161-7" aria-hidden="true" tabindex="-1"></a>hasInfix <span class="st">&quot;foo&quot;</span> <span class="st">&quot;abcd&quot;</span></span>
<span id="cb161-8"><a href="#cb161-8" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">false</span></span></code></pre></div>
<h3 id="lib.strings.stringtocharacters">lib.strings.stringToCharacters</h3>
<p><em>s</em></p>
<p><code>stringToCharacters :: string -&gt; [string]</code></p>
<p>Convert a string to a list of characters (i.e. singleton strings).
This allows you to, e.g., map a function over each character. However,
note that this will likely be horribly inefficient; Nix is not a general
purpose programming language. Complex string manipulations should, if
appropriate, be done in a derivation. Also note that Nix treats strings
as a list of bytes and thus doesn’t handle unicode.</p>
<ul>
<li><p><code>s</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.stringToCharacters usage example:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>stringToCharacters <span class="st">&quot;&quot;</span></span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="op">]</span></span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a>stringToCharacters <span class="st">&quot;abc&quot;</span></span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="st">&quot;a&quot;</span> <span class="st">&quot;b&quot;</span> <span class="st">&quot;c&quot;</span> <span class="op">]</span></span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true" tabindex="-1"></a>stringToCharacters <span class="st">&quot;💩&quot;</span></span>
<span id="cb162-6"><a href="#cb162-6" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="st">&quot;�&quot;</span> <span class="st">&quot;�&quot;</span> <span class="st">&quot;�&quot;</span> <span class="st">&quot;�&quot;</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.strings.stringaschars">lib.strings.stringAsChars</h3>
<p><em>f, s</em></p>
<p><code>stringAsChars :: (string -&gt; string) -&gt; string -&gt; string</code></p>
<p>Manipulate a string character by character and replace them by
strings before concatenating the results.</p>
<ul>
<li><p><code>f</code></p>
<p>Function to map over each individual character</p></li>
<li><p><code>s</code></p>
<p>Input string</p></li>
</ul>
<p>lib.strings.stringAsChars usage example:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>stringAsChars <span class="op">(</span><span class="va">x</span><span class="op">:</span> <span class="kw">if</span> x == <span class="st">&quot;a&quot;</span> <span class="kw">then</span> <span class="st">&quot;i&quot;</span> <span class="kw">else</span> x<span class="op">)</span> <span class="st">&quot;nax&quot;</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;nix&quot;</span></span></code></pre></div>
<h3 id="lib.strings.escape">lib.strings.escape</h3>
<p><em>list</em></p>
<p><code>escape :: [string] -&gt; string -&gt; string</code></p>
<p>Escape occurrence of the elements of <code>list</code> in
<code>string</code> by prefixing it with a backslash.</p>
<ul>
<li><p><code>list</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.escape usage example:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>escape <span class="op">[</span><span class="st">&quot;(&quot;</span> <span class="st">&quot;)&quot;</span><span class="op">]</span> <span class="st">&quot;(foo)&quot;</span></span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;</span><span class="sc">\\</span><span class="st">(foo</span><span class="sc">\\</span><span class="st">)&quot;</span></span></code></pre></div>
<h3 id="lib.strings.escapeshellarg">lib.strings.escapeShellArg</h3>
<p><em>arg</em></p>
<p><code>escapeShellArg :: string -&gt; string</code></p>
<p>Quote string to be used safely within the Bourne shell.</p>
<ul>
<li><p><code>arg</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.escapeShellArg usage example:</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>escapeShellArg <span class="st">&quot;esc&#39;ape</span><span class="sc">\n</span><span class="st">me&quot;</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;&#39;esc&#39;</span><span class="sc">\\</span><span class="st">&#39;&#39;ape</span><span class="sc">\n</span><span class="st">me&#39;&quot;</span></span></code></pre></div>
<h3 id="lib.strings.escapeshellargs">lib.strings.escapeShellArgs</h3>
<p>__</p>
<p><code>escapeShellArgs :: [string] -&gt; string</code></p>
<p>Quote all arguments to be safely passed to the Bourne shell.</p>
<p>lib.strings.escapeShellArgs usage example:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>escapeShellArgs <span class="op">[</span><span class="st">&quot;one&quot;</span> <span class="st">&quot;two three&quot;</span> <span class="st">&quot;four&#39;five&quot;</span><span class="op">]</span></span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;&#39;one&#39; &#39;two three&#39; &#39;four&#39;</span><span class="sc">\\</span><span class="st">&#39;&#39;five&#39;&quot;</span></span></code></pre></div>
<h3 id="lib.strings.isvalidposixname">lib.strings.isValidPosixName</h3>
<p><em>name</em></p>
<p><code>string -&gt; bool</code></p>
<p>Test whether the given name is a valid POSIX shell variable name.</p>
<ul>
<li><p><code>name</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.isValidPosixName usage example:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>isValidPosixName <span class="st">&quot;foo_bar000&quot;</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a>isValidPosixName <span class="st">&quot;0-bad.jpg&quot;</span></span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">false</span></span></code></pre></div>
<h3 id="lib.strings.toshellvar">lib.strings.toShellVar</h3>
<p><em>name, value</em></p>
<p><code>string -&gt; (string | listOf string | attrsOf string) -&gt; string</code></p>
<p>Translate a Nix value into a shell variable declaration, with proper
escaping.</p>
<ul>
<li><p><code>name</code></p>
<p>Function argument</p></li>
<li><p><code>value</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.toShellVar usage example:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;&#39;</span></span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>toShellVar <span class="st">&quot;foo&quot;</span> <span class="st">&quot;some string&quot;</span><span class="sc">}</span></span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a><span class="st">[[ &quot;$foo&quot; == &quot;some string&quot; ]]</span></span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;&#39;</span></span></code></pre></div>
<h3 id="lib.strings.toshellvars">lib.strings.toShellVars</h3>
<p><em>vars</em></p>
<p><code>attrsOf (string | listOf string | attrsOf string) -&gt; string</code></p>
<p>Translate an attribute set into corresponding shell variable
declarations using <code>toShellVar</code>.</p>
<ul>
<li><p><code>vars</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.toShellVars usage example:</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a><span class="va">foo</span> <span class="op">=</span> <span class="st">&quot;value&quot;</span><span class="op">;</span></span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a><span class="va">bar</span> <span class="op">=</span> foo<span class="op">;</span></span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a><span class="kw">in</span> <span class="st">&#39;&#39;</span></span>
<span id="cb169-5"><a href="#cb169-5" aria-hidden="true" tabindex="-1"></a><span class="sc">${</span>toShellVars <span class="op">{</span> <span class="kw">inherit</span> foo bar<span class="op">;</span> <span class="op">}</span><span class="sc">}</span></span>
<span id="cb169-6"><a href="#cb169-6" aria-hidden="true" tabindex="-1"></a><span class="st">[[ &quot;$foo&quot; == &quot;$bar&quot; ]]</span></span>
<span id="cb169-7"><a href="#cb169-7" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;&#39;</span></span></code></pre></div>
<h3 id="lib.strings.escapenixstring">lib.strings.escapeNixString</h3>
<p><em>s</em></p>
<p><code>string -&gt; string</code></p>
<p>Turn a string into a Nix expression representing that string</p>
<ul>
<li><p><code>s</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.escapeNixString usage example:</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>escapeNixString <span class="st">&quot;hello</span><span class="sc">\$</span><span class="st">{}</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">hello</span><span class="sc">\\\$</span><span class="st">{}</span><span class="sc">\\</span><span class="st">n</span><span class="sc">\&quot;</span><span class="st">&quot;</span></span></code></pre></div>
<h3 id="lib.strings.escaperegex">lib.strings.escapeRegex</h3>
<p>__</p>
<p><code>string -&gt; string</code></p>
<p>Turn a string into an exact regular expression</p>
<p>lib.strings.escapeRegex usage example:</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>escapeRegex <span class="st">&quot;[^a-z]*&quot;</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;</span><span class="sc">\\</span><span class="st">[</span><span class="sc">\\</span><span class="st">^a-z]</span><span class="sc">\\</span><span class="st">*&quot;</span></span></code></pre></div>
<h3 id="lib.strings.escapenixidentifier">lib.strings.escapeNixIdentifier</h3>
<p><em>s</em></p>
<p><code>string -&gt; string</code></p>
<p>Quotes a string if it can’t be used as an identifier directly.</p>
<ul>
<li><p><code>s</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.escapeNixIdentifier usage example:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a>escapeNixIdentifier <span class="st">&quot;hello&quot;</span></span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;hello&quot;</span></span>
<span id="cb172-3"><a href="#cb172-3" aria-hidden="true" tabindex="-1"></a>escapeNixIdentifier <span class="st">&quot;0abc&quot;</span></span>
<span id="cb172-4"><a href="#cb172-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">0abc</span><span class="sc">\&quot;</span><span class="st">&quot;</span></span></code></pre></div>
<h3 id="lib.strings.escapexml">lib.strings.escapeXML</h3>
<p>__</p>
<p><code>string -&gt; string</code></p>
<p>Escapes a string such that it is safe to include verbatim in an XML
document.</p>
<p>lib.strings.escapeXML usage example:</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>escapeXML <span class="st">&#39;&#39;&quot;test&quot; &#39;test&#39; &lt; &amp; &gt;&#39;&#39;</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;&amp;quot;test&amp;quot; &amp;apos;test&amp;apos; &amp;lt; &amp;amp; &amp;gt;&quot;</span></span></code></pre></div>
<h3 id="lib.strings.tolower">lib.strings.toLower</h3>
<p>__</p>
<p><code>toLower :: string -&gt; string</code></p>
<p>Converts an ASCII string to lower-case.</p>
<p>lib.strings.toLower usage example:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>toLower <span class="st">&quot;HOME&quot;</span></span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;home&quot;</span></span></code></pre></div>
<h3 id="lib.strings.toupper">lib.strings.toUpper</h3>
<p>__</p>
<p><code>toUpper :: string -&gt; string</code></p>
<p>Converts an ASCII string to upper-case.</p>
<p>lib.strings.toUpper usage example:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>toUpper <span class="st">&quot;home&quot;</span></span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;HOME&quot;</span></span></code></pre></div>
<h3 id="lib.strings.addcontextfrom">lib.strings.addContextFrom</h3>
<p><em>a, b</em></p>
<p>Appends string context from another string. This is an implementation
detail of Nix.</p>
<ul>
<li><p><code>a</code></p>
<p>Function argument</p></li>
<li><p><code>b</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.addContextFrom usage example:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>pkgs = <span class="bu">import</span> &lt;nixpkgs&gt; <span class="op">{</span> <span class="op">}</span>;</span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a>addContextFrom pkgs.coreutils <span class="st">&quot;bar&quot;</span></span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;bar&quot;</span></span></code></pre></div>
<h3 id="lib.strings.splitstring">lib.strings.splitString</h3>
<p>__sep, <em>s</em></p>
<p>Cut a string with a separator and produces a list of strings which
were separated by this separator.</p>
<ul>
<li><p><code>_sep</code></p>
<p>Function argument</p></li>
<li><p><code>_s</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.splitString usage example:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>splitString <span class="st">&quot;.&quot;</span> <span class="st">&quot;foo.bar.baz&quot;</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="st">&quot;foo&quot;</span> <span class="st">&quot;bar&quot;</span> <span class="st">&quot;baz&quot;</span> <span class="op">]</span></span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a>splitString <span class="st">&quot;/&quot;</span> <span class="st">&quot;/usr/local/bin&quot;</span></span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="st">&quot;&quot;</span> <span class="st">&quot;usr&quot;</span> <span class="st">&quot;local&quot;</span> <span class="st">&quot;bin&quot;</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.strings.removeprefix">lib.strings.removePrefix</h3>
<p><em>prefix, str</em></p>
<p><code>string -&gt; string -&gt; string</code></p>
<p>Return a string without the specified prefix, if the prefix
matches.</p>
<ul>
<li><p><code>prefix</code></p>
<p>Prefix to remove if it matches</p></li>
<li><p><code>str</code></p>
<p>Input string</p></li>
</ul>
<p>lib.strings.removePrefix usage example:</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>removePrefix <span class="st">&quot;foo.&quot;</span> <span class="st">&quot;foo.bar.baz&quot;</span></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;bar.baz&quot;</span></span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a>removePrefix <span class="st">&quot;xxx&quot;</span> <span class="st">&quot;foo.bar.baz&quot;</span></span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;foo.bar.baz&quot;</span></span></code></pre></div>
<h3 id="lib.strings.removesuffix">lib.strings.removeSuffix</h3>
<p><em>suffix, str</em></p>
<p><code>string -&gt; string -&gt; string</code></p>
<p>Return a string without the specified suffix, if the suffix
matches.</p>
<ul>
<li><p><code>suffix</code></p>
<p>Suffix to remove if it matches</p></li>
<li><p><code>str</code></p>
<p>Input string</p></li>
</ul>
<p>lib.strings.removeSuffix usage example:</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>removeSuffix <span class="st">&quot;front&quot;</span> <span class="st">&quot;homefront&quot;</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;home&quot;</span></span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a>removeSuffix <span class="st">&quot;xxx&quot;</span> <span class="st">&quot;homefront&quot;</span></span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;homefront&quot;</span></span></code></pre></div>
<h3 id="lib.strings.versionolder">lib.strings.versionOlder</h3>
<p><em>v1, v2</em></p>
<p>Return true if string v1 denotes a version older than v2.</p>
<ul>
<li><p><code>v1</code></p>
<p>Function argument</p></li>
<li><p><code>v2</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.versionOlder usage example:</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>versionOlder <span class="st">&quot;1.1&quot;</span> <span class="st">&quot;1.2&quot;</span></span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a>versionOlder <span class="st">&quot;1.1&quot;</span> <span class="st">&quot;1.1&quot;</span></span>
<span id="cb180-4"><a href="#cb180-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">false</span></span></code></pre></div>
<h3 id="lib.strings.versionatleast">lib.strings.versionAtLeast</h3>
<p><em>v1, v2</em></p>
<p>Return true if string v1 denotes a version equal to or newer than
v2.</p>
<ul>
<li><p><code>v1</code></p>
<p>Function argument</p></li>
<li><p><code>v2</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.versionAtLeast usage example:</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>versionAtLeast <span class="st">&quot;1.1&quot;</span> <span class="st">&quot;1.0&quot;</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a>versionAtLeast <span class="st">&quot;1.1&quot;</span> <span class="st">&quot;1.1&quot;</span></span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span>
<span id="cb181-5"><a href="#cb181-5" aria-hidden="true" tabindex="-1"></a>versionAtLeast <span class="st">&quot;1.1&quot;</span> <span class="st">&quot;1.2&quot;</span></span>
<span id="cb181-6"><a href="#cb181-6" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">false</span></span></code></pre></div>
<h3 id="lib.strings.getname">lib.strings.getName</h3>
<p><em>x</em></p>
<p>This function takes an argument that’s either a derivation or a
derivation’s “name” attribute and extracts the name part from that
argument.</p>
<ul>
<li><p><code>x</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.getName usage example:</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a>getName <span class="st">&quot;youtube-dl-2016.01.01&quot;</span></span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;youtube-dl&quot;</span></span>
<span id="cb182-3"><a href="#cb182-3" aria-hidden="true" tabindex="-1"></a>getName pkgs.youtube<span class="op">-</span>dl</span>
<span id="cb182-4"><a href="#cb182-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;youtube-dl&quot;</span></span></code></pre></div>
<h3 id="lib.strings.getversion">lib.strings.getVersion</h3>
<p><em>x</em></p>
<p>This function takes an argument that’s either a derivation or a
derivation’s “name” attribute and extracts the version part from that
argument.</p>
<ul>
<li><p><code>x</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.getVersion usage example:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>getVersion <span class="st">&quot;youtube-dl-2016.01.01&quot;</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;2016.01.01&quot;</span></span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a>getVersion pkgs.youtube<span class="op">-</span>dl</span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;2016.01.01&quot;</span></span></code></pre></div>
<h3 id="lib.strings.namefromurl">lib.strings.nameFromURL</h3>
<p><em>url, sep</em></p>
<p>Extract name with version from URL. Ask for separator which is
supposed to start extension.</p>
<ul>
<li><p><code>url</code></p>
<p>Function argument</p></li>
<li><p><code>sep</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.nameFromURL usage example:</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a>nameFromURL <span class="st">&quot;https://nixos.org/releases/nix/nix-1.7/nix-1.7-x86_64-linux.tar.bz2&quot;</span> <span class="st">&quot;-&quot;</span></span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;nix&quot;</span></span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a>nameFromURL <span class="st">&quot;https://nixos.org/releases/nix/nix-1.7/nix-1.7-x86_64-linux.tar.bz2&quot;</span> <span class="st">&quot;_&quot;</span></span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;nix-1.7-x86&quot;</span></span></code></pre></div>
<h3 id="lib.strings.enablefeature">lib.strings.enableFeature</h3>
<p><em>enable, feat</em></p>
<p>Create an –{enable,disable}-<feat> string that can be passed to
standard GNU Autoconf scripts.</p>
<ul>
<li><p><code>enable</code></p>
<p>Function argument</p></li>
<li><p><code>feat</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.enableFeature usage example:</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>enableFeature <span class="cn">true</span> <span class="st">&quot;shared&quot;</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;--enable-shared&quot;</span></span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a>enableFeature <span class="cn">false</span> <span class="st">&quot;shared&quot;</span></span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;--disable-shared&quot;</span></span></code></pre></div>
<h3 id="lib.strings.enablefeatureas">lib.strings.enableFeatureAs</h3>
<p><em>enable, feat, value</em></p>
<p>Create an –{enable-<feat>=<value>,disable-<feat>} string that can be
passed to standard GNU Autoconf scripts.</p>
<ul>
<li><p><code>enable</code></p>
<p>Function argument</p></li>
<li><p><code>feat</code></p>
<p>Function argument</p></li>
<li><p><code>value</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.enableFeatureAs usage example:</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>enableFeatureAs <span class="cn">true</span> <span class="st">&quot;shared&quot;</span> <span class="st">&quot;foo&quot;</span></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;--enable-shared=foo&quot;</span></span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a>enableFeatureAs <span class="cn">false</span> <span class="st">&quot;shared&quot;</span> <span class="op">(</span><span class="bu">throw</span> <span class="st">&quot;ignored&quot;</span><span class="op">)</span></span>
<span id="cb186-4"><a href="#cb186-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;--disable-shared&quot;</span></span></code></pre></div>
<h3 id="lib.strings.withfeature">lib.strings.withFeature</h3>
<p><em>with</em>, feat_</p>
<p>Create an –{with,without}-<feat> string that can be passed to
standard GNU Autoconf scripts.</p>
<ul>
<li><p><code>with_</code></p>
<p>Function argument</p></li>
<li><p><code>feat</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.withFeature usage example:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a>withFeature <span class="cn">true</span> <span class="st">&quot;shared&quot;</span></span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;--with-shared&quot;</span></span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a>withFeature <span class="cn">false</span> <span class="st">&quot;shared&quot;</span></span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;--without-shared&quot;</span></span></code></pre></div>
<h3 id="lib.strings.withfeatureas">lib.strings.withFeatureAs</h3>
<p><em>with</em>, feat, value_</p>
<p>Create an –{with-<feat>=<value>,without-<feat>} string that can be
passed to standard GNU Autoconf scripts.</p>
<ul>
<li><p><code>with_</code></p>
<p>Function argument</p></li>
<li><p><code>feat</code></p>
<p>Function argument</p></li>
<li><p><code>value</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.withFeatureAs usage example:</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>withFeatureAs <span class="cn">true</span> <span class="st">&quot;shared&quot;</span> <span class="st">&quot;foo&quot;</span></span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;--with-shared=foo&quot;</span></span>
<span id="cb188-3"><a href="#cb188-3" aria-hidden="true" tabindex="-1"></a>withFeatureAs <span class="cn">false</span> <span class="st">&quot;shared&quot;</span> <span class="op">(</span><span class="bu">throw</span> <span class="st">&quot;ignored&quot;</span><span class="op">)</span></span>
<span id="cb188-4"><a href="#cb188-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;--without-shared&quot;</span></span></code></pre></div>
<h3 id="lib.strings.fixedwidthstring">lib.strings.fixedWidthString</h3>
<p><em>width, filler, str</em></p>
<p><code>fixedWidthString :: int -&gt; string -&gt; string -&gt; string</code></p>
<p>Create a fixed width string with additional prefix to match required
width.</p>
<ul>
<li><p><code>width</code></p>
<p>Function argument</p></li>
<li><p><code>filler</code></p>
<p>Function argument</p></li>
<li><p><code>str</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.fixedWidthString usage example:</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>fixedWidthString <span class="dv">5</span> <span class="st">&quot;0&quot;</span> <span class="op">(</span><span class="bu">toString</span> <span class="dv">15</span><span class="op">)</span></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;00015&quot;</span></span></code></pre></div>
<h3 id="lib.strings.fixedwidthnumber">lib.strings.fixedWidthNumber</h3>
<p><em>width, n</em></p>
<p>Format a number adding leading zeroes up to fixed width.</p>
<ul>
<li><p><code>width</code></p>
<p>Function argument</p></li>
<li><p><code>n</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.fixedWidthNumber usage example:</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>fixedWidthNumber <span class="dv">5</span> <span class="dv">15</span></span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;00015&quot;</span></span></code></pre></div>
<h3 id="lib.strings.floattostring">lib.strings.floatToString</h3>
<p><em>float</em></p>
<p>Convert a float to a string, but emit a warning when precision is
lost during the conversion</p>
<ul>
<li><p><code>float</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.floatToString usage example:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>floatToString <span class="dv">0</span><span class="fl">.000001</span></span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;0.000001&quot;</span></span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a>floatToString <span class="dv">0</span><span class="fl">.0000001</span></span>
<span id="cb191-4"><a href="#cb191-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="va">trace</span><span class="op">:</span> <span class="va">warning</span><span class="op">:</span> Imprecise conversion from float to string <span class="dv">0</span><span class="fl">.000000</span></span>
<span id="cb191-5"><a href="#cb191-5" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;0.000000&quot;</span></span></code></pre></div>
<h3 id="lib.strings.iscoercibletostring">lib.strings.isCoercibleToString</h3>
<p><em>x</em></p>
<p>Check whether a value can be coerced to a string</p>
<ul>
<li><p><code>x</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.strings.isstorepath">lib.strings.isStorePath</h3>
<p><em>x</em></p>
<p>Check whether a value is a store path.</p>
<ul>
<li><p><code>x</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.isStorePath usage example:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>isStorePath <span class="st">&quot;/nix/store/d945ibfx9x185xf04b890y4f9g3cbb63-python-2.7.11/bin/python&quot;</span></span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">false</span></span>
<span id="cb192-3"><a href="#cb192-3" aria-hidden="true" tabindex="-1"></a>isStorePath <span class="st">&quot;/nix/store/d945ibfx9x185xf04b890y4f9g3cbb63-python-2.7.11&quot;</span></span>
<span id="cb192-4"><a href="#cb192-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span>
<span id="cb192-5"><a href="#cb192-5" aria-hidden="true" tabindex="-1"></a>isStorePath pkgs.python</span>
<span id="cb192-6"><a href="#cb192-6" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span>
<span id="cb192-7"><a href="#cb192-7" aria-hidden="true" tabindex="-1"></a>isStorePath <span class="op">[]</span> <span class="op">||</span> isStorePath <span class="dv">42</span> <span class="op">||</span> isStorePath <span class="op">{}</span> <span class="op">||</span> …</span>
<span id="cb192-8"><a href="#cb192-8" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">false</span></span></code></pre></div>
<h3 id="lib.strings.toint">lib.strings.toInt</h3>
<p><em>str</em></p>
<p><code>string -&gt; int</code></p>
<p>Parse a string as an int.</p>
<ul>
<li><p><code>str</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.toInt usage example:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a>toInt <span class="st">&quot;1337&quot;</span></span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">1337</span></span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a>toInt <span class="st">&quot;-4&quot;</span></span>
<span id="cb193-4"><a href="#cb193-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">-</span><span class="dv">4</span></span>
<span id="cb193-5"><a href="#cb193-5" aria-hidden="true" tabindex="-1"></a>toInt <span class="st">&quot;3.14&quot;</span></span>
<span id="cb193-6"><a href="#cb193-6" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="va">error</span><span class="op">:</span> floating point JSON numbers are not supported</span></code></pre></div>
<h3 id="lib.strings.readpathsfromfile">lib.strings.readPathsFromFile</h3>
<p>__</p>
<p>Read a list of paths from <code>file</code>, relative to the
<code>rootPath</code>. Lines beginning with <code>#</code> are treated
as comments and ignored. Whitespace is significant.</p>
<p>lib.strings.readPathsFromFile usage example:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>readPathsFromFile <span class="ss">/prefix</span></span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a><span class="ss">./pkgs/development/libraries/qt-5/5.4/qtbase/series</span></span>
<span id="cb194-3"><a href="#cb194-3" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="st">&quot;/prefix/dlopen-resolv.patch&quot;</span> <span class="st">&quot;/prefix/tzdir.patch&quot;</span></span>
<span id="cb194-4"><a href="#cb194-4" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;/prefix/dlopen-libXcursor.patch&quot;</span> <span class="st">&quot;/prefix/dlopen-openssl.patch&quot;</span></span>
<span id="cb194-5"><a href="#cb194-5" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;/prefix/dlopen-dbus.patch&quot;</span> <span class="st">&quot;/prefix/xdg-config-dirs.patch&quot;</span></span>
<span id="cb194-6"><a href="#cb194-6" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;/prefix/nix-profiles-library-paths.patch&quot;</span></span>
<span id="cb194-7"><a href="#cb194-7" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;/prefix/compose-search-path.patch&quot;</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.strings.filecontents">lib.strings.fileContents</h3>
<p><em>file</em></p>
<p><code>fileContents :: path -&gt; string</code></p>
<p>Read the contents of a file removing the trailing </p>
<ul>
<li><p><code>file</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.fileContents usage example:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a>$ echo <span class="st">&quot;1.0&quot;</span> &gt; <span class="ss">./version</span></span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a>fileContents <span class="ss">./version</span></span>
<span id="cb195-4"><a href="#cb195-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;1.0&quot;</span></span></code></pre></div>
<h3 id="lib.strings.sanitizederivationname">lib.strings.sanitizeDerivationName</h3>
<p>__</p>
<p><code>sanitizeDerivationName :: String -&gt; String</code></p>
<p>Creates a valid derivation name from a potentially invalid one.</p>
<p>lib.strings.sanitizeDerivationName usage example:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>sanitizeDerivationName <span class="st">&quot;../hello.bar # foo&quot;</span></span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;-hello.bar-foo&quot;</span></span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a>sanitizeDerivationName <span class="st">&quot;&quot;</span></span>
<span id="cb196-4"><a href="#cb196-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;unknown&quot;</span></span>
<span id="cb196-5"><a href="#cb196-5" aria-hidden="true" tabindex="-1"></a>sanitizeDerivationName pkgs.hello</span>
<span id="cb196-6"><a href="#cb196-6" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;-nix-store-2g75chlbpxlrqn15zlby2dfh8hr9qwbk-hello-2.10&quot;</span></span></code></pre></div>
<h3 id="lib.strings.levenshtein">lib.strings.levenshtein</h3>
<p><em>a, b</em></p>
<p><code>levenshtein :: string -&gt; string -&gt; int</code></p>
<p>Computes the Levenshtein distance between two strings. Complexity
O(n*m) where n and m are the lengths of the strings. Algorithm adjusted
from https://stackoverflow.com/a/9750974/6605742</p>
<ul>
<li><p><code>a</code></p>
<p>Function argument</p></li>
<li><p><code>b</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.strings.levenshtein usage example:</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a>levenshtein <span class="st">&quot;foo&quot;</span> <span class="st">&quot;foo&quot;</span></span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">0</span></span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a>levenshtein <span class="st">&quot;book&quot;</span> <span class="st">&quot;hook&quot;</span></span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">1</span></span>
<span id="cb197-5"><a href="#cb197-5" aria-hidden="true" tabindex="-1"></a>levenshtein <span class="st">&quot;hello&quot;</span> <span class="st">&quot;Heyo&quot;</span></span>
<span id="cb197-6"><a href="#cb197-6" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">3</span></span></code></pre></div>
<h3 id="lib.strings.commonprefixlength">lib.strings.commonPrefixLength</h3>
<p><em>a, b</em></p>
<p>Returns the length of the prefix common to both strings.</p>
<ul>
<li><p><code>a</code></p>
<p>Function argument</p></li>
<li><p><code>b</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.strings.commonsuffixlength">lib.strings.commonSuffixLength</h3>
<p><em>a, b</em></p>
<p>Returns the length of the suffix common to both strings.</p>
<ul>
<li><p><code>a</code></p>
<p>Function argument</p></li>
<li><p><code>b</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.strings.levenshteinatmost">lib.strings.levenshteinAtMost</h3>
<p>__</p>
<p><code>levenshteinAtMost :: int -&gt; string -&gt; string -&gt; bool</code></p>
<p>Returns whether the levenshtein distance between two strings is at
most some value Complexity is O(min(n,m)) for k &lt;= 2 and O(n*m)
otherwise</p>
<p>lib.strings.levenshteinAtMost usage example:</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>levenshteinAtMost <span class="dv">0</span> <span class="st">&quot;foo&quot;</span> <span class="st">&quot;foo&quot;</span></span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a>levenshteinAtMost <span class="dv">1</span> <span class="st">&quot;foo&quot;</span> <span class="st">&quot;boa&quot;</span></span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">false</span></span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a>levenshteinAtMost <span class="dv">2</span> <span class="st">&quot;foo&quot;</span> <span class="st">&quot;boa&quot;</span></span>
<span id="cb198-6"><a href="#cb198-6" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span>
<span id="cb198-7"><a href="#cb198-7" aria-hidden="true" tabindex="-1"></a>levenshteinAtMost <span class="dv">2</span> <span class="st">&quot;This is a sentence&quot;</span> <span class="st">&quot;this is a sentense.&quot;</span></span>
<span id="cb198-8"><a href="#cb198-8" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">false</span></span>
<span id="cb198-9"><a href="#cb198-9" aria-hidden="true" tabindex="-1"></a>levenshteinAtMost <span class="dv">3</span> <span class="st">&quot;This is a sentence&quot;</span> <span class="st">&quot;this is a sentense.&quot;</span></span>
<span id="cb198-10"><a href="#cb198-10" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">true</span></span></code></pre></div>
<h2 id="miscellaneous-functions">Miscellaneous functions</h2>
<h3 id="lib.trivial.id">lib.trivial.id</h3>
<p><em>x</em></p>
<p><code>id :: a -&gt; a</code></p>
<p>The identity function For when you need a function that does
“nothing”.</p>
<ul>
<li><p><code>x</code></p>
<p>The value to return</p></li>
</ul>
<h3 id="lib.trivial.const">lib.trivial.const</h3>
<p><em>x, y</em></p>
<p><code>const :: a -&gt; b -&gt; a</code></p>
<p>The constant function</p>
<ul>
<li><p><code>x</code></p>
<p>Value to return</p></li>
<li><p><code>y</code></p>
<p>Value to ignore</p></li>
</ul>
<p>lib.trivial.const usage example:</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> <span class="va">f</span> <span class="op">=</span> const <span class="dv">5</span><span class="op">;</span> <span class="kw">in</span> f <span class="dv">10</span></span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">5</span></span></code></pre></div>
<h3 id="lib.trivial.pipe">lib.trivial.pipe</h3>
<p><em>val, functions</em></p>
<p><code>pipe :: a -&gt; [&lt;functions&gt;] -&gt; &lt;return type of last function&gt;</code></p>
<p>Pipes a value through a list of functions, left to right.</p>
<ul>
<li><p><code>val</code></p>
<p>Function argument</p></li>
<li><p><code>functions</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.trivial.pipe usage example:</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a>pipe <span class="dv">2</span> <span class="op">[</span></span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a><span class="op">(</span><span class="va">x</span><span class="op">:</span> x <span class="op">+</span> <span class="dv">2</span><span class="op">)</span>  <span class="co"># 2 + 2 = 4</span></span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a><span class="op">(</span><span class="va">x</span><span class="op">:</span> x <span class="op">*</span> <span class="dv">2</span><span class="op">)</span>  <span class="co"># 4 * 2 = 8</span></span>
<span id="cb200-4"><a href="#cb200-4" aria-hidden="true" tabindex="-1"></a><span class="op">]</span></span>
<span id="cb200-5"><a href="#cb200-5" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">8</span></span>
<span id="cb200-6"><a href="#cb200-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-7"><a href="#cb200-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ideal to do text transformations</span></span>
<span id="cb200-8"><a href="#cb200-8" aria-hidden="true" tabindex="-1"></a>pipe <span class="op">[</span> <span class="st">&quot;a/b&quot;</span> <span class="st">&quot;a/c&quot;</span> <span class="op">]</span> <span class="op">[</span></span>
<span id="cb200-9"><a href="#cb200-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-10"><a href="#cb200-10" aria-hidden="true" tabindex="-1"></a><span class="co"># create the cp command</span></span>
<span id="cb200-11"><a href="#cb200-11" aria-hidden="true" tabindex="-1"></a><span class="op">(</span><span class="bu">map</span> <span class="op">(</span><span class="va">file</span><span class="op">:</span> <span class="st">&#39;&#39;cp &quot;</span><span class="sc">${</span>src<span class="sc">}</span><span class="st">/</span><span class="sc">${</span>file<span class="sc">}</span><span class="st">&quot; $out\n&#39;&#39;</span><span class="op">))</span></span>
<span id="cb200-12"><a href="#cb200-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-13"><a href="#cb200-13" aria-hidden="true" tabindex="-1"></a><span class="co"># concatenate all commands into one string</span></span>
<span id="cb200-14"><a href="#cb200-14" aria-hidden="true" tabindex="-1"></a>lib.concatStrings</span>
<span id="cb200-15"><a href="#cb200-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-16"><a href="#cb200-16" aria-hidden="true" tabindex="-1"></a><span class="co"># make that string into a nix derivation</span></span>
<span id="cb200-17"><a href="#cb200-17" aria-hidden="true" tabindex="-1"></a><span class="op">(</span>pkgs.runCommand <span class="st">&quot;copy-to-out&quot;</span> <span class="op">{})</span></span>
<span id="cb200-18"><a href="#cb200-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-19"><a href="#cb200-19" aria-hidden="true" tabindex="-1"></a><span class="op">]</span></span>
<span id="cb200-20"><a href="#cb200-20" aria-hidden="true" tabindex="-1"></a>=&gt; &lt;drv which copies all files to $out&gt;</span>
<span id="cb200-21"><a href="#cb200-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-22"><a href="#cb200-22" aria-hidden="true" tabindex="-1"></a>The output type of each function has to be the input type</span>
<span id="cb200-23"><a href="#cb200-23" aria-hidden="true" tabindex="-1"></a>of the next function, <span class="kw">and</span> the last function returns the</span>
<span id="cb200-24"><a href="#cb200-24" aria-hidden="true" tabindex="-1"></a>final value.</span></code></pre></div>
<h3 id="lib.trivial.concat">lib.trivial.concat</h3>
<p><em>x, y</em></p>
<p><code>concat :: [a] -&gt; [a] -&gt; [a]</code></p>
<p>Concatenate two lists</p>
<ul>
<li><p><code>x</code></p>
<p>Function argument</p></li>
<li><p><code>y</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.trivial.concat usage example:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a>concat <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="op">]</span> <span class="op">[</span> <span class="dv">3</span> <span class="dv">4</span> <span class="op">]</span></span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.trivial.or">lib.trivial.or</h3>
<p><em>x, y</em></p>
<p>boolean “or”</p>
<ul>
<li><p><code>x</code></p>
<p>Function argument</p></li>
<li><p><code>y</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.trivial.and">lib.trivial.and</h3>
<p><em>x, y</em></p>
<p>boolean “and”</p>
<ul>
<li><p><code>x</code></p>
<p>Function argument</p></li>
<li><p><code>y</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.trivial.bitand">lib.trivial.bitAnd</h3>
<p>__</p>
<p>bitwise “and”</p>
<h3 id="lib.trivial.bitor">lib.trivial.bitOr</h3>
<p>__</p>
<p>bitwise “or”</p>
<h3 id="lib.trivial.bitxor">lib.trivial.bitXor</h3>
<p>__</p>
<p>bitwise “xor”</p>
<h3 id="lib.trivial.bitnot">lib.trivial.bitNot</h3>
<p>__</p>
<p>bitwise “not”</p>
<h3 id="lib.trivial.booltostring">lib.trivial.boolToString</h3>
<p><em>b</em></p>
<p><code>boolToString :: bool -&gt; string</code></p>
<p>Convert a boolean to a string.</p>
<ul>
<li><p><code>b</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.trivial.mergeattrs">lib.trivial.mergeAttrs</h3>
<p><em>x, y</em></p>
<p>Merge two attribute sets shallowly, right side trumps left</p>
<ul>
<li><p><code>x</code></p>
<p>Left attribute set</p></li>
<li><p><code>y</code></p>
<p>Right attribute set (higher precedence for equal keys)</p></li>
</ul>
<p>lib.trivial.mergeAttrs usage example:</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a>mergeAttrs <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="op">}</span> <span class="op">{</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="va">c</span> <span class="op">=</span> <span class="dv">4</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">{</span> <span class="va">a</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="va">b</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="va">c</span> <span class="op">=</span> <span class="dv">4</span><span class="op">;</span> <span class="op">}</span></span></code></pre></div>
<h3 id="lib.trivial.flip">lib.trivial.flip</h3>
<p><em>f, a, b</em></p>
<p><code>flip :: (a -&gt; b -&gt; c) -&gt; (b -&gt; a -&gt; c)</code></p>
<p>Flip the order of the arguments of a binary function.</p>
<ul>
<li><p><code>f</code></p>
<p>Function argument</p></li>
<li><p><code>a</code></p>
<p>Function argument</p></li>
<li><p><code>b</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.trivial.flip usage example:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a>flip concat <span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">[</span><span class="dv">2</span><span class="op">]</span></span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span> <span class="dv">2</span> <span class="dv">1</span> <span class="op">]</span></span></code></pre></div>
<h3 id="lib.trivial.mapnullable">lib.trivial.mapNullable</h3>
<p><em>f, a</em></p>
<p>Apply function if the supplied argument is non-null.</p>
<ul>
<li><p><code>f</code></p>
<p>Function to call</p></li>
<li><p><code>a</code></p>
<p>Argument to check for null before passing it to
<code>f</code></p></li>
</ul>
<p>lib.trivial.mapNullable usage example:</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>mapNullable <span class="op">(</span><span class="va">x</span><span class="op">:</span> x<span class="op">+</span><span class="dv">1</span><span class="op">)</span> <span class="cn">null</span></span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="cn">null</span></span>
<span id="cb204-3"><a href="#cb204-3" aria-hidden="true" tabindex="-1"></a>mapNullable <span class="op">(</span><span class="va">x</span><span class="op">:</span> x<span class="op">+</span><span class="dv">1</span><span class="op">)</span> <span class="dv">22</span></span>
<span id="cb204-4"><a href="#cb204-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">23</span></span></code></pre></div>
<h3 id="lib.trivial.version">lib.trivial.version</h3>
<p>__</p>
<p>Returns the current full nixpkgs version number.</p>
<h3 id="lib.trivial.release">lib.trivial.release</h3>
<p>__</p>
<p>Returns the current nixpkgs release number as string.</p>
<h3 id="lib.trivial.oldestsupportedrelease">lib.trivial.oldestSupportedRelease</h3>
<p>__</p>
<p>The latest release that is supported, at the time of release
branch-off, if applicable.</p>
<h3 id="lib.trivial.isinoldestrelease">lib.trivial.isInOldestRelease</h3>
<p><em>release</em></p>
<p>Whether a feature is supported in all supported releases (at the time
of release branch-off, if applicable). See
<code>oldestSupportedRelease</code>.</p>
<ul>
<li><p><code>release</code></p>
<p>Release number of feature introduction as an integer, e.g. 2111 for
21.11. Set it to the upcoming release, matching the nixpkgs/.version
file.</p></li>
</ul>
<h3 id="lib.trivial.codename">lib.trivial.codeName</h3>
<p>__</p>
<p>Returns the current nixpkgs release code name.</p>
<h3 id="lib.trivial.versionsuffix">lib.trivial.versionSuffix</h3>
<p>__</p>
<p>Returns the current nixpkgs version suffix as string.</p>
<h3 id="lib.trivial.revisionwithdefault">lib.trivial.revisionWithDefault</h3>
<p><em>default</em></p>
<p><code>revisionWithDefault :: string -&gt; string</code></p>
<p>Attempts to return the the current revision of nixpkgs and returns
the supplied default value otherwise.</p>
<ul>
<li><p><code>default</code></p>
<p>Default value to return if revision can not be determined</p></li>
</ul>
<h3 id="lib.trivial.innixshell">lib.trivial.inNixShell</h3>
<p>__</p>
<p><code>inNixShell :: bool</code></p>
<p>Determine whether the function is being called from inside a Nix
shell.</p>
<h3 id="lib.trivial.inpureevalmode">lib.trivial.inPureEvalMode</h3>
<p>__</p>
<p><code>inPureEvalMode :: bool</code></p>
<p>Determine whether the function is being called from inside pure-eval
mode by seeing whether <code>builtins</code> contains
<code>currentSystem</code>. If not, we must be in pure-eval mode.</p>
<h3 id="lib.trivial.min">lib.trivial.min</h3>
<p><em>x, y</em></p>
<p>Return minimum of two numbers.</p>
<ul>
<li><p><code>x</code></p>
<p>Function argument</p></li>
<li><p><code>y</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.trivial.max">lib.trivial.max</h3>
<p><em>x, y</em></p>
<p>Return maximum of two numbers.</p>
<ul>
<li><p><code>x</code></p>
<p>Function argument</p></li>
<li><p><code>y</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.trivial.mod">lib.trivial.mod</h3>
<p><em>base, int</em></p>
<p>Integer modulus</p>
<ul>
<li><p><code>base</code></p>
<p>Function argument</p></li>
<li><p><code>int</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.trivial.mod usage example:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a>mod <span class="dv">11</span> <span class="dv">10</span></span>
<span id="cb205-2"><a href="#cb205-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">1</span></span>
<span id="cb205-3"><a href="#cb205-3" aria-hidden="true" tabindex="-1"></a>mod <span class="dv">1</span> <span class="dv">10</span></span>
<span id="cb205-4"><a href="#cb205-4" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="dv">1</span></span></code></pre></div>
<h3 id="lib.trivial.compare">lib.trivial.compare</h3>
<p><em>a, b</em></p>
<p>C-style comparisons</p>
<ul>
<li><p><code>a</code></p>
<p>Function argument</p></li>
<li><p><code>b</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.trivial.splitbyandcompare">lib.trivial.splitByAndCompare</h3>
<p><em>p, yes, no, a, b</em></p>
<p><code>(a -&gt; bool) -&gt; (a -&gt; a -&gt; int) -&gt; (a -&gt; a -&gt; int) -&gt; (a -&gt; a -&gt; int)</code></p>
<p>Split type into two subtypes by predicate <code>p</code>, take all
elements of the first subtype to be less than all the elements of the
second subtype, compare elements of a single subtype with
<code>yes</code> and <code>no</code> respectively.</p>
<ul>
<li><p><code>p</code></p>
<p>Predicate</p></li>
<li><p><code>yes</code></p>
<p>Comparison function if predicate holds for both values</p></li>
<li><p><code>no</code></p>
<p>Comparison function if predicate holds for neither value</p></li>
<li><p><code>a</code></p>
<p>First value to compare</p></li>
<li><p><code>b</code></p>
<p>Second value to compare</p></li>
</ul>
<p>lib.trivial.splitByAndCompare usage example:</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> <span class="va">cmp</span> <span class="op">=</span> splitByAndCompare <span class="op">(</span>hasPrefix <span class="st">&quot;foo&quot;</span><span class="op">)</span> compare compare<span class="op">;</span> <span class="kw">in</span></span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true" tabindex="-1"></a>cmp <span class="st">&quot;a&quot;</span> <span class="st">&quot;z&quot;</span> =&gt; <span class="op">-</span><span class="dv">1</span></span>
<span id="cb206-4"><a href="#cb206-4" aria-hidden="true" tabindex="-1"></a>cmp <span class="st">&quot;fooa&quot;</span> <span class="st">&quot;fooz&quot;</span> =&gt; <span class="op">-</span><span class="dv">1</span></span>
<span id="cb206-5"><a href="#cb206-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-6"><a href="#cb206-6" aria-hidden="true" tabindex="-1"></a>cmp <span class="st">&quot;f&quot;</span> <span class="st">&quot;a&quot;</span> =&gt; <span class="dv">1</span></span>
<span id="cb206-7"><a href="#cb206-7" aria-hidden="true" tabindex="-1"></a>cmp <span class="st">&quot;fooa&quot;</span> <span class="st">&quot;a&quot;</span> =&gt; <span class="op">-</span><span class="dv">1</span></span>
<span id="cb206-8"><a href="#cb206-8" aria-hidden="true" tabindex="-1"></a><span class="co"># while</span></span>
<span id="cb206-9"><a href="#cb206-9" aria-hidden="true" tabindex="-1"></a>compare <span class="st">&quot;fooa&quot;</span> <span class="st">&quot;a&quot;</span> =&gt; <span class="dv">1</span></span></code></pre></div>
<h3 id="lib.trivial.importjson">lib.trivial.importJSON</h3>
<p><em>path</em></p>
<p>Reads a JSON file.</p>
<ul>
<li><p><code>path</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.trivial.importtoml">lib.trivial.importTOML</h3>
<p><em>path</em></p>
<p>Reads a TOML file.</p>
<ul>
<li><p><code>path</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.trivial.warn">lib.trivial.warn</h3>
<p>__</p>
<p><code>string -&gt; a -&gt; a</code></p>
<p>Print a warning before returning the second argument. This function
behaves like <code>builtins.trace</code>, but requires a string message
and formats it as a warning, including the <code>warning:</code>
prefix.</p>
<h3 id="lib.trivial.warnif">lib.trivial.warnIf</h3>
<p><em>cond, msg</em></p>
<p><code>bool -&gt; string -&gt; a -&gt; a</code></p>
<p>Like warn, but only warn when the first argument is
<code>true</code>.</p>
<ul>
<li><p><code>cond</code></p>
<p>Function argument</p></li>
<li><p><code>msg</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.trivial.warnifnot">lib.trivial.warnIfNot</h3>
<p><em>cond, msg</em></p>
<p><code>bool -&gt; string -&gt; a -&gt; a</code></p>
<p>Like warnIf, but negated (warn if the first argument is
<code>false</code>).</p>
<ul>
<li><p><code>cond</code></p>
<p>Function argument</p></li>
<li><p><code>msg</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.trivial.throwifnot">lib.trivial.throwIfNot</h3>
<p><em>cond, msg</em></p>
<p><code>bool -&gt; string -&gt; a -&gt; a</code></p>
<p>Like the <code>assert b; e</code> expression, but with a custom error
message and without the semicolon.</p>
<ul>
<li><p><code>cond</code></p>
<p>Function argument</p></li>
<li><p><code>msg</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.trivial.throwIfNot usage example:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a>throwIfNot <span class="op">(</span>lib.isList overlays<span class="op">)</span> <span class="st">&quot;The overlays argument to nixpkgs must be a list.&quot;</span></span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a>lib.foldr <span class="op">(</span><span class="va">x</span><span class="op">:</span> throwIfNot <span class="op">(</span>lib.isFunction x<span class="op">)</span> <span class="st">&quot;All overlays passed to nixpkgs must be functions.&quot;</span><span class="op">)</span> <span class="op">(</span><span class="va">r</span><span class="op">:</span> r<span class="op">)</span> overlays</span>
<span id="cb207-3"><a href="#cb207-3" aria-hidden="true" tabindex="-1"></a>pkgs</span></code></pre></div>
<h3 id="lib.trivial.throwif">lib.trivial.throwIf</h3>
<p><em>cond, msg</em></p>
<p><code>bool -&gt; string -&gt; a -&gt; a</code></p>
<p>Like throwIfNot, but negated (throw if the first argument is
<code>true</code>).</p>
<ul>
<li><p><code>cond</code></p>
<p>Function argument</p></li>
<li><p><code>msg</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.trivial.checklistofenum">lib.trivial.checkListOfEnum</h3>
<p><em>msg, valid, given</em></p>
<p><code>String -&gt; List ComparableVal -&gt; List ComparableVal -&gt; a -&gt; a</code></p>
<p>Check if the elements in a list are valid values from a enum,
returning the identity function, or throwing an error message
otherwise.</p>
<ul>
<li><p><code>msg</code></p>
<p>Function argument</p></li>
<li><p><code>valid</code></p>
<p>Function argument</p></li>
<li><p><code>given</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.trivial.checkListOfEnum usage example:</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> <span class="va">colorVariants</span> <span class="op">=</span> <span class="op">[</span><span class="st">&quot;bright&quot;</span> <span class="st">&quot;dark&quot;</span> <span class="st">&quot;black&quot;</span><span class="op">]</span></span>
<span id="cb208-2"><a href="#cb208-2" aria-hidden="true" tabindex="-1"></a>in checkListOfEnum <span class="st">&quot;color variants&quot;</span> <span class="op">[</span> <span class="st">&quot;standard&quot;</span> <span class="st">&quot;light&quot;</span> <span class="st">&quot;dark&quot;</span> <span class="op">]</span> colorVariants<span class="op">;</span></span>
<span id="cb208-3"><a href="#cb208-3" aria-hidden="true" tabindex="-1"></a><span class="op">=</span>&gt;</span>
<span id="cb208-4"><a href="#cb208-4" aria-hidden="true" tabindex="-1"></a><span class="va">error</span><span class="op">:</span> color <span class="va">variants</span><span class="op">:</span> bright, black unexpected<span class="op">;</span> <span class="va">valid</span> <span class="va">ones</span>: <span class="va">standard</span>, <span class="va">light</span>, <span class="va">dark</span></span></code></pre></div>
<h3 id="lib.trivial.setfunctionargs">lib.trivial.setFunctionArgs</h3>
<p><em>f, args</em></p>
<p>Add metadata about expected function arguments to a function. The
metadata should match the format given by builtins.functionArgs, i.e. a
set from expected argument to a bool representing whether that argument
has a default or not. setFunctionArgs : (a → b) → Map String Bool → (a →
b)</p>
<ul>
<li><p><code>f</code></p>
<p>Function argument</p></li>
<li><p><code>args</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.trivial.functionargs">lib.trivial.functionArgs</h3>
<p><em>f</em></p>
<p>Extract the expected function arguments from a function. This works
both with nix-native { a, b ? foo, … }: style functions and functions
with args set with ‘setFunctionArgs’. It has the same return type and
semantics as builtins.functionArgs. setFunctionArgs : (a → b) → Map
String Bool.</p>
<ul>
<li><p><code>f</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.trivial.isfunction">lib.trivial.isFunction</h3>
<p><em>f</em></p>
<p>Check whether something is a function or something annotated with
function args.</p>
<ul>
<li><p><code>f</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.trivial.tofunction">lib.trivial.toFunction</h3>
<p><em>v</em></p>
<p>Turns any non-callable values into constant functions. Returns
callable values as is.</p>
<ul>
<li><p><code>v</code></p>
<p>Any value</p></li>
</ul>
<p>lib.trivial.toFunction usage example:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a>nix<span class="op">-</span>repl&gt; lib.toFunction <span class="dv">1</span> <span class="dv">2</span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span></span>
<span id="cb209-3"><a href="#cb209-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-4"><a href="#cb209-4" aria-hidden="true" tabindex="-1"></a>nix<span class="op">-</span>repl&gt; lib.toFunction <span class="op">(</span><span class="va">x</span><span class="op">:</span> x <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="dv">2</span></span>
<span id="cb209-5"><a href="#cb209-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span></span></code></pre></div>
<h3 id="lib.trivial.tohexstring">lib.trivial.toHexString</h3>
<p><em>i</em></p>
<p>Convert the given positive integer to a string of its hexadecimal
representation. For example:</p>
<ul>
<li><p><code>i</code></p>
<p>Function argument</p></li>
</ul>
<h3 id="lib.trivial.tobasedigits">lib.trivial.toBaseDigits</h3>
<p><em>base, i</em></p>
<p><code>toBaseDigits base i</code> converts the positive integer i to a
list of its digits in the given base. For example:</p>
<ul>
<li><p><code>base</code></p>
<p>Function argument</p></li>
<li><p><code>i</code></p>
<p>Function argument</p></li>
</ul>
<h2 id="versions-functions">Versions functions</h2>
<h3 id="lib.versions.splitversion">lib.versions.splitVersion</h3>
<p>__</p>
<p>Break a version string into its component parts.</p>
<p>lib.versions.splitVersion usage example:</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a>splitVersion <span class="st">&quot;1.2.3&quot;</span></span>
<span id="cb210-2"><a href="#cb210-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="op">[</span><span class="st">&quot;1&quot;</span> <span class="st">&quot;2&quot;</span> <span class="st">&quot;3&quot;</span><span class="op">]</span></span></code></pre></div>
<h3 id="lib.versions.major">lib.versions.major</h3>
<p><em>v</em></p>
<p>Get the major version string from a string.</p>
<ul>
<li><p><code>v</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.versions.major usage example:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a>major <span class="st">&quot;1.2.3&quot;</span></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;1&quot;</span></span></code></pre></div>
<h3 id="lib.versions.minor">lib.versions.minor</h3>
<p><em>v</em></p>
<p>Get the minor version string from a string.</p>
<ul>
<li><p><code>v</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.versions.minor usage example:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a>minor <span class="st">&quot;1.2.3&quot;</span></span>
<span id="cb212-2"><a href="#cb212-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;2&quot;</span></span></code></pre></div>
<h3 id="lib.versions.patch">lib.versions.patch</h3>
<p><em>v</em></p>
<p>Get the patch version string from a string.</p>
<ul>
<li><p><code>v</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.versions.patch usage example:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a>patch <span class="st">&quot;1.2.3&quot;</span></span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;3&quot;</span></span></code></pre></div>
<h3 id="lib.versions.majorminor">lib.versions.majorMinor</h3>
<p><em>v</em></p>
<p>Get string of the first two parts (major and minor) of a version
string.</p>
<ul>
<li><p><code>v</code></p>
<p>Function argument</p></li>
</ul>
<p>lib.versions.majorMinor usage example:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode nix"><code class="sourceCode nix"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a>majorMinor <span class="st">&quot;1.2.3&quot;</span></span>
<span id="cb214-2"><a href="#cb214-2" aria-hidden="true" tabindex="-1"></a>=&gt; <span class="st">&quot;1.2&quot;</span></span></code></pre></div>
<p>Theme: <a href="https://github.com/jez/pandoc-markdown-css-theme">jez/pandoc-markdown-css-theme</a></p>
</main>

<script>
;(function() {
  // Non-essential if user has JavaScript off. Just makes checkboxes look nicer.
  var selector = '.task-list > li > input[type="checkbox"]';
  var checkboxes = document.querySelectorAll(selector);
  Array.from(checkboxes).forEach((checkbox) => {
    var wasChecked = checkbox.checked;
    checkbox.disabled = false;
    checkbox.addEventListener('click', (ev) => {ev.target.checked = wasChecked});
  });
})();
</script>
</body>
</html>
